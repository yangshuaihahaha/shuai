# 什么是Zab协议？

为Zookeeper设计的支持崩溃恢复的原子广播协议，目的是实现
zookeeper各个节点的分区一致性

# zab怎么实现分布式数据一致性

zookeeper客户端会随机的链接到 zookeeper 集群中的一个节点，如果是读请求，就直接从当前节点中读取数据；如果是写请求，那么节点就会向 Leader 提交事务，Leader 接收到事务提交，会广播该事务，只要超过半数节点写入成功，该事务就会被提交。
另外zookeeper是树形结构具有顺序性很多操作都要先检查才能确定是否可以执行，Zab协议要保证同一个Leader发起的事务要按顺序被执行

# 那选举新leader的算法是什么？
每个节点都将自己作为Leader服务器来进行投票，主要就是比较(myid, ZXID)，如果ZXID相同就去比较myid

# 选举过程中是否会产生数据丢失
不会，zookeeper是满足CP理论的，选举过程中会选择zxid(事物id)最大的节点作为leader，表示数据是最新的，然后广播给follower，这样就避免了数据丢失

