!function(e,t,n,r){"use strict";function i(t,n){this.element=t,this.$element=e(t),this.name=s,this.opts=e.extend(!0,{},e.fn[s].defaults,n),this.$elements={breadcrumbs:null,content:null},this.init(t,n)}var s="simpleFileBrowser";i.prototype={_get:function(){var t=this;if(t.opts.json){var n=jQuery.Deferred();return n.resolve(t.opts.json[t._pathToString()]),n.promise()}var r=t.opts.data;return r.path=t._pathToString(),e.ajax({url:t.opts.url,dataType:"json",type:t.opts.method,async:!0,cache:!1,data:r})},_awesome:function(e){var t="";switch(e){case"folder":t="far fa-folder";break;case"ogg":case"wav":case"mp3":t="far fa-file-audio";break;case"docx":case"doc":case"odt":t="far fa-file-word";break;case"xls":t="far fa-file-excel";break;case"ppt":case"pps":t="far fa-file-powerpoint";break;case"tiff":case"gif":case"bmp":case"png":case"jpeg":case"jpg":t="far fa-image";break;case"gz":case"tar":case"rar":case"zip":t="far fa-file-archive";break;case"mpg":case"avi":case"mp4":case"flv":t="far fa-file-video";break;case"pdf":t="far fa-file-pdf";break;case"txt":case"sql":case"php":case"css":case"js":case"config":t="far fa-file-alt";break;default:t="far fa-file"}return t},_trim:function(e,t,n){return t===r&&(t="s"),n===r&&(n="both"),("left"==n||"both"==n)&&(e=e.replace(new RegExp("^["+t+"]+"),"")),("right"==n||"both"==n)&&(e=e.replace(new RegExp("["+t+"]+$"),"")),e},_pathChange:function(e){var t=this;e!=r&&(".."==e?t.path.pop():t.path.push(e))},_pathToString:function(e){var t=this;if(e==r)var n=t.path;else var n=t.path.slice(0,e);var i=1==n.length?"/":n.join("/");return i},_draw:function(t){var n=this;n.$elements.content.html(""),n.$element.removeClass("x64 x32 x22 x16"),n.$element.addClass("x"+n.opts.size),n.$elements.content.removeClass("icon details"),n.$elements.content.addClass(n.opts.view),n.opts.breadcrumbs&&(n.$elements.breadcrumbs.html(""),e.each(n.path,function(t,r){var i=""==r?"root":r,s=e("<li />").data("path",n._pathToString(t+1)).text(i);n.$elements.breadcrumbs.append(s)}));var r="<ul>";e.each(t,function(e,t){r+='<li data-name="'+t.name+'" data-type="'+("folder"==t.type?"folder":"file")+'"><i class="'+n._awesome(t.type)+'"></i><span>'+(t.name||"")+"</span></li>"}),r+="</ul>",n.$elements.content.html(r)},init:function(){var t=this;t.path=t._trim(this.opts.path,"/","right").split("/"),t.$element.html(""),t.$element.addClass("sfb"),1==t.opts.breadcrumbs&&(t.$elements.breadcrumbs=e("<ul />").addClass("sfbBreadCrumbs"),t.$element.append(t.$elements.breadcrumbs),t.$elements.breadcrumbs.on("click","li",function(){var n=e(this);t.path=t._trim(n.data("path"),"/","right").split("/"),t._get().then(function(e){t._draw(e)})})),t.$elements.content=e("<div />").addClass("sfbContent"),t.$element.append(t.$elements.content);var n=function(e){"folder"==e.data("type")&&(t._pathChange(e.data("name")),t._get().then(function(e){t._draw(e)})),t.opts.onOpen.call(t,t,e.data("name"),t._pathToString(),e.data("type"))},r=function(e){".."!=e.data("name")&&(t.$elements.content.find("li").removeClass("selected"),e.addClass("selected"),t.selected=t._pathToString()+e.data("name"),t.opts.onSelect.call(t,t,e.data("name"),t._pathToString(),e.data("type")))},i=0,s=1;t.opts.select?2:1,t.$elements.content.on("click","li",function(){var o=e(this);i++,1===i?s=setTimeout(function(){t.opts.select?r(o):n(o),i=0},200):(clearTimeout(s),t.opts.select&&r(o),n(o),i=0)}),t._get().then(function(e){t._draw(e),t.opts.onLoad.call(t,t)})},remove:function(){this.html(""),this.$element.removeData("plugin_"+s),this.$element.removeClass("sfb x64 x32 x22 x16")},getSelected:function(){var e=this;return e.selected},getPath:function(){var e=this;return e._pathToString()},redraw:function(){var e=this;e._get().then(function(t){e._draw(t)})},chgOption:function(e){var t=this;"undefined"!=typeof e.view&&(t.opts.view=e.view),"undefined"!=typeof e.size&&(t.opts.size=e.size),"undefined"!=typeof e.select&&(t.opts.select=e.select),"undefined"!=typeof e.path&&(t.path=t._trim(e.path,"/","right").split("/")),t.redraw()}},e.fn[s]=function(t){if("string"==typeof arguments[0]){var n=Array.prototype.slice.call(arguments,1);if(e.isFunction(i.prototype[t])){var r;return this.each(function(){r=e.data(this,"plugin_"+s)[t](n[0])}),"undefined"!=typeof r?r:this}e.error("Method "+t+" is not available")}else if("object"==typeof t||!t)return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new i(this,t))})},e.fn[s].defaults={url:"folder.php",json:null,method:"post",view:"details",size:"64",path:"/",breadcrumbs:!1,select:!0,data:{},onSelect:function(){},onOpen:function(){},onDestroy:function(){},onLoad:function(){}}}(jQuery,window,document),function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define([],n):typeof exports=="object"?exports.Clappr=n():t.Clappr=n()}(typeof self!="undefined"?self:this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=100)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(38),i=s(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||(typeof t=="undefined"?"undefined":(0,i.default)(t))!=="object"&&typeof t!="function"?e:t}},function(e,t,n){"use strict";function f(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(131),i=f(r),s=n(76),o=f(s),u=n(38),a=f(u);t.default=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t=="undefined"?"undefined":(0,a.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(75),i=s(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=h(r),s=n(0),o=h(s),u=n(38),a=h(u),f=n(32),l=h(f),c=n(5),p=Array.prototype.slice,d=/\s+/,v=function(t,n,r,i){if(!r)return!0;if((typeof r=="undefined"?"undefined":(0,a.default)(r))==="object"){for(var s in r)t[n].apply(t,[s,r[s]].concat(i));return!1}if(d.test(r)){var o=r.split(d);for(var u=0,f=o.length;u<f;u++)t[n].apply(t,[o[u]].concat(i));return!1}return!0},m=function(t,n,r,i){function h(){try{switch(n.length){case 0:while(++o<u)(s=t[o]).callback.call(s.ctx);return;case 1:while(++o<u)(s=t[o]).callback.call(s.ctx,a);return;case 2:while(++o<u)(s=t[o]).callback.call(s.ctx,a,f);return;case 3:while(++o<u)(s=t[o]).callback.call(s.ctx,a,f,c);return;default:while(++o<u)(s=t[o]).callback.apply(s.ctx,n);return}}catch(e){l.default.error.apply(l.default,[r,"error on event",i,"trigger","-",e]),h()}}var s=void 0,o=-1,u=t.length,a=n[0],f=n[1],c=n[2];h()},g=function(){function e(){(0,o.default)(this,e)}return e.prototype.on=function(t,n,r){if(!v(this,"on",t,[n,r])||!n)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:n,context:r,ctx:r||this}),this},e.prototype.once=function(t,n,r){var i=this,s=void 0;if(!v(this,"once",t,[n,r])||!n)return this;var o=function(){return i.off(t,s)};return s=function(){o(t,s),n.apply(this,arguments)},this.on(t,s,r)},e.prototype.off=function(t,n,r){var s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0;if(!this._events||!v(this,"off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;a=t?[t]:(0,i.default)(this._events);for(f=0,l=a.length;f<l;f++){t=a[f],u=this._events[t];if(u){this._events[t]=s=[];if(n||r)for(c=0,h=u.length;c<h;c++)o=u[c],(n&&n!==o.callback&&n!==o.callback._callback||r&&r!==o.context)&&s.push(o);s.length||delete this._events[t]}}return this},e.prototype.trigger=function(t){var n=this.name||this.constructor.name;l.default.debug.apply(l.default,[n].concat(Array.prototype.slice.call(arguments)));if(!this._events)return this;var r=p.call(arguments,1);if(!v(this,"trigger",t,r))return this;var i=this._events[t],s=this._events.all;return i&&m(i,r,n,t),s&&m(s,arguments,n,t),this},e.prototype.stopListening=function(t,n,r){var s=this._listeningTo;if(!s)return this;var o=!n&&!r;!r&&(typeof n=="undefined"?"undefined":(0,a.default)(n))==="object"&&(r=this),t&&((s={})[t._listenId]=t);for(var u in s)t=s[u],t.off(n,r,this),(o||(0,i.default)(t._events).length===0)&&delete this._listeningTo[u];return this},e.register=function(n){e.Custom||(e.Custom={});var r=typeof n=="string"&&n.toUpperCase().trim();r&&!e.Custom[r]?e.Custom[r]=r.toLowerCase().split("_").map(function(e,t){return t===0?e:e=e[0].toUpperCase()+e.slice(1)}).join(""):l.default.error("Events","Error when register event: "+n)},e.listAvailableCustomEvents=function(){return e.Custom||(e.Custom={}),(0,i.default)(e.Custom).filter(function(t){return typeof e.Custom[t]=="string"})},e}();t.default=g;var y={listenTo:"on",listenToOnce:"once"};(0,i.default)(y).forEach(function(e){g.prototype[e]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=(0,c.uniqueId)("l"));return i[s]=t,!r&&(typeof n=="undefined"?"undefined":(0,a.default)(n))==="object"&&(r=this),t[y[e]](n,r,this),this}}),g.PLAYER_READY="ready",g.PLAYER_RESIZE="resize",g.PLAYER_FULLSCREEN="fullscreen",g.PLAYER_PLAY="play",g.PLAYER_PAUSE="pause",g.PLAYER_STOP="stop",g.PLAYER_ENDED="ended",g.PLAYER_SEEK="seek",g.PLAYER_ERROR="playererror",g.ERROR="error",g.PLAYER_TIMEUPDATE="timeupdate",g.PLAYER_VOLUMEUPDATE="volumeupdate",g.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",g.PLAYBACK_PROGRESS="playback:progress",g.PLAYBACK_TIMEUPDATE="playback:timeupdate",g.PLAYBACK_READY="playback:ready",g.PLAYBACK_BUFFERING="playback:buffering",g.PLAYBACK_BUFFERFULL="playback:bufferfull",g.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",g.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",g.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",g.PLAYBACK_BITRATE="playback:bitrate",g.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",g.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",g.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",g.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",g.PLAYBACK_DVR="playback:dvr",g.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",g.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",g.PLAYBACK_ENDED="playback:ended",g.PLAYBACK_PLAY_INTENT="playback:play:intent",g.PLAYBACK_PLAY="playback:play",g.PLAYBACK_PAUSE="playback:pause",g.PLAYBACK_SEEK="playback:seek",g.PLAYBACK_SEEKED="playback:seeked",g.PLAYBACK_STOP="playback:stop",g.PLAYBACK_ERROR="playback:error",g.PLAYBACK_STATS_ADD="playback:stats:add",g.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",g.PLAYBACK_LEVEL_SWITCH="playback:level:switch",g.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",g.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",g.CORE_CONTAINERS_CREATED="core:containers:created",g.CORE_OPTIONS_CHANGE="core:options:change",g.CORE_READY="core:ready",g.CORE_FULLSCREEN="core:fullscreen",g.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",g.CONTAINER_PLAYBACKSTATE="container:playbackstate",g.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",g.CONTAINER_BITRATE="container:bitrate",g.CONTAINER_STATS_REPORT="container:stats:report",g.CONTAINER_DESTROYED="container:destroyed",g.CONTAINER_READY="container:ready",g.CONTAINER_ERROR="container:error",g.CONTAINER_LOADEDMETADATA="container:loadedmetadata",g.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",g.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",g.CONTAINER_TIMEUPDATE="container:timeupdate",g.CONTAINER_PROGRESS="container:progress",g.CONTAINER_PLAY="container:play",g.CONTAINER_STOP="container:stop",g.CONTAINER_PAUSE="container:pause",g.CONTAINER_ENDED="container:ended",g.CONTAINER_CLICK="container:click",g.CONTAINER_DBLCLICK="container:dblclick",g.CONTAINER_CONTEXTMENU="container:contextmenu",g.CONTAINER_MOUSE_ENTER="container:mouseenter",g.CONTAINER_MOUSE_LEAVE="container:mouseleave",g.CONTAINER_SEEK="container:seek",g.CONTAINER_SEEKED="container:seeked",g.CONTAINER_VOLUME="container:volume",g.CONTAINER_FULLSCREEN="container:fullscreen",g.CONTAINER_STATE_BUFFERING="container:state:buffering",g.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",g.CONTAINER_SETTINGSUPDATE="container:settingsupdate",g.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",g.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",g.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",g.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",g.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",g.CONTAINER_STATS_ADD="container:stats:add",g.CONTAINER_OPTIONS_CHANGE="container:options:change",g.MEDIACONTROL_RENDERED="mediacontrol:rendered",g.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",g.MEDIACONTROL_SHOW="mediacontrol:show",g.MEDIACONTROL_HIDE="mediacontrol:hide",g.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",g.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",g.MEDIACONTROL_PLAYING="mediacontrol:playing",g.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",g.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",g.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",e.exports=t["default"]},function(e,t,n){"use strict";function b(e){return e&&e.__esModule?e:{"default":e}}function w(e,t){if(t)for(var n in t){var r=(0,d.default)(t,n);r?(0,h.default)(e,n,r):e[n]=t[n]}return e}function E(e,t){var n=function(e){function n(){(0,o.default)(this,n);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];var u=(0,a.default)(this,e.call.apply(e,[this].concat(i)));return t.initialize&&t.initialize.apply(u,i),u}return(0,l.default)(n,e),n}(e);return w(n.prototype,t),n}function S(e,t){if(!isFinite(e))return"--:--";e*=1e3,e=parseInt(e/1e3);var n=e%60;e=parseInt(e/60);var r=e%60;e=parseInt(e/60);var i=e%24,s=parseInt(e/24),o="";s&&s>0&&(o+=s+":",i<1&&(o+="00:"));if(i&&i>0||t)o+=("0"+i).slice(-2)+":";return o+=("0"+r).slice(-2)+":",o+=("0"+n).slice(-2),o.trim()}function C(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"t",t=0,n=N.params[e]||N.hashParams[e]||"",r=n.match(/[0-9]+[hms]+/g)||[];if(r.length>0){var i={h:3600,m:60,s:1};r.forEach(function(e){if(e){var n=e[e.length-1],r=parseInt(e.slice(0,e.length-1),10);t+=r*i[n]}})}else n&&(t=parseInt(n,10));return t}function L(e){k[e]||(k[e]=0);var t=++k[e];return e+t}function A(e){return e-parseFloat(e)+1>=0}function O(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function D(){return window.navigator&&window.navigator.language}function P(){return window.performance&&window.performance.now?performance.now():Date.now()}function H(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.DomRecycler=t.cancelAnimationFrame=t.requestAnimationFrame=t.QueryString=t.Config=t.Fullscreen=undefined;var r=n(3),i=b(r),s=n(0),o=b(s),u=n(1),a=b(u),f=n(2),l=b(f),c=n(75),h=b(c),p=n(137),d=b(p);t.assign=w,t.extend=E,t.formatTime=S,t.seekStringToSeconds=C,t.uniqueId=L,t.isNumber=A,t.currentScriptUrl=O,t.getBrowserLanguage=D,t.now=P,t.removeArrayItem=H,n(140);var v=n(13),m=b(v),g=n(6),y=b(g),x=t.Fullscreen={isFullscreen:function(){return!!(document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)},requestFullscreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.querySelector&&t.querySelector("video")&&t.querySelector("video").webkitEnterFullScreen?t.querySelector("video").webkitEnterFullScreen():t.webkitEnterFullScreen&&t.webkitEnterFullScreen()},cancelFullscreen:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;t.exitFullscreen?t.exitFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},T=t.Config=function(){function e(){(0,o.default)(this,e)}return e._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},e._defaultValueFor=function(t){try{return this._defaultConfig()[t].parse(this._defaultConfig()[t].value)}catch(n){return undefined}},e._createKeyspace=function(t){return"clappr."+document.domain+"."+t},e.restore=function(t){return m.default.hasLocalstorage&&localStorage[this._createKeyspace(t)]?this._defaultConfig()[t].parse(localStorage[this._createKeyspace(t)]):this._defaultValueFor(t)},e.persist=function(t,n){if(m.default.hasLocalstorage)try{return localStorage[this._createKeyspace(t)]=n,!0}catch(r){return!1}},e}(),N=t.QueryString=function(){function e(){(0,o.default)(this,e)}return e.parse=function(t){var n=void 0,r=/\+/g,i=/([^&=]+)=?([^&]*)/g,s=function(t){return decodeURIComponent(t.replace(r," "))},o={};while(n=i.exec(t))o[s(n[1]).toLowerCase()]=s(n[2]);return o},(0,i.default)(e,null,[{key:"params",get:function(){var t=window.location.search.substring(1);return t!==this.query&&(this._urlParams=this.parse(t),this.query=t),this._urlParams}},{key:"hashParams",get:function(){var t=window.location.hash.substring(1);return t!==this.hash&&(this._hashParams=this.parse(t),this.hash=t),this._hashParams}}]),e}(),k={},M=t.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),_=t.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window),B=[],j=t.DomRecycler=function(){function e(){(0,o.default)(this,e)}return e.configure=function(t){this.options=y.default.extend(this.options,t)},e.create=function(t){return this.options.recycleVideo&&t==="video"&&B.length>0?B.shift():(0,y.default)("<"+t+">")},e.garbage=function(t){if(!this.options.recycleVideo||t[0].tagName.toUpperCase()!=="VIDEO")return;t.children().remove(),B.push(t)},e}();j.options={recycleVideo:!1},t.default={Config:T,Fullscreen:x,QueryString:N,DomRecycler:j,extend:E,formatTime:S,seekStringToSeconds:C,uniqueId:L,currentScriptUrl:O,isNumber:A,requestAnimationFrame:M,cancelAnimationFrame:_,getBrowserLanguage:D,now:P,removeArrayItem:H}},function(module,exports){var Zepto=function(){function _(e){return e==null?String(e):T[N.call(e)]||"object"}function D(e){return _(e)=="function"}function P(e){return e!=null&&e==e.window}function H(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function B(e){return _(e)=="object"}function j(e){return B(e)&&!P(e)&&Object.getPrototypeOf(e)==Object.prototype}function F(e){var t=!!e&&"length"in e&&e.length,r=n.type(e);return"function"!=r&&!P(e)&&("array"==r||t===0||typeof t=="number"&&t>0&&t-1 in e)}function I(e){return o.call(e,function(e){return e!=null})}function q(e){return e.length>0?n.fn.concat.apply([],e):e}function R(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function z(e,t){return typeof t=="number"&&!c[R(e)]?t+"px":t}function W(e){var t,n;return f[e]||(t=a.createElement(e),a.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),f[e]=n),f[e]}function X(e){return"children"in e?u.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function V(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function $(n,r,i){for(t in r)i&&(j(r[t])||M(r[t]))?(j(r[t])&&!j(n[t])&&(n[t]={}),M(r[t])&&!M(n[t])&&(n[t]=[]),$(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function J(e,t){return t==null?n(e):n(e).filter(t)}function K(e,t,n,r){return D(t)?t.call(e,n,r):t}function Q(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function G(t,n){var r=t.className||"",i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Y(e){try{return e?e=="true"||(e=="false"?!1:e=="null"?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function Z(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)Z(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.concat,o=i.filter,u=i.slice,a=window.document,f={},l={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,d=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,v=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],y=["after","prepend","before","append"],b=a.createElement("table"),w=a.createElement("tr"),E={tr:a.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:w,th:w,"*":a.createElement("div")},S=/complete|loaded|interactive/,x=/^[\w-]*$/,T={},N=T.toString,C={},k,L,A=a.createElement("div"),O={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},M=Array.isArray||function(e){return e instanceof Array};return C.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=A).appendChild(e),r=~C.qsa(i,t).indexOf(e),s&&A.removeChild(e),r},k=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},L=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},C.fragment=function(t,r,i){var s,o,f;return p.test(t)&&(s=n(a.createElement(RegExp.$1))),s||(t.replace&&(t=t.replace(d,"<$1></$2>")),r===e&&(r=h.test(t)&&RegExp.$1),r in E||(r="*"),f=E[r],f.innerHTML=""+t,s=n.each(u.call(f.childNodes),function(){f.removeChild(this)})),j(i)&&(o=n(s),n.each(i,function(e,t){g.indexOf(e)>-1?o[e](t):o.attr(e,t)})),s},C.Z=function(e,t){return new V(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,r){var i;if(!t)return C.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&h.test(t))i=C.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=C.qsa(a,t)}}else{if(D(t))return n(a).ready(t);if(C.isZ(t))return t;if(M(t))i=I(t);else if(B(t))i=[t],t=null;else if(h.test(t))i=C.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=C.qsa(a,t)}}return C.Z(i,t)},n=function(e,t){return C.init(e,t)},n.extend=function(e){var t,n=u.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){$(e,n,t)}),e},C.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",s=r||i?t.slice(1):t,o=x.test(s);return e.getElementById&&o&&r?(n=e.getElementById(s))?[n]:[]:e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11?[]:u.call(o&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=a.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=_,n.isFunction=D,n.isWindow=P,n.isArray=M,n.isPlainObject=j,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return e!=null&&n!="boolean"&&(n!="string"||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=k,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var n,r=[],i,s;if(F(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return q(r)},n.each=function(e,t){var n,r;if(F(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){T["[object "+t+"]"]=t.toLowerCase()}),n.fn={constructor:C.Z,length:0,forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,splice:i.splice,indexOf:i.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return S.test(a.readyState)&&a.body?e(n):a.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return D(e)?this.not(this.not(e)):n(o.call(this,function(t){return C.matches(t,e)}))},add:function(e,t){return n(L(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var r=[];if(D(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):F(t)&&D(t.item)?u.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return B(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!B(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!B(e)?e:n(e)},find:function(e){var t,r=this;return e?typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(C.qsa(this[0],e)):t=this.map(function(){return C.qsa(this,e)}):t=n(),t},closest:function(e,t){var r=[],i=typeof e=="object"&&n(e);return this.each(function(n,s){while(s&&!(i?i.indexOf(s)>=0:C.matches(s,e)))s=s!==t&&!H(s)&&s.parentNode;s&&r.indexOf(s)<0&&r.push(s)}),n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!H(e)&&t.indexOf(e)<0)return t.push(e),e});return J(t,e)},parent:function(e){return J(L(this.pluck("parentNode")),e)},children:function(e){return J(this.map(function(){return X(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||u.call(this.childNodes)})},siblings:function(e){return J(this.map(function(e,t){return o.call(X(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=W(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=D(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=D(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var r=this.innerHTML;n(this).empty().append(K(this,e,t,r))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=K(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(n,r){var i;return typeof n!="string"||1 in arguments?this.each(function(e){if(this.nodeType!==1)return;if(B(n))for(t in n)Q(this,t,n[t]);else Q(this,n,K(this,r,e,this.getAttribute(n)))}):0 in this&&this[0].nodeType==1&&(i=this[0].getAttribute(n))!=null?i:e},removeAttr:function(e){return this.each(function(){this.nodeType===1&&e.split(" ").forEach(function(e){Q(this,e)},this)})},prop:function(e,t){return e=O[e]||e,1 in arguments?this.each(function(n){this[e]=K(this,t,n,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=O[e]||e,this.each(function(){delete this[e]})},data:function(t,n){var r="data-"+t.replace(m,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return i!==null?Y(i):e},val:function(e){return 0 in arguments?(e==null&&(e=""),this.each(function(t){this.value=K(this,e,t,this.value)})):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=K(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(!this.length)return null;if(a.documentElement!==this[0]&&!n.contains(a.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0];if(typeof e=="string"){if(!i)return;return i.style[k(e)]||getComputedStyle(i,"").getPropertyValue(e)}if(M(e)){if(!i)return;var s={},o=getComputedStyle(i,"");return n.each(e,function(e,t){s[t]=i.style[k(t)]||o.getPropertyValue(t)}),s}}var u="";if(_(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(R(e))}):u=R(e)+":"+z(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(R(t))}):u+=R(t)+":"+z(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(G(e))},U(e)):!1},addClass:function(e){return e?this.each(function(t){if(!("className"in this))return;r=[];var i=G(this),s=K(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&G(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(!("className"in this))return;if(t===e)return G(this,"");r=G(this),K(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(U(e)," ")}),G(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=K(this,t,i,G(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||a.body;while(e&&!v.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?P(o)?o["inner"+r]:H(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,K(this,i,e,o[t]()))})}}),y.forEach(function(t,r){var i=r%2;n.fn[t]=function(){var t,s=n.map(arguments,function(r){var i=[];return t=_(r),t=="array"?(r.forEach(function(t){if(t.nodeType!==e)return i.push(t);if(n.zepto.isZ(t))return i=i.concat(t.get());i=i.concat(C.fragment(t))}),i):t=="object"||r==null?r:C.fragment(r)}),o,u=this.length>1;return s.length<1?this:this.each(function(e,t){o=i?t:t.parentNode,t=r==0?t.nextSibling:r==1?t.firstChild:r==2?t:null;var f=n.contains(a.documentElement,o);s.forEach(function(e){if(u)e=e.cloneNode(!0);else if(!o)return n(e).remove();o.insertBefore(e,t),f&&Z(e,function(e){if(e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}})})})},n.fn[i?t+"To":"insert"+(r?"Before":"After")]=function(e){return n(e)[t](this),this}}),C.Z.prototype=V.prototype=n.fn,C.uniq=L,C.deserializeValue=Y,n.zepto=C,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function ajaxDataFilter(e,t,n){if(n.dataFilter==empty)return e;var r=n.context;return n.dataFilter.call(r,e,t)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET"||"jsonp"==e.dataType)&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=+(new Date),document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,originAnchor=document.createElement("a");originAnchor.href=window.location.href,$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"Zepto"+jsonpID++,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:empty},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred(),urlAnchor,hashIndex;for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(urlAnchor=document.createElement("a"),urlAnchor.href=settings.url,urlAnchor.href=urlAnchor.href,settings.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host),settings.url||(settings.url=window.location.toString()),(hashIndex=settings.url.indexOf("#"))>-1&&(settings.url=settings.url.slice(0,hashIndex)),serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);hasPlaceholder&&(dataType="jsonp");if(settings.cache===!1||(!options||options.cache!==!0)&&("script"==dataType||"jsonp"==dataType))settings.url=appendQuery(settings.url,"_="+Date.now());if("jsonp"==dataType)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type"));if(xhr.responseType=="arraybuffer"||xhr.responseType=="blob")result=xhr.response;else{result=xhr.responseText;try{result=ajaxDataFilter(result,dataType,settings),dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}if(error)return ajaxError(error,"parsererror",xhr,settings,deferred)}ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){$.isFunction(t)&&(t=t()),t==null&&(t=""),this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,r,i,s,o,u,a=[],f=!t.once&&[],l=function(e){n=t.memory&&e,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;++u)if(a[u].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a.length=0:c.disable())},c={add:function(){if(a){var r=a.length,u=function(n){e.each(n,function(e,n){typeof n=="function"?(!t.unique||!c.has(n))&&a.push(n):n&&n.length&&typeof n!="string"&&u(n)})};u(arguments),i?o=a.length:n&&(s=r,l(n))}return this},remove:function(){return a&&e.each(arguments,function(t,n){var r;while((r=e.inArray(n,a,r))>-1)a.splice(r,1),i&&(r<=o&&--o,r<=u&&--u)}),this},has:function(t){return!!a&&!!(t?e.inArray(t,a)>-1:a.length)},empty:function(){return o=a.length=0,this},disable:function(){return a=f=n=undefined,this},disabled:function(){return!a},lock:function(){return f=undefined,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!r||f)&&(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments)},fired:function(){return!!r}};return c}}(Zepto),function(e){function n(t){var r=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",s={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n(function(n){e.each(r,function(r,i){var u=e.isFunction(t[r])&&t[r];o[i[1]](function(){var t=u&&u.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var r=this===s?n.promise():this,o=u?[t]:arguments;n[i[0]+"With"](r,o)}})}),t=null}).promise()},promise:function(t){return t!=null?e.extend(t,s):s}},o={};return e.each(r,function(e,t){var n=t[2],u=t[3];s[t[1]]=n.add,u&&n.add(function(){i=u},r[e^1][2].disable,r[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=n.fireWith}),s.promise(o),t&&t.call(o,o),o}var t=Array.prototype.slice;e.when=function(r){var i=t.call(arguments),s=i.length,o=0,u=s!==1||r&&e.isFunction(r.promise)?s:0,a=u===1?r:n(),f,l,c,h=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?t.call(arguments):i,r===f?a.notifyWith(n,r):--u||a.resolveWith(n,r)}};if(s>1){f=new Array(s),l=new Array(s),c=new Array(s);for(;o<s;++o)i[o]&&e.isFunction(i[o].promise)?i[o].promise().done(h(o,c,i)).fail(a.reject).progress(h(o,l,f)):--u}return u||a.resolveWith(c,i),a.promise()},e.Deferred=n}(Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w}),t.timeStamp||(t.timeStamp=Date.now());if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var o=2 in arguments&&r.call(arguments,2);if(i(t)){var u=function(){return t.apply(n,o?o.concat(r.call(arguments)):arguments)};return u._zid=c(t),u}if(s(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(a===n||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){t.type in f&&typeof this[t.type]=="function"?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function(){try{getComputedStyle(undefined)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e,n){try{return t(e,n)}catch(r){return null}}}}(),function(e){function i(t){return t=e(t),(!!t.width()||!!t.height())&&t.css("display")!=="none"}function f(e,t){e=e.replace(/=#\]/g,'="#"]');var n,r,i=o.exec(e);if(i&&i[2]in s){n=s[i[2]],r=i[3],e=i[1];if(r){var u=Number(r);isNaN(u)?r=r.replace(/^["']|["']$/g,""):r=u}}return t(e,n,r)}var t=e.zepto,n=t.qsa,r=t.matches,s=e.expr[":"]={visible:function(){if(i(this))return this},hidden:function(){if(!i(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(e===0)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,r){if(e(this).text().indexOf(r)>-1)return this},has:function(e,n,r){if(t.qsa(this,r).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),u=/^\s*>/,a="Zepto"+ +(new Date);t.qsa=function(r,i){return f(i,function(s,o,f){try{var l;!s&&o?s="*":u.test(s)&&(l=e(r).addClass(a),s="."+a+" "+s);var c=n(r,s)}catch(h){throw console.error("error performing selector: %o",i),h}finally{l&&l.removeClass(a)}return o?t.uniq(e.map(c,function(e,t){return o.call(e,t,c,f)})):c})},t.matches=function(e,t){return f(t,function(t,n,i){return(!t||r(e,t))&&(!n||n.call(e,null,i)===e)})}}(Zepto),module.exports=Zepto},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&typeof btoa=="function"){var s=r(i),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([s]).join("\n")}return[n].join("\n")}function r(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}e.exports=function(e){var t=[];return t.toString=function r(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){typeof e=="string"&&(e=[[null,e,""]]);var r={};for(var i=0;i<this.length;i++){var s=this[i][0];typeof s=="number"&&(r[s]=!0)}for(i=0;i<e.length;i++){var o=e[i];if(typeof o[0]!="number"||!r[o[0]])n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o)}},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},i=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},o=/\\|'|\r|\n|\t|\u2028|\u2029/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},a=new RegExp("[&<>\"']","g"),f=function(t){return t===null?"":(""+t).replace(a,function(e){return u[e]})},l=0,c=function(t,n){var u,a=new RegExp([(r.escape||i).source,(r.interpolate||i).source,(r.evaluate||i).source].join("|")+"|$","g"),c=0,h="__p+='";t.replace(a,function(e,n,r,i,u){return h+=t.slice(c,u).replace(o,function(e){return"\\"+s[e]}),n&&(h+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),r&&(h+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(h+="';\n"+i+"\n__p+='"),c=u+e.length,e}),h+="';\n",r.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n//# sourceURL=/microtemplates/source["+l++ +"]";try{u=new Function(r.variable||"obj","escapeExpr",h)}catch(p){throw p.source=h,p}if(n)return u(n,f);var d=function(t){return u.call(this,t,f)};return d.source="function("+(r.variable||"obj")+"){\n"+h+"}",d};c.settings=r,t.default=c,e.exports=t["default"]},function(e,t,n){function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],s=r[i.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](i.parts[o]);for(;o<i.parts.length;o++)s.parts.push(b(i.parts[o],t))}else{var u=[];for(var o=0;o<i.parts.length;o++)u.push(b(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:u}}}}function p(e,t){var n=[],r={};for(var i=0;i<e.length;i++){var s=e[i],o=t.base?s[0]+t.base:s[0],u=s[1],a=s[2],f=s[3],l={css:u,media:a,sourceMap:f};r[o]?r[o].parts.push(l):n.push(r[o]={id:o,parts:[l]})}return n}function d(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if(e.insertAt==="top")r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if(e.insertAt==="bottom")n.appendChild(t);else{if(typeof e.insertAt!="object"||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function v(e){if(e.parentNode===null)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),d(e,t),t}function g(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),d(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,r,i,s;if(t.transform&&e.css){s=t.transform(e.css);if(!s)return function(){};e.css=s}if(t.singleton){var o=f++;n=a||(a=m(t)),r=E.bind(null,n,o,!1),i=E.bind(null,n,o,!0)}else e.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n=g(t),r=x.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=S.bind(null,n),i=function(){v(n)});return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}function E(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var s=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function S(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function x(e,t,n){var r=n.css,i=n.sourceMap,s=t.convertToAbsoluteUrls===undefined&&i;if(t.convertToAbsoluteUrls||s)r=c(r);i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(o),u&&URL.revokeObjectURL(u)}var r={},i=function(e){var t;return function(){return typeof t=="undefined"&&(t=e.apply(this,arguments)),t}},s=i(function(){return window&&document&&document.all&&!window.atob}),o=function(e){return document.querySelector(e)},u=function(e){var t={};return function(e){if(typeof e=="function")return e();if(typeof t[e]=="undefined"){var n=o.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(r){n=null}t[e]=n}return t[e]}}(),a=null,f=0,l=[],c=n(154);e.exports=function(e,t){if(typeof DEBUG!="undefined"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs=typeof t.attrs=="object"?t.attrs:{},!t.singleton&&typeof t.singleton!="boolean"&&(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(i){var s=[];for(var o=0;o<n.length;o++){var u=n[o],a=r[u.id];a.refs--,s.push(a)}if(i){var f=p(i,t);h(f,t)}for(var o=0;o<s.length;o++){var a=s[o];if(a.refs===0){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete r[a.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=y(r),s=n(0),o=y(s),u=n(1),a=y(u),f=n(3),l=y(f),c=n(2),h=y(c),p=n(5),d=n(21),v=y(d),m=n(33),g=y(m),b=function(e){function t(n,r,i){(0,o.default)(this,t);var s=(0,a.default)(this,e.call(this,n));return s.settings={},s._i18n=r,s.playerError=i,s}return(0,h.default)(t,e),(0,l.default)(t,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}}]),t.prototype.consent=function(){},t.prototype.play=function(){},t.prototype.pause=function(){},t.prototype.stop=function(){},t.prototype.seek=function(t){},t.prototype.seekPercentage=function(t){},t.prototype.getStartTimeOffset=function(){return 0},t.prototype.getDuration=function(){return 0},t.prototype.isPlaying=function(){return!1},t.prototype.getPlaybackType=function(){return t.NO_OP},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype.volume=function(t){},t.prototype.destroy=function(){this.$el.remove()},(0,l.default)(t,[{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(t){}}]),t}(v.default);t.default=b,(0,i.default)(b.prototype,g.default),b.extend=function(e){return(0,p.extend)(b,e)},b.canPlay=function(e,t){return!1},b.VOD="vod",b.AOD="aod",b.LIVE="live",b.NO_OP="no_op",b.type="playback",e.exports=t["default"]},function(e,t){var n=e.exports={version:"2.4.0"};typeof __e=="number"&&(__e=n)},function(e,t,n){var r=n(49)("wks"),i=n(37),s=n(16).Symbol,o=typeof s=="function",u=e.exports=function(e){return r[e]||(r[e]=o&&s[e]||(o?s:i)("Symbol."+e))};u.store=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},i=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(t){return!1}},s=function(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!t}catch(n){return!!navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==undefined&&!!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}},o=t.getBrowserInfo=function(t){var n=t.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],r=void 0;if(/trident/i.test(n[1]))return r=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:parseInt(r[1]||"")};if(n[1]==="Chrome"){r=t.match(/\bOPR\/(\d+)/);if(r!=null)return{name:"Opera",version:parseInt(r[1])};r=t.match(/\bEdge\/(\d+)/);if(r!=null)return{name:"Edge",version:parseInt(r[1])}}else/android/i.test(t)&&(r=t.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,r[1]));return n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:n[0],version:parseInt(n[1])}},u=o(navigator.userAgent);r.isEdge=/edge/i.test(navigator.userAgent),r.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!r.isEdge,r.isSafari=/safari/i.test(navigator.userAgent)&&!r.isChrome&&!r.isEdge,r.isFirefox=/firefox/i.test(navigator.userAgent),r.isLegacyIE=!!window.ActiveXObject,r.isIE=r.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),r.isIE11=/trident.*rv:11/i.test(navigator.userAgent),r.isChromecast=r.isChrome&&/CrKey/i.test(navigator.userAgent),r.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),r.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),r.isAndroid=/Android/i.test(navigator.userAgent),r.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),r.isWin8App=/MSAppHost/i.test(navigator.userAgent),r.isWiiU=/WiiU/i.test(navigator.userAgent),r.isPS4=/PlayStation 4/i.test(navigator.userAgent),r.hasLocalstorage=i(),r.hasFlash=s(),r.name=u.name,r.version=u.version,t.default=r},function(e,t,n){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=d(r),s=n(1),o=d(s),u=n(3),a=d(u),f=n(2),l=d(f),c=n(5),h=n(4),p=d(h),v=function(e){function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r._options=n,r.uniqueId=(0,c.uniqueId)("o"),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"options",get:function(){return this._options}}]),t}(p.default);t.default=v,e.exports=t["default"]},function(e,t,n){var r=n(66),i=n(45);e.exports=function(e){return r(i(e))}},function(e,t){var n=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=n)},function(e,t,n){var r=n(16),i=n(11),s=n(51),o=n(25),u="prototype",a=function(e,t,n){var f=e&a.F,l=e&a.G,c=e&a.S,h=e&a.P,p=e&a.B,d=e&a.W,v=l?i:i[t]||(i[t]={}),m=v[u],g=l?r:c?r[t]:(r[t]||{})[u],y,b,w;l&&(n=t);for(y in n){b=!f&&g&&g[y]!==undefined;if(b&&y in v)continue;w=b?g[y]:n[y],v[y]=l&&typeof g[y]!="function"?n[y]:p&&b?s(w,r):d&&g[y]==w?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(w):h&&typeof w=="function"?s(Function.call,w):w,h&&((v.virtual||(v.virtual={}))[y]=w,e&a.R&&m&&!m[y]&&o(m,y,w))}};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var r=n(26),i=n(69),s=n(52),o=Object.defineProperty;t.f=n(20)?Object.defineProperty:function(t,n,u){r(t),n=s(n,!0),r(u);if(i)try{return o(t,n,u)}catch(a){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(t[n]=u.value),t}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(27)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t,n){"use strict";function m(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=m(r),s=n(1),o=m(s),u=n(3),a=m(u),f=n(2),l=m(f),c=n(6),h=m(c),p=n(5),d=n(14),v=m(d),g=/^(\S+)\s*(.*)$/,y=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.cid=(0,p.uniqueId)("c"),r._ensureElement(),r.delegateEvents(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),t.prototype.$=function(t){return this.$el.find(t)},t.prototype.render=function(){return this},t.prototype.remove=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},t.prototype.setElement=function(t,n){return this.$el&&this.undelegateEvents(),this.$el=h.default.zepto.isZ(t)?t:(0,h.default)(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},t.prototype.delegateEvents=function(t){if(!t&&!(t=this.events))return this;this.undelegateEvents();for(var n in t){var r=t[n];r&&r.constructor!==Function&&(r=this[t[n]]);if(!r)continue;var i=n.match(g),s=i[1],o=i[2];s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r.bind(this)):this.$el.on(s,o,r.bind(this))}return this},t.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},t.prototype._ensureElement=function(){if(!this.el){var t=h.default.extend({},this.attributes);this.id&&(t.id=this.id),this.className&&(t["class"]=this.className);var n=p.DomRecycler.create(this.tagName).attr(t);this.setElement(n,!1)}else this.setElement(this.el,!1)},t}(v.default);t.default=y,e.exports=t["default"]},function(e,t,n){e.exports={"default":n(149),__esModule:!0}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){var r=n(65),i=n(50);e.exports=Object.keys||function(t){return r(t,i)}},function(e,t,n){var r=n(18),i=n(30);e.exports=n(20)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(29);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=u(r),s=n(4),o=u(s),a=new o.default,f=function l(){(0,i.default)(this,l)};t.default=f,f.on=function(e,t,n){a.on(e,t,n);return},f.once=function(e,t,n){a.once(e,t,n);return},f.off=function(e,t,n){a.off(e,t,n);return},f.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.trigger.apply(a,[e].concat(n));return},f.stopListening=function(e,t,n){a.stopListening(e,t,n);return},e.exports=t["default"]},function(e,t){e.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t){e.exports={}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(141),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function f(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=f(r),s=n(32),o=f(s),u=n(23),a=f(u),l={createError:function(t){var n=this.constructor&&this.constructor.type||"",r=this.name||n,s=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,u={description:"",level:a.default.Levels.FATAL,origin:r,scope:n,raw:{}},f=(0,i.default)({},u,t,{code:r+":"+(t&&t.code||"unknown")});if(s&&f.level==a.default.Levels.FATAL&&!f.UI){var l={title:s.t("default_error_title"),message:s.t("default_error_message")};f.UI=l}return this.playerError?this.playerError.error(f):o.default.warn(r,"PlayerError is not defined. Error: ",f),f}};t.default=l,e.exports=t["default"]},function(e,t,n){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=y(r),s=n(0),o=y(s),u=n(1),a=y(u),f=n(3),l=y(f),c=n(2),h=y(c),p=n(5),d=n(21),v=y(d),m=n(33),g=y(m),b=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n.options));return r.core=n,r.enabled=!0,r.bindEvents(),r.render(),r}return(0,h.default)(t,e),(0,l.default)(t,[{key:"playerError",get:function(){return this.core.playerError}}]),t.prototype.bindEvents=function(){},t.prototype.getExternalInterface=function(){return{}},t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},t.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},t.prototype.destroy=function(){this.remove()},t.prototype.render=function(){return this},t}(v.default);t.default=b,(0,i.default)(b.prototype,g.default),b.extend=function(e){return(0,p.extend)(b,e)},b.type="core",e.exports=t["default"]},function(e,t,n){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=y(r),s=n(0),o=y(s),u=n(1),a=y(u),f=n(3),l=y(f),c=n(2),h=y(c),p=n(5),d=n(14),v=y(d),m=n(33),g=y(m),b=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n.options));return r.core=n,r.enabled=!0,r.bindEvents(),r}return(0,h.default)(t,e),(0,l.default)(t,[{key:"playerError",get:function(){return this.core.playerError}}]),t.prototype.bindEvents=function(){},t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},t.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},t.prototype.getExternalInterface=function(){return{}},t.prototype.destroy=function(){this.stopListening()},t}(v.default);t.default=b,(0,i.default)(b.prototype,g.default),b.extend=function(e){return(0,p.extend)(b,e)},b.type="core",e.exports=t["default"]},function(e,t,n){var r=n(45);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(107),i=a(r),s=n(118),o=a(s),u=typeof o.default=="function"&&typeof i.default=="symbol"?function(e){return typeof e}:function(e){return e&&typeof o.default=="function"&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};t.default=typeof o.default=="function"&&u(i.default)==="symbol"?function(e){return typeof e=="undefined"?"undefined":u(e)}:function(e){return e&&typeof o.default=="function"&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e=="undefined"?"undefined":u(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=s(r),o=function u(){(0,i.default)(this,u),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};o._players={},o.getInstance=function(e){return o._players[e]||(o._players[e]=new o)},t.default=o,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(179),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=y(r),s=n(0),o=y(s),u=n(1),a=y(u),f=n(3),l=y(f),c=n(2),h=y(c),p=n(5),d=n(21),v=y(d),m=n(33),g=y(m),b=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n.options));return r.container=n,r.enabled=!0,r.bindEvents(),r}return(0,h.default)(t,e),(0,l.default)(t,[{key:"playerError",get:function(){return this.container.playerError}}]),t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},t.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},t.prototype.bindEvents=function(){},t.prototype.destroy=function(){this.remove()},t}(v.default);t.default=b,(0,i.default)(b.prototype,g.default),b.extend=function(e){return(0,p.extend)(b,e)},b.type="container",e.exports=t["default"]},function(e,t,n){"use strict";function y(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=y(r),s=n(0),o=y(s),u=n(1),a=y(u),f=n(3),l=y(f),c=n(2),h=y(c),p=n(14),d=y(p),v=n(5),m=n(33),g=y(m),b=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n.options));return r.container=n,r.enabled=!0,r.bindEvents(),r}return(0,h.default)(t,e),(0,l.default)(t,[{key:"playerError",get:function(){return this.container.playerError}}]),t.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},t.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},t.prototype.bindEvents=function(){},t.prototype.destroy=function(){this.stopListening()},t}(d.default);t.default=b,(0,i.default)(b.prototype,g.default),b.extend=function(e){return(0,v.extend)(b,e)},b.type="container",e.exports=t["default"]},function(e,t,n){e.exports={"default":n(102),__esModule:!0}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(49)("keys"),i=n(37);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(16),i="__core-js_shared__",s=r[i]||(r[i]={});e.exports=function(e){return s[e]||(s[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(106);e.exports=function(e,t,n){r(e);if(t===undefined)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(29);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&typeof (n=e.toString)=="function"&&!r(i=n.call(e)))return i;if(typeof (n=e.valueOf)=="function"&&!r(i=n.call(e)))return i;if(!t&&typeof (n=e.toString)=="function"&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!0},function(e,t,n){var r=n(26),i=n(111),s=n(50),o=n(48)("IE_PROTO"),u=function(){},a="prototype",f=function(){var e=n(70)("iframe"),t=s.length,r="<",i=">",o;e.style.display="none",n(112).appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+i+"document.F=Object"+r+"/script"+i),o.close(),f=o.F;while(t--)delete f[a][s[t]];return f()};e.exports=Object.create||function(t,n){var s;return t!==null?(u[a]=r(t),s=new u,u[a]=null,s[o]=t):s=f(),n===undefined?s:i(s,n)}},function(e,t,n){var r=n(18).f,i=n(19),s=n(12)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},function(e,t,n){t.f=n(12)},function(e,t,n){var r=n(16),i=n(11),s=n(53),o=n(56),u=n(18).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=s?{}:r.Symbol||{});e.charAt(0)!="_"&&!(e in t)&&u(t,e,{value:o.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(39),i=n(30),s=n(15),o=n(52),u=n(19),a=n(69),f=Object.getOwnPropertyDescriptor;t.f=n(20)?f:function(t,n){t=s(t),n=o(n,!0);if(a)try{return f(t,n)}catch(l){}if(u(t,n))return i(!r.f.call(t,n),t[n])}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(142),i=s(r);t.default={Kibo:i.default},e.exports=t["default"]},function(e,t){function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function a(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}function p(){if(!l||!c)return;l=!1,c.length?f=c.concat(f):h=-1,f.length&&d()}function d(){if(l)return;var e=u(p);l=!0;var t=f.length;while(t){c=f,f=[];while(++h<t)c&&c[h].run();h=-1,t=f.length}c=null,l=!1,a(e)}function v(e,t){this.fun=e,this.array=t}function m(){}var n=e.exports={},r,i;(function(){try{typeof setTimeout=="function"?r=setTimeout:r=s}catch(e){r=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch(e){i=o}})();var f=[],l=!1,c,h=-1;n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new v(e,t)),f.length===1&&!l&&u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(87),i=s(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=n(184),e.exports=t["default"]},function(e,t,n){var r=n(19),i=n(15),s=n(104)(!1),o=n(48)("IE_PROTO");e.exports=function(e,t){var n=i(e),u=0,a=[],f;for(f in n)f!=o&&r(n,f)&&a.push(f);while(t.length>u)r(n,f=t[u++])&&(~s(a,f)||a.push(f));return a}},function(e,t,n){var r=n(46);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return r(e)=="String"?e.split(""):Object(e)}},function(e,t,n){var r=n(47),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(17),i=n(11),s=n(27);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*s(function(){n(1)}),"Object",o)}},function(e,t,n){e.exports=!n(20)&&!n(27)(function(){return Object.defineProperty(n(70)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,n){var r=n(29),i=n(16).document,s=r(i)&&r(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,t,n){"use strict";var r=n(109)(!0);n(72)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,n;return t>=e.length?{value:undefined,done:!0}:(n=r(e,t),this._i+=n.length,{value:n,done:!1})})},function(e,t,n){"use strict";var r=n(53),i=n(17),s=n(73),o=n(25),u=n(19),a=n(31),f=n(110),l=n(55),c=n(113),h=n(12)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",m="values",g=function(){return this};e.exports=function(e,t,n,y,b,w,E){f(n,t,y);var S=function(e){if(!p&&e in C)return C[e];switch(e){case v:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",T=b==m,N=!1,C=e.prototype,k=C[h]||C[d]||b&&C[b],L=k||S(b),A=b?T?S("entries"):L:undefined,O=t=="Array"?C.entries||k:k,M,_,D;O&&(D=c(O.call(new e)),D!==Object.prototype&&(l(D,x,!0),!r&&!u(D,h)&&o(D,h,g))),T&&k&&k.name!==m&&(N=!0,L=function(){return k.call(this)}),(!r||E)&&(p||N||!C[h])&&o(C,h,L),a[t]=L,a[x]=g;if(b){M={values:T?L:S(m),keys:w?L:S(v),entries:A};if(E)for(_ in M)_ in C||s(C,_,M[_]);else i(i.P+i.F*(p||N),t,M)}return M}},function(e,t,n){e.exports=n(25)},function(e,t,n){var r=n(65),i=n(50).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(e,t,n){e.exports={"default":n(129),__esModule:!0}},function(e,t,n){e.exports={"default":n(135),__esModule:!0}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(145),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(148),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(155),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){e.exports={"default":n(156),__esModule:!0}},function(e,t,n){"use strict";function g(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=g(r),s=n(1),o=g(s),u=n(3),a=g(u),f=n(2),l=g(f),c=n(4),h=g(c),p=n(14),d=g(p),v=n(32),m=g(v),y=function(e){function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=arguments[1];(0,i.default)(this,t);var s=(0,o.default)(this,e.call(this,n));return s.core=r,s}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),t.prototype.error=function(t){if(!this.core){m.default.warn(this.name,"Core is not set. Error: ",t);return}this.core.trigger(h.default.ERROR,t)},t}(d.default);t.default=y,e.exports=t["default"]},function(e,t){e.exports=function(t){return typeof t!="string"?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(e,t){e.exports="<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=u(r),s=n(8),o=u(s),a={getStyleFor:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{baseUrl:""};return(0,i.default)('<style class="clappr-style"></style>').html((0,o.default)(t.toString())(n))}};t.default=a,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(170),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){e.exports={"default":n(171),__esModule:!0}},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(183),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(189),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(190),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(193),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(195),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(198),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(202),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(208),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(212),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(229),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function xt(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(101),i=xt(r),s=n(5),o=xt(s),u=n(4),a=xt(u),f=n(10),l=xt(f),c=n(43),h=xt(c),p=n(35),d=xt(p),v=n(34),m=xt(v),g=n(42),y=xt(g),b=n(14),w=xt(b),E=n(21),S=xt(E),x=n(13),T=xt(x),N=n(78),C=xt(N),k=n(77),L=xt(k),A=n(23),O=xt(A),M=n(86),_=xt(M),D=n(28),P=xt(D),H=n(79),B=xt(H),j=n(40),F=xt(j),I=n(64),q=xt(I),R=n(88),U=xt(R),z=n(90),W=xt(z),X=n(91),V=xt(X),$=n(89),J=xt($),K=n(41),Q=xt(K),G=n(92),Y=xt(G),Z=n(93),et=xt(Z),tt=n(97),nt=xt(tt),rt=n(98),it=xt(rt),st=n(99),ot=xt(st),ut=n(32),at=xt(ut),ft=n(96),lt=xt(ft),ct=n(94),ht=xt(ct),pt=n(95),dt=xt(pt),vt=n(85),mt=xt(vt),gt=n(60),yt=xt(gt),bt=n(8),wt=xt(bt),Et=n(6),St=xt(Et),Tt="0.2.91";t.default={Player:i.default,Mediator:P.default,Events:a.default,Browser:T.default,PlayerInfo:F.default,MediaControl:B.default,ContainerPlugin:h.default,UIContainerPlugin:y.default,CorePlugin:d.default,UICorePlugin:m.default,Playback:l.default,Container:C.default,Core:L.default,PlayerError:O.default,Loader:_.default,BaseObject:w.default,UIObject:S.default,Utils:o.default,BaseFlashPlayback:q.default,Flash:U.default,FlasHLS:W.default,HLS:V.default,HTML5Audio:J.default,HTML5Video:Q.default,HTMLImg:Y.default,NoOp:et.default,ClickToPausePlugin:nt.default,DVRControls:it.default,Favicon:ot.default,Log:at.default,Poster:lt.default,SpinnerThreeBouncePlugin:ht.default,WaterMarkPlugin:dt.default,Styler:mt.default,Vendor:yt.default,version:Tt,template:wt.default,$:St.default},e.exports=t["default"]},function(e,t,n){"use strict";function L(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=L(r),s=n(0),o=L(s),u=n(1),a=L(u),f=n(3),l=L(f),c=n(2),h=L(c),p=n(5),d=n(14),v=L(d),m=n(4),g=L(m),y=n(13),b=L(y),w=n(143),E=L(w),S=n(86),x=L(S),T=n(40),N=L(T),C=n(6),k=L(C),A=(0,p.currentScriptUrl)().replace(/\/[^/]+$/,""),O=function(e){function t(n){(0,o.default)(this,t);var r=(0,a.default)(this,e.call(this,n)),i={playerId:(0,p.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:A,allowUserInteraction:b.default.isMobile};return r._options=k.default.extend(i,n),r.options.sources=r._normalizeSources(n),r.options.chromeless||(r.options.allowUserInteraction=!0),r.options.allowUserInteraction||(r.options.disableKeyboardShortcuts=!0),r._registerOptionEventListeners(r.options.events),r._coreFactory=new E.default(r),r.playerInfo=N.default.getInstance(r.options.playerId),r.playerInfo.currentSize={width:n.width,height:n.height},r.playerInfo.options=r.options,r.options.parentId?r.setParentId(r.options.parentId):r.options.parent&&r.attachTo(r.options.parent),r}return(0,h.default)(t,e),(0,l.default)(t,[{key:"loader",set:function(t){this._loader=t},get:function(){return this._loader||(this._loader=new x.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.mediaControl.container.ended}},{key:"buffering",get:function(){return this.core.mediaControl.container.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:g.default.PLAYER_READY,onResize:g.default.PLAYER_RESIZE,onPlay:g.default.PLAYER_PLAY,onPause:g.default.PLAYER_PAUSE,onStop:g.default.PLAYER_STOP,onEnded:g.default.PLAYER_ENDED,onSeek:g.default.PLAYER_SEEK,onError:g.default.PLAYER_ERROR,onTimeUpdate:g.default.PLAYER_TIMEUPDATE,onVolumeUpdate:g.default.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:g.default.PLAYER_SUBTITLE_AVAILABLE}}}]),t.prototype.setParentId=function(t){var n=document.querySelector(t);return n&&this.attachTo(n),this},t.prototype.attachTo=function(t){return this.options.parentElement=t,this.core=this._coreFactory.create(),this._addEventListeners(),this},t.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,g.default.CORE_READY,this._onReady),this.listenTo(this.core.mediaControl,g.default.MEDIACONTROL_CONTAINERCHANGED,this._containerChanged),this.listenTo(this.core,g.default.CORE_FULLSCREEN,this._onFullscreenChange),this},t.prototype._addContainerEventListeners=function(){var t=this.core.mediaControl.container;return t&&(this.listenTo(t,g.default.CONTAINER_PLAY,this._onPlay),this.listenTo(t,g.default.CONTAINER_PAUSE,this._onPause),this.listenTo(t,g.default.CONTAINER_STOP,this._onStop),this.listenTo(t,g.default.CONTAINER_ENDED,this._onEnded),this.listenTo(t,g.default.CONTAINER_SEEK,this._onSeek),this.listenTo(t,g.default.CONTAINER_ERROR,this._onError),this.listenTo(t,g.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(t,g.default.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(t,g.default.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this},t.prototype._registerOptionEventListeners=function(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return(0,i.default)(r).forEach(function(e){var n=t.eventsMapping[e];n&&t.off(n)}),(0,i.default)(n).forEach(function(e){var r=t.eventsMapping[e];if(r){var i=n[e];i=typeof i=="function"&&i,i&&t.on(r,i)}}),this},t.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},t.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(g.default.PLAYER_READY)},t.prototype._onFullscreenChange=function(t){this.trigger(g.default.PLAYER_FULLSCREEN,t)},t.prototype._onVolumeUpdate=function(t){this.trigger(g.default.PLAYER_VOLUMEUPDATE,t)},t.prototype._onSubtitleAvailable=function(){this.trigger(g.default.PLAYER_SUBTITLE_AVAILABLE)},t.prototype._onPlay=function(){this.trigger(g.default.PLAYER_PLAY)},t.prototype._onPause=function(){this.trigger(g.default.PLAYER_PAUSE)},t.prototype._onStop=function(){this.trigger(g.default.PLAYER_STOP,this.getCurrentTime())},t.prototype._onEnded=function(){this.trigger(g.default.PLAYER_ENDED)},t.prototype._onSeek=function(t){this.trigger(g.default.PLAYER_SEEK,t)},t.prototype._onTimeUpdate=function(t){this.trigger(g.default.PLAYER_TIMEUPDATE,t)},t.prototype._onError=function(t){this.trigger(g.default.PLAYER_ERROR,t)},t.prototype._normalizeSources=function(t){var n=t.sources||(t.source!==undefined?[t.source]:[]);return n.length===0?[{source:"",mimeType:""}]:n},t.prototype.resize=function(t){return this.core.resize(t),this},t.prototype.load=function(t,n,r){return r!==undefined&&this.configure({autoPlay:!!r}),this.core.load(t,n),this},t.prototype.destroy=function(){return this.stopListening(),this.core.destroy(),this},t.prototype.consent=function(){return this.core.getCurrentPlayback().consent(),this},t.prototype.play=function(){return this.core.mediaControl.container.play(),this},t.prototype.pause=function(){return this.core.mediaControl.container.pause(),this},t.prototype.stop=function(){return this.core.mediaControl.container.stop(),this},t.prototype.seek=function(t){return this.core.mediaControl.container.seek(t),this},t.prototype.seekPercentage=function(t){return this.core.mediaControl.container.seekPercentage(t),this},t.prototype.setVolume=function(t){return this.core&&this.core.mediaControl&&this.core.mediaControl.setVolume(t),this},t.prototype.getVolume=function(){return this.core&&this.core.mediaControl?this.core.mediaControl.volume:0},t.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},t.prototype.unmute=function(){return this.setVolume(typeof this._mutedVolume=="number"?this._mutedVolume:100),this._mutedVolume=null,this},t.prototype.isPlaying=function(){return this.core.mediaControl.container.isPlaying()},t.prototype.isDvrEnabled=function(){return this.core.mediaControl.container.isDvrEnabled()},t.prototype.isDvrInUse=function(){return this.core.mediaControl.container.isDvrInUse()},t.prototype.configure=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return this._registerOptionEventListeners(t.events,this.options.events),this.core.configure(t),this},t.prototype.getPlugin=function(t){var n=this.core.plugins.concat(this.core.mediaControl.container.plugins);return n.filter(function(e){return e.name===t})[0]},t.prototype.getCurrentTime=function(){return this.core.mediaControl.container.getCurrentTime()},t.prototype.getStartTimeOffset=function(){return this.core.mediaControl.container.getStartTimeOffset()},t.prototype.getDuration=function(){return this.core.mediaControl.container.getDuration()},t}(v.default);t.default=O,e.exports=t["default"]},function(e,t,n){n(103),e.exports=n(11).Object.keys},function(e,t,n){var r=n(36),i=n(24);n(68)("keys",function(){return function(t){return i(r(t))}})},function(e,t,n){var r=n(15),i=n(67),s=n(105);e.exports=function(e){return function(t,n,o){var u=r(t),a=i(u.length),f=s(o,a),l;if(e&&n!=n)while(a>f){l=u[f++];if(l!=l)return!0}else for(;a>f;f++)if(e||f in u)if(u[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(47),i=Math.max,s=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):s(e,t)}},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={"default":n(108),__esModule:!0}},function(e,t,n){n(71),n(114),e.exports=n(56).f("iterator")},function(e,t,n){var r=n(47),i=n(45);e.exports=function(e){return function(t,n){var s=String(i(t)),o=r(n),u=s.length,a,f;return o<0||o>=u?e?"":undefined:(a=s.charCodeAt(o),a<55296||a>56319||o+1===u||(f=s.charCodeAt(o+1))<56320||f>57343?e?s.charAt(o):a:e?s.slice(o,o+2):(a-55296<<10)+(f-56320)+65536)}}},function(e,t,n){"use strict";var r=n(54),i=n(30),s=n(55),o={};n(25)(o,n(12)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),s(e,t+" Iterator")}},function(e,t,n){var r=n(18),i=n(26),s=n(24);e.exports=n(20)?Object.defineProperties:function(t,n){i(t);var o=s(n),u=o.length,a=0,f;while(u>a)r.f(t,f=o[a++],n[f]);return t}},function(e,t,n){e.exports=n(16).document&&document.documentElement},function(e,t,n){var r=n(19),i=n(36),s=n(48)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,s)?e[s]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){n(115);var r=n(16),i=n(25),s=n(31),o=n(12)("toStringTag");for(var u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],a=0;a<5;a++){var f=u[a],l=r[f],c=l&&l.prototype;c&&!c[o]&&i(c,o,f),s[f]=s.Array}},function(e,t,n){"use strict";var r=n(116),i=n(117),s=n(31),o=n(15);e.exports=n(72)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=undefined,i(1)):t=="keys"?i(0,n):t=="values"?i(0,e[n]):i(0,[n,e[n]])},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={"default":n(119),__esModule:!0}},function(e,t,n){n(120),n(126),n(127),n(128),e.exports=n(11).Symbol},function(e,t,n){"use strict";var r=n(16),i=n(19),s=n(20),o=n(17),u=n(73),a=n(121).KEY,f=n(27),l=n(49),c=n(55),h=n(37),p=n(12),d=n(56),v=n(57),m=n(122),g=n(123),y=n(124),b=n(26),w=n(15),E=n(52),S=n(30),x=n(54),T=n(125),N=n(59),C=n(18),k=n(24),L=N.f,A=C.f,O=T.f,M=r.Symbol,_=r.JSON,D=_&&_.stringify,P="prototype",H=p("_hidden"),B=p("toPrimitive"),j={}.propertyIsEnumerable,F=l("symbol-registry"),I=l("symbols"),q=l("op-symbols"),R=Object[P],U=typeof M=="function",z=r.QObject,W=!z||!z[P]||!z[P].findChild,X=s&&f(function(){return x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a!=7})?function(e,t,n){var r=L(R,t);r&&delete R[t],A(e,t,n),r&&e!==R&&A(R,t,r)}:A,V=function(e){var t=I[e]=x(M[P]);return t._k=e,t},$=U&&typeof M.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof M},J=function(t,n,r){return t===R&&J(q,n,r),b(t),n=E(n,!0),b(r),i(I,n)?(r.enumerable?(i(t,H)&&t[H][n]&&(t[H][n]=!1),r=x(r,{enumerable:S(0,!1)})):(i(t,H)||A(t,H,S(1,{})),t[H][n]=!0),X(t,n,r)):A(t,n,r)},K=function(t,n){b(t);var r=g(n=w(n)),i=0,s=r.length,o;while(s>i)J(t,o=r[i++],n[o]);return t},Q=function(t,n){return n===undefined?x(t):K(x(t),n)},G=function rt(e){var t=j.call(this,e=E(e,!0));return this===R&&i(I,e)&&!i(q,e)?!1:t||!i(this,e)||!i(I,e)||i(this,H)&&this[H][e]?t:!0},Y=function(t,n){t=w(t),n=E(n,!0);if(t===R&&i(I,n)&&!i(q,n))return;var r=L(t,n);return r&&i(I,n)&&(!i(t,H)||!t[H][n])&&(r.enumerable=!0),r},Z=function(t){var n=O(w(t)),r=[],s=0,o;while(n.length>s)!i(I,o=n[s++])&&o!=H&&o!=a&&r.push(o);return r},et=function(t){var n=t===R,r=O(n?q:w(t)),s=[],o=0,u;while(r.length>o)i(I,u=r[o++])&&(n?i(R,u):!0)&&s.push(I[u]);return s};U||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:undefined),n=function(e){this===R&&n.call(q,e),i(this,H)&&i(this[H],t)&&(this[H][t]=!1),X(this,t,S(1,e))};return s&&W&&X(R,t,{configurable:!0,set:n}),V(t)},u(M[P],"toString",function it(){return this._k}),N.f=Y,C.f=J,n(74).f=T.f=Z,n(39).f=G,n(58).f=et,s&&!n(53)&&u(R,"propertyIsEnumerable",G,!0),d.f=function(e){return V(p(e))}),o(o.G+o.W+o.F*!U,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)p(tt[nt++]);for(var tt=k(p.store),nt=0;tt.length>nt;)v(tt[nt++]);o(o.S+o.F*!U,"Symbol",{"for":function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(t){if($(t))return m(F,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!U,"Object",{create:Q,defineProperty:J,defineProperties:K,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:et}),_&&o(o.S+o.F*(!U||f(function(){var e=M();return D([e])!="[null]"||D({a:e})!="{}"||D(Object(e))!="{}"})),"JSON",{stringify:function(t){if(t===undefined||$(t))return;var n=[t],r=1,i,s;while(arguments.length>r)n.push(arguments[r++]);i=n[1],typeof i=="function"&&(s=i);if(s||!y(i))i=function(e,t){s&&(t=s.call(this,e,t));if(!$(t))return t};return n[1]=i,D.apply(_,n)}}),M[P][B]||n(25)(M[P],B,M[P].valueOf),c(M,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},function(e,t,n){var r=n(37)("meta"),i=n(29),s=n(19),o=n(18).f,u=0,a=Object.isExtensible||function(){return!0},f=!n(27)(function(){return a(Object.preventExtensions({}))}),l=function(e){o(e,r,{value:{i:"O"+ ++u,w:{}}})},c=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!s(e,r)){if(!a(e))return"F";if(!t)return"E";l(e)}return e[r].i},h=function(e,t){if(!s(e,r)){if(!a(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return f&&d.NEED&&a(e)&&!s(e,r)&&l(e),e},d=e.exports={KEY:r,NEED:!1,fastKey:c,getWeak:h,onFreeze:p}},function(e,t,n){var r=n(24),i=n(15);e.exports=function(e,t){var n=i(e),s=r(n),o=s.length,u=0,a;while(o>u)if(n[a=s[u++]]===t)return a}},function(e,t,n){var r=n(24),i=n(58),s=n(39);e.exports=function(e){var t=r(e),n=i.f;if(n){var o=n(e),u=s.f,a=0,f;while(o.length>a)u.call(e,f=o[a++])&&t.push(f)}return t}},function(e,t,n){var r=n(46);e.exports=Array.isArray||function(t){return r(t)=="Array"}},function(e,t,n){var r=n(15),i=n(74).f,s={}.toString,o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(t){return o&&s.call(t)=="[object Window]"?u(t):i(r(t))}},function(e,t){},function(e,t,n){n(57)("asyncIterator")},function(e,t,n){n(57)("observable")},function(e,t,n){n(130);var r=n(11).Object;e.exports=function(t,n,i){return r.defineProperty(t,n,i)}},function(e,t,n){var r=n(17);r(r.S+r.F*!n(20),"Object",{defineProperty:n(18).f})},function(e,t,n){e.exports={"default":n(132),__esModule:!0}},function(e,t,n){n(133),e.exports=n(11).Object.setPrototypeOf},function(e,t,n){var r=n(17);r(r.S,"Object",{setPrototypeOf:n(134).set})},function(e,t,n){var r=n(29),i=n(26),s=function(e,t){i(e);if(!r(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(51)(Function.call,n(59).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(n,i){return s(n,i),t?n.__proto__=i:r(n,i),n}}({},!1):undefined),check:s}},function(e,t,n){n(136);var r=n(11).Object;e.exports=function(t,n){return r.create(t,n)}},function(e,t,n){var r=n(17);r(r.S,"Object",{create:n(54)})},function(e,t,n){e.exports={"default":n(138),__esModule:!0}},function(e,t,n){n(139);var r=n(11).Object;e.exports=function(t,n){return r.getOwnPropertyDescriptor(t,n)}},function(e,t,n){var r=n(15),i=n(59).f;n(68)("getOwnPropertyDescriptor",function(){return function(t,n){return i(r(t),n)}})},function(e,t,n){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(this==null)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(typeof t!="function")throw new TypeError("predicate must be a function");var i=arguments[1],s=0;while(s<r){var o=n[s];if(t.call(i,o,s,n))return o;s++}return undefined}})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=o(r),s=n(60),u="font-weight: bold; font-size: 13px;",a="color: #006600;"+u,f="color: #0000ff;"+u,l="color: #ff8000;"+u,c="color: #ff0000;"+u,h=0,p=1,d=2,v=3,m=v,g=[f,a,l,c,c],y=["debug","info","warn","error","disabled"],b=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:p,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:m;(0,i.default)(this,e),this.kibo=new s.Kibo,this.kibo.down(["ctrl shift d"],function(){return t.onOff()}),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=n,this.offLevel=r}return e.prototype.debug=function(t){this.log(t,h,Array.prototype.slice.call(arguments,1))},e.prototype.info=function(t){this.log(t,p,Array.prototype.slice.call(arguments,1))},e.prototype.warn=function(t){this.log(t,d,Array.prototype.slice.call(arguments,1))},e.prototype.error=function(t){this.log(t,v,Array.prototype.slice.call(arguments,1))},e.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+y[this.level],l)},e.prototype.level=function(t){this.level=t},e.prototype.log=function(t,n,r){if(this.BLACKLIST.indexOf(r[0])>=0)return;if(n<this.level)return;r||(r=t,t=null);var i=g[n],s="";t&&(s="["+t+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+y[n]+"]"+s,i].concat(r))},e}();t.default=b,b.LEVEL_DEBUG=h,b.LEVEL_INFO=p,b.LEVEL_WARN=d,b.LEVEL_ERROR=v,b.getInstance=function(){return this._instance===undefined&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},b.setLevel=function(e){this.getInstance().level=e},b.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},b.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},b.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},b.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(t){this.element=t||window.document,this.initialize()};r.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},r.KEY_CODES_BY_NAME={},function(){for(var e in r.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(r.KEY_NAMES_BY_CODE,e)&&(r.KEY_CODES_BY_NAME[r.KEY_NAMES_BY_CODE[e]]=+e)}(),r.MODIFIERS=["shift","ctrl","alt"],r.registerEvent=function(){if(document.addEventListener)return function(e,t,n){e.addEventListener(t,n,!1)};if(document.attachEvent)return function(e,t,n){e.attachEvent("on"+t,n)}}(),r.unregisterEvent=function(){if(document.removeEventListener)return function(e,t,n){e.removeEventListener(t,n,!1)};if(document.detachEvent)return function(e,t,n){e.detachEvent("on"+t,n)}}(),r.stringContains=function(e,t){return e.indexOf(t)!==-1},r.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},r.capitalize=function(e){return e.toLowerCase().replace(/^./,function(e){return e.toUpperCase()})},r.isString=function(e){return r.stringContains(Object.prototype.toString.call(e),"String")},r.arrayIncludes=function(){return Array.prototype.indexOf?function(e,t){return e.indexOf(t)!==-1}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}}(),r.extractModifiers=function(e){var t,n;t=[];for(n=0;n<r.MODIFIERS.length;n++)r.stringContains(e,r.MODIFIERS[n])&&t.push(r.MODIFIERS[n]);return t},r.extractKey=function(e){var t,n;t=r.neatString(e).split(" ");for(n=0;n<t.length;n++)if(!r.arrayIncludes(r.MODIFIERS,t[n]))return t[n]},r.modifiersAndKey=function(e){var t,n;return r.stringContains(e,"any")?r.neatString(e).split(" ").slice(0,2).join(" "):(t=r.extractModifiers(e),n=r.extractKey(e),n&&!r.arrayIncludes(r.MODIFIERS,n)&&t.push(n),t.join(" "))},r.keyName=function(e){return r.KEY_NAMES_BY_CODE[e+""]},r.keyCode=function(e){return+r.KEY_CODES_BY_NAME[e]},r.prototype.initialize=function(){var e,t=this;this.lastKeyCode=-1,this.lastModifiers={};for(e=0;e<r.MODIFIERS.length;e++)this.lastModifiers[r.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),r.registerEvent(this.element,"keydown",this.downHandler),r.registerEvent(this.element,"keyup",this.upHandler),r.registerEvent(window,"unload",function n(){r.unregisterEvent(t.element,"keydown",t.downHandler),r.unregisterEvent(t.element,"keyup",t.upHandler),r.unregisterEvent(window,"unload",n)})},r.prototype.handler=function(e){var t=this;return function(n){var i,s,o;n=n||window.event,t.lastKeyCode=n.keyCode;for(i=0;i<r.MODIFIERS.length;i++)t.lastModifiers[r.MODIFIERS[i]]=n[r.MODIFIERS[i]+"Key"];r.arrayIncludes(r.MODIFIERS,r.keyName(t.lastKeyCode))&&(t.lastModifiers[r.keyName(t.lastKeyCode)]=!0),s=t["keys"+r.capitalize(e)];for(i=0;i<s.any.length;i++)s.any[i](n)===!1&&n.preventDefault&&n.preventDefault();o=t.lastModifiersAndKey();if(s[o])for(i=0;i<s[o].length;i++)s[o][i](n)===!1&&n.preventDefault&&n.preventDefault()}},r.prototype.registerKeys=function(e,t,n){var i,s,o=this["keys"+r.capitalize(e)];r.isString(t)&&(t=[t]);for(i=0;i<t.length;i++)s=t[i],s=r.modifiersAndKey(s+""),o[s]?o[s].push(n):o[s]=[n];return this},r.prototype.unregisterKeys=function(e,t,n){var i,s,o,u=this["keys"+r.capitalize(e)];r.isString(t)&&(t=[t]);for(i=0;i<t.length;i++){o=t[i],o=r.modifiersAndKey(o+"");if(n===null)delete u[o];else if(u[o])for(s=0;s<u[o].length;s++)if(String(u[o][s])===String(n)){u[o].splice(s,1);break}}return this},r.prototype.off=function(e){return this.unregisterKeys("down",e,null)},r.prototype.delegate=function(e,t,n){return n!==null||n!==undefined?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},r.prototype.down=function(e,t){return this.delegate("down",e,t)},r.prototype.up=function(e,t){return this.delegate("up",e,t)},r.prototype.lastKey=function(e){return e?this.lastModifiers[e]:r.keyName(this.lastKeyCode)},r.prototype.lastModifiersAndKey=function(){var e,t;e=[];for(t=0;t<r.MODIFIERS.length;t++)this.lastKey(r.MODIFIERS[t])&&e.push(r.MODIFIERS[t]);return r.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")},t.default=r,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(144),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=v(r),s=n(1),o=v(s),u=n(3),a=v(u),f=n(2),l=v(f),c=n(14),h=v(c),p=n(77),d=v(p),m=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this));return r.player=n,r._options=n.options,r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"loader",get:function(){return this.player.loader}}]),t.prototype.create=function(){return this.options.loader=this.loader,this.core=new d.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},t.prototype.addCorePlugins=function(){var t=this;return this.loader.corePlugins.forEach(function(e){var n=new e(t.core);t.core.addPlugin(n),t.setupExternalInterface(n)}),this.core},t.prototype.setupExternalInterface=function(t){var n=t.getExternalInterface();for(var r in n)this.player[r]=n[r].bind(t)},t}(h.default);t.default=m,e.exports=t["default"]},function(e,t,n){"use strict";function P(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=P(r),s=n(1),o=P(s),u=n(3),a=P(u),f=n(2),l=P(f),c=n(5),h=n(4),p=P(h),d=n(21),v=P(d),m=n(13),g=P(m),y=n(146),b=P(y),w=n(79),E=P(w),S=n(28),x=P(S),T=n(40),N=P(T),C=n(23),k=P(C),L=n(85),A=P(L),O=n(6),M=P(O);n(166);var _=n(168),D=P(_),H=void 0,B=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.playerError=new k.default(n,r),r.configureDomRecycler(),r.playerInfo=N.default.getInstance(n.playerId),r.firstResize=!0,r.plugins=[],r.containers=[],r.setupMediaControl(null),r._boundFullscreenHandler=function(){return r.handleFullscreenChange()},(0,M.default)(document).bind("fullscreenchange",r._boundFullscreenHandler),(0,M.default)(document).bind("MSFullscreenChange",r._boundFullscreenHandler),(0,M.default)(document).bind("mozfullscreenchange",r._boundFullscreenHandler),g.default.isMobile&&(0,M.default)(window).bind("resize",function(e){r.handleWindowResize(e)}),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"showMediaControl",mouseleave:"hideMediaControl"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(t){return t}}}}]),t.prototype.configureDomRecycler=function(){var t=this.options&&this.options.playback&&this.options.playback.recycleVideo?!0:!1;c.DomRecycler.configure({recycleVideo:t})},t.prototype.createContainers=function(t){var n=this;this.defer=M.default.Deferred(),this.defer.promise(this),this.containerFactory=new b.default(t,t.loader,this.i18n,this.playerError),this.containerFactory.createContainers().then(function(e){return n.setupContainers(e)}).then(function(e){return n.resolveOnContainersReady(e)})},t.prototype.updateSize=function(){c.Fullscreen.isFullscreen()?this.setFullscreen():this.setPlayerSize()},t.prototype.setFullscreen=function(){g.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,M.default)(window).width(),height:(0,M.default)(window).height()})},t.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,M.default)(window).width(),height:(0,M.default)(window).height()},this.resize(this.playerInfo.currentSize)},t.prototype.resize=function(t){!(0,c.isNumber)(t.height)&&!(0,c.isNumber)(t.width)?(this.el.style.height=""+t.height,this.el.style.width=""+t.width):(this.el.style.height=t.height+"px",this.el.style.width=t.width+"px"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=t.width,this.options.height=t.height,this.playerInfo.currentSize=t,this.triggerResize(this.playerInfo.currentSize)},t.prototype.enableResizeObserver=function(){var t=this,n=function(){if(t.playerInfo.computedSize.width!==t.el.clientWidth||t.playerInfo.computedSize.height!==t.el.clientHeight)t.playerInfo.computedSize={width:t.el.clientWidth,height:t.el.clientHeight},t.triggerResize(t.playerInfo.computedSize)};this.resizeObserverInterval=setInterval(n,500)},t.prototype.triggerResize=function(t){var n=this.firstResize||this.oldHeight!==t.height||this.oldWidth!==t.width;n&&(x.default.trigger(this.options.playerId+":"+p.default.PLAYER_RESIZE,t),this.oldHeight=t.height,this.oldWidth=t.width,this.firstResize=!1)},t.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},t.prototype.resolveOnContainersReady=function(t){var n=this;M.default.when.apply(M.default,t).done(function(){n.defer.resolve(n),n.ready=!0,n.trigger(p.default.CORE_READY)})},t.prototype.addPlugin=function(t){this.plugins.push(t)},t.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},t.prototype.getPlugin=function(t){return this.plugins.filter(function(e){return e.name===t})[0]},t.prototype.load=function(t,n){var r=this;this.options.mimeType=n,t=t&&t.constructor===Array?t:[t],this.options.sources=t,this.containers.forEach(function(e){return e.destroy()}),this.mediaControl.container=null,this.containerFactory.options=M.default.extend(this.options,{sources:t}),this.containerFactory.createContainers().then(function(e){return r.setupContainers(e)}).then(function(e){return r.resolveOnContainersReady(e)})},t.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach(function(e){return e.destroy()}),this.plugins.forEach(function(e){return e.destroy()}),this.$el.remove(),this.mediaControl.destroy(),(0,M.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,M.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,M.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()},t.prototype.handleFullscreenChange=function(){this.trigger(p.default.CORE_FULLSCREEN,c.Fullscreen.isFullscreen()),this.updateSize(),this.mediaControl.show()},t.prototype.handleWindowResize=function(t){var n=(0,M.default)(window).width()>(0,M.default)(window).height()?"landscape":"portrait";if(this._screenOrientation===n)return;this._screenOrientation=n,this.trigger(p.default.CORE_SCREEN_ORIENTATION_CHANGED,{event:t,orientation:this._screenOrientation})},t.prototype.setMediaControlContainer=function(t){this.mediaControl.setContainer(t),this.mediaControl.render()},t.prototype.disableMediaControl=function(){this.mediaControl.disable(),this.$el.removeClass("nocursor")},t.prototype.enableMediaControl=function(){this.mediaControl.enable()},t.prototype.removeContainer=function(t){this.stopListening(t),this.containers=this.containers.filter(function(e){return e!==t})},t.prototype.setupContainer=function(t){this.listenTo(t,p.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(t)},t.prototype.setupContainers=function(t){return t.forEach(this.setupContainer.bind(this)),this.trigger(p.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.setupMediaControl(this.getCurrentContainer()),this.render(),this.appendToParent(),this.containers},t.prototype.renderContainers=function(){var t=this;this.containers.forEach(function(e){return t.el.appendChild(e.render().el)})},t.prototype.createContainer=function(t,n){var r=this.containerFactory.createContainer(t,n);return this.setupContainer(r),this.el.appendChild(r.render().el),r},t.prototype.setupMediaControl=function(t){this.mediaControl?this.mediaControl.setContainer(t):(this.mediaControl=this.createMediaControl(M.default.extend({container:t,focusElement:this.el},this.options)),this.listenTo(this.mediaControl,p.default.MEDIACONTROL_FULLSCREEN,this.toggleFullscreen),this.listenTo(this.mediaControl,p.default.MEDIACONTROL_SHOW,this.onMediaControlShow.bind(this,!0)),this.listenTo(this.mediaControl,p.default.MEDIACONTROL_HIDE,this.onMediaControlShow.bind(this,!1)))},t.prototype.createMediaControl=function(t){return t.mediacontrol&&t.mediacontrol.external?(new t.mediacontrol.external(t)).render():(new E.default(t)).render()},t.prototype.getCurrentContainer=function(){return!this.mediaControl||!this.mediaControl.container?this.containers[0]:this.mediaControl.container},t.prototype.getCurrentPlayback=function(){var t=this.getCurrentContainer();return t&&t.playback},t.prototype.getPlaybackType=function(){var t=this.getCurrentContainer();return t&&t.getPlaybackType()},t.prototype.toggleFullscreen=function(){c.Fullscreen.isFullscreen()?(c.Fullscreen.cancelFullscreen(),g.default.isiOS||this.$el.removeClass("fullscreen nocursor")):(c.Fullscreen.requestFullscreen(this.el),g.default.isiOS||this.$el.addClass("fullscreen")),this.mediaControl.show()},t.prototype.showMediaControl=function(t){this.mediaControl.show(t)},t.prototype.hideMediaControl=function(){this.mediaControl.hide(this.options.hideMediaControlDelay)},t.prototype.onMediaControlShow=function(t){this.getCurrentContainer().trigger(t?p.default.CONTAINER_MEDIACONTROL_SHOW:p.default.CONTAINER_MEDIACONTROL_HIDE),t?this.$el.removeClass("nocursor"):c.Fullscreen.isFullscreen()&&this.$el.addClass("nocursor")},t.prototype.configure=function(t){var n=this;this._options=M.default.extend(this._options,t),this.configureDomRecycler();var r=t.source||t.sources;r&&this.load(r,t.mimeType||this.options.mimeType),this.trigger(p.default.CORE_OPTIONS_CHANGE),this.containers.forEach(function(e){e.configure(n.options)}),this.mediaControl.configure(this.options)},t.prototype.appendToParent=function(){var t=this.$el.parent()&&this.$el.parent().length;!t&&this.$el.appendTo(this.options.parentElement)},t.prototype.render=function(){this.$el.append(this.mediaControl.render().el),H||(H=A.default.getStyleFor(D.default,{baseUrl:this.options.baseUrl})),(0,M.default)("head").append(H),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var t={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=t,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},t}(v.default);t.default=B,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(147),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function E(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),i=E(r),s=n(0),o=E(s),u=n(1),a=E(u),f=n(3),l=E(f),c=n(2),h=E(c),p=n(14),d=E(p),v=n(4),m=E(v),g=n(78),y=E(g),b=n(6),w=E(b),S=function(e){function t(n,r,i,s){(0,o.default)(this,t);var u=(0,a.default)(this,e.call(this,n));return u._i18n=i,u.loader=r,u.playerError=s,u}return(0,h.default)(t,e),(0,l.default)(t,[{key:"options",get:function(){return this._options},set:function(t){this._options=t}}]),t.prototype.createContainers=function(){var t=this;return w.default.Deferred(function(e){e.resolve(t.options.sources.map(function(e){return t.createContainer(e)}))})},t.prototype.findPlaybackPlugin=function(t,n){return this.loader.playbackPlugins.filter(function(e){return e.canPlay(t,n)})[0]},t.prototype.createContainer=function(t){var n=null,r=this.options.mimeType;(typeof t=="undefined"?"undefined":(0,i.default)(t))==="object"?(n=t.source.toString(),t.mimeType&&(r=t.mimeType)):n=t.toString(),n.match(/^\/\//)&&(n=window.location.protocol+n);var s=w.default.extend({},this.options,{src:n,mimeType:r}),o=this.findPlaybackPlugin(n,r),u=new o(s,this._i18n,this.playerError);s=w.default.extend({},s,{playback:u});var a=new y.default(s,this._i18n,this.playerError),f=w.default.Deferred();return f.promise(a),this.addContainerPlugins(a),this.listenToOnce(a,m.default.CONTAINER_READY,function(){return f.resolve(a)}),a},t.prototype.addContainerPlugins=function(t){this.loader.containerPlugins.forEach(function(e){t.addPlugin(new e(t))})},t}(d.default);t.default=S,e.exports=t["default"]},function(e,t,n){"use strict";function b(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=b(r),s=n(0),o=b(s),u=n(1),a=b(u),f=n(3),l=b(f),c=n(2),h=b(c),p=n(4),d=b(p),v=n(21),m=b(v);n(152);var g=n(6),y=b(g),w=function(e){function t(n,r,i){(0,o.default)(this,t);var s=(0,a.default)(this,e.call(this,n));return s._i18n=r,s.currentTime=0,s.volume=100,s.playback=n.playback,s.playerError=i,s.settings=y.default.extend({},s.playback.settings),s.isReady=!1,s.mediaControlDisabled=!1,s.plugins=[s.playback],s.bindEvents(),s}return(0,h.default)(t,e),(0,l.default)(t,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{"class":"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",doubleTap:"dblClicked",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(t){this.playback.closedCaptionsTrackId=t}}]),t.prototype.bindEvents=function(){this.listenTo(this.playback,d.default.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,d.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,d.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,d.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,d.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,d.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,d.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,d.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,d.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,d.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,d.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,d.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,d.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,d.default.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,d.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,d.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,d.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,d.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,d.default.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,d.default.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,d.default.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)},t.prototype.subtitleAvailable=function(){this.trigger(d.default.CONTAINER_SUBTITLE_AVAILABLE)},t.prototype.subtitleChanged=function(t){this.trigger(d.default.CONTAINER_SUBTITLE_CHANGED,t)},t.prototype.playbackStateChanged=function(t){this.trigger(d.default.CONTAINER_PLAYBACKSTATE,t)},t.prototype.playbackDvrStateChanged=function(t){this.settings=this.playback.settings,this.dvrInUse=t,this.trigger(d.default.CONTAINER_PLAYBACKDVRSTATECHANGED,t)},t.prototype.updateBitrate=function(t){this.trigger(d.default.CONTAINER_BITRATE,t)},t.prototype.statsReport=function(t){this.trigger(d.default.CONTAINER_STATS_REPORT,t)},t.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},t.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},t.prototype.isDvrInUse=function(){return!!this.dvrInUse},t.prototype.destroy=function(){this.trigger(d.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach(function(e){return e.destroy()}),this.$el.remove()},t.prototype.setStyle=function(t){this.$el.css(t)},t.prototype.animate=function(t,n){return this.$el.animate(t,n).promise()},t.prototype.ready=function(){this.isReady=!0,this.trigger(d.default.CONTAINER_READY,this.name)},t.prototype.isPlaying=function(){return this.playback.isPlaying()},t.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},t.prototype.getCurrentTime=function(){return this.currentTime},t.prototype.getDuration=function(){return this.playback.getDuration()},t.prototype.error=function(t){this.isReady||this.ready(),this.trigger(d.default.CONTAINER_ERROR,(0,i.default)(t,{container:this}),this.name)},t.prototype.loadedMetadata=function(t){this.trigger(d.default.CONTAINER_LOADEDMETADATA,t)},t.prototype.timeUpdated=function(t){this.currentTime=t.current,this.trigger(d.default.CONTAINER_TIMEUPDATE,t,this.name)},t.prototype.progress=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.trigger.apply(this,[d.default.CONTAINER_PROGRESS].concat(n,[this.name]))},t.prototype.playing=function(){this.trigger(d.default.CONTAINER_PLAY,this.name)},t.prototype.paused=function(){this.trigger(d.default.CONTAINER_PAUSE,this.name)},t.prototype.play=function(){this.playback.play()},t.prototype.stop=function(){this.playback.stop(),this.currentTime=0},t.prototype.pause=function(){this.playback.pause()},t.prototype.onEnded=function(){this.trigger(d.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},t.prototype.stopped=function(){this.trigger(d.default.CONTAINER_STOP)},t.prototype.clicked=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(d.default.CONTAINER_CLICK,this,this.name)},t.prototype.dblClicked=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(d.default.CONTAINER_DBLCLICK,this,this.name)},t.prototype.onContextMenu=function(t){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(d.default.CONTAINER_CONTEXTMENU,t,this.name)},t.prototype.seek=function(t){this.trigger(d.default.CONTAINER_SEEK,t,this.name),this.playback.seek(t)},t.prototype.onSeeked=function(){this.trigger(d.default.CONTAINER_SEEKED,this.name)},t.prototype.seekPercentage=function(t){var n=this.getDuration();if(t>=0&&t<=100){var r=n*(t/100);this.seek(r)}},t.prototype.setVolume=function(t){this.volume=parseInt(t,10),this.trigger(d.default.CONTAINER_VOLUME,t,this.name),this.playback.volume(t)},t.prototype.fullscreen=function(){this.trigger(d.default.CONTAINER_FULLSCREEN,this.name)},t.prototype.onBuffering=function(){this.trigger(d.default.CONTAINER_STATE_BUFFERING,this.name)},t.prototype.bufferfull=function(){this.trigger(d.default.CONTAINER_STATE_BUFFERFULL,this.name)},t.prototype.addPlugin=function(t){this.plugins.push(t)},t.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},t.prototype.getPlugin=function(t){return this.plugins.filter(function(e){return e.name===t})[0]},t.prototype.mouseEnter=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(d.default.CONTAINER_MOUSE_ENTER)},t.prototype.mouseLeave=function(){(!this.options.chromeless||this.options.allowUserInteraction)&&this.trigger(d.default.CONTAINER_MOUSE_LEAVE)},t.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(d.default.CONTAINER_SETTINGSUPDATE)},t.prototype.highDefinitionUpdate=function(t){this.trigger(d.default.CONTAINER_HIGHDEFINITIONUPDATE,t)},t.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},t.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(d.default.CONTAINER_MEDIACONTROL_DISABLE))},t.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(d.default.CONTAINER_MEDIACONTROL_ENABLE))},t.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},t.prototype.configure=function(t){this._options=y.default.extend(this._options,t),this.updateStyle(),this.trigger(d.default.CONTAINER_OPTIONS_CHANGE)},t.prototype.render=function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this},t}(m.default);t.default=w,e.exports=t["default"]},function(e,t,n){n(150),e.exports=n(11).Object.assign},function(e,t,n){var r=n(17);r(r.S+r.F,"Object",{assign:n(151)})},function(e,t,n){"use strict";var r=n(24),i=n(58),s=n(39),o=n(36),u=n(66),a=Object.assign;e.exports=!a||n(27)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),a({},e)[n]!=7||Object.keys(a({},t)).join("")!=r})?function(t,n){var a=o(t),f=arguments.length,l=1,c=i.f,h=s.f;while(f>l){var p=u(arguments[l++]),d=c?r(p).concat(c(p)):r(p),v=d.length,m=0,g;while(v>m)h.call(p,g=d[m++])&&(a[g]=p[g])}return a}:a},function(e,t,n){var r=n(153);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n",""])},function(e,t){e.exports=function(e){var t=typeof window!="undefined"&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||typeof e!="string")return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/"),i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i))return e;var s;return i.indexOf("//")===0?s=i:i.indexOf("/")===0?s=n+i:s=r+i.replace(/^\.\//,""),"url("+JSON.stringify(s)+")"});return i}},function(e,t,n){"use strict";(function(r){function J(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),s=J(i),o=n(0),u=J(o),a=n(1),f=J(a),l=n(3),c=J(l),h=n(2),p=J(h),d=n(5),v=n(60),m=n(4),g=J(m),y=n(21),b=J(y),w=n(13),E=J(w),S=n(28),x=J(S),T=n(8),N=J(T),C=n(10),k=J(C),L=n(6),A=J(L);n(157);var O=n(159),M=J(O),_=n(62),D=J(_),P=n(84),H=J(P),B=n(160),j=J(B),F=n(161),I=J(F),q=n(162),R=J(q),U=n(163),z=J(U),W=n(164),X=J(W),V=n(165),$=J(V),K=function(e){function t(n){(0,u.default)(this,t);var r=(0,f.default)(this,e.call(this,n));return r.persistConfig=r.options.persistConfig,r.container=n.container,r.currentPositionValue=null,r.currentDurationValue=null,r.keepVisible=!1,r.fullScreenOnVideoTagSupported=null,r.setInitialVolume(),r.addEventListeners(),r.settings={left:["play","stop","pause"],right:["volume"],"default":["position","seekbar","duration"]},r.kibo=new v.Kibo(r.options.focusElement),r.bindKeyEvents(),r.container?A.default.isEmptyObject(r.container.settings)||(r.settings=A.default.extend({},r.container.settings)):r.settings={},r.userDisabled=!1,(r.container&&r.container.mediaControlDisabled||r.options.chromeless)&&r.disable(),r.stopDragHandler=function(e){return r.stopDrag(e)},r.updateDragHandler=function(e){return r.updateDrag(e)},(0,A.default)(document).bind("mouseup",r.stopDragHandler),(0,A.default)(document).bind("mousemove",r.updateDragHandler),r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"name",get:function(){return"MediaControl"}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===k.default.NO_OP}},{key:"attributes",get:function(){return{"class":"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,N.default)(M.default)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return this.volume===0}}]),t.prototype.addEventListeners=function(){this.container&&(x.default.on(this.options.playerId+":"+g.default.PLAYER_RESIZE,this.playerResize,this),this.listenTo(this.container,g.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,g.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,g.default.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,g.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,g.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,g.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,g.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,g.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,g.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,g.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,g.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,g.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,g.default.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,g.default.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),this.container.playback.el.nodeName.toLowerCase()==="video"&&this.listenToOnce(this.container,g.default.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))},t.prototype.disable=function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()},t.prototype.enable=function(){if(this.options.chromeless)return;this.userDisabled=!1,this.bindKeyEvents(),this.show()},t.prototype.play=function(){this.container.play()},t.prototype.pause=function(){this.container.pause()},t.prototype.stop=function(){this.container.stop()},t.prototype.setInitialVolume=function(){var t=this.persistConfig?d.Config.restore("volume"):100,n=this.container&&this.container.options||this.options;this.setVolume(n.mute?0:t,!0)},t.prototype.onVolumeChanged=function(){this.updateVolumeUI()},t.prototype.onLoadedMetadataOnVideoTag=function(){var t=this.container.playback.el;!d.Fullscreen.fullscreenEnabled()&&t.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())},t.prototype.updateVolumeUI=function(){if(!this.rendered)return;this.$volumeBarContainer.find(".bar-fill-2").css({});var t=this.$volumeBarContainer.width(),n=this.$volumeBarBackground.width(),r=(t-n)/2,i=n*this.volume/100+r;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:i}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var s=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,s).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(R.default),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(I.default),this.applyButtonStyle(this.$volumeIcon)},t.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(H.default),this.$playStopToggle.append(j.default),this.trigger(g.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(D.default),this.$playStopToggle.append(D.default),this.trigger(g.default.MEDIACONTROL_NOTPLAYING),E.default.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},t.prototype.mousemoveOnSeekBar=function(t){if(this.settings.seekEnabled){var n=t.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:n})}this.trigger(g.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,t)},t.prototype.mouseleaveOnSeekBar=function(t){this.trigger(g.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,t)},t.prototype.onVolumeClick=function(t){this.setVolume(this.getVolumeFromUIEvent(t))},t.prototype.mousemoveOnVolumeBar=function(t){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(t))},t.prototype.playerResize=function(t){this.$fullscreenToggle.html(""),d.Fullscreen.isFullscreen()?this.$fullscreenToggle.append(X.default):this.$fullscreenToggle.append(z.default),this.applyButtonStyle(this.$fullscreenToggle),this.$el.removeClass("w320"),(t.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},t.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},t.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},t.prototype.startSeekDrag=function(t){if(!this.settings.seekEnabled)return;this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),t&&t.preventDefault()},t.prototype.startVolumeDrag=function(t){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),t&&t.preventDefault()},t.prototype.stopDrag=function(t){this.draggingSeekBar&&this.seek(t),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},t.prototype.updateDrag=function(t){if(this.draggingSeekBar){t.preventDefault();var n=t.pageX-this.$seekBarContainer.offset().left,r=n/this.$seekBarContainer.width()*100;r=Math.min(100,Math.max(r,0)),this.setSeekPercentage(r)}else this.draggingVolumeBar&&(t.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(t)))},t.prototype.getVolumeFromUIEvent=function(t){var n=t.pageX-this.$volumeBarContainer.offset().left,r=n/this.$volumeBarContainer.width()*100;return r},t.prototype.toggleMute=function(){this.setVolume(this.muted?100:0)},t.prototype.setVolume=function(t){var n=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t=Math.min(100,Math.max(t,0)),this.intendedVolume=t,this.persistConfig&&!r&&d.Config.persist("volume",t);var i=function(){n.container.isReady?n.container.setVolume(t):n.listenToOnce(n.container,g.default.CONTAINER_READY,function(){n.container.setVolume(t)})};this.container?i():this.listenToOnce(this,g.default.MEDIACONTROL_CONTAINERCHANGED,function(){i()})},t.prototype.toggleFullscreen=function(){this.trigger(g.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.resetUserKeepVisible()},t.prototype.setContainer=function(t){this.container&&(this.stopListening(this.container),this.fullScreenOnVideoTagSupported=null),x.default.off(this.options.playerId+":"+g.default.PLAYER_RESIZE,this.playerResize,this),this.container=t,this.setVolume(this.intendedVolume,!0),this.changeTogglePlay(),this.addEventListeners(),this.settingsUpdate(),this.container.trigger(g.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container.mediaControlDisabled&&this.disable(),this.trigger(g.default.MEDIACONTROL_CONTAINERCHANGED)},t.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},t.prototype.hideVolumeBar=function(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:400;if(!this.$volumeBarContainer)return;this.draggingVolumeBar?this.hideVolumeId=setTimeout(function(){return t.hideVolumeBar()},n):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout(function(){return t.$volumeBarContainer.addClass("volume-bar-hide")},n))},t.prototype.ended=function(){this.changeTogglePlay()},t.prototype.updateProgressBar=function(t){var n=t.start/t.total*100,r=t.current/t.total*100;this.$seekBarLoaded.css({left:n+"%",width:r-n+"%"})},t.prototype.onTimeUpdate=function(t){if(this.draggingSeekBar)return;var n=t.current<0?t.total:t.current;this.currentPositionValue=n,this.currentDurationValue=t.total,this.renderSeekBar()},t.prototype.renderSeekBar=function(){if(this.currentPositionValue===null||this.currentDurationValue===null)return;this.currentSeekBarPercentage=100;if(this.container.getPlaybackType()!==k.default.LIVE||this.container.isDvrInUse())this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100;this.setSeekPercentage(this.currentSeekBarPercentage);var t=(0,d.formatTime)(this.currentPositionValue),n=(0,d.formatTime)(this.currentDurationValue);t!==this.displayedPosition&&(this.$position.text(t),this.displayedPosition=t),n!==this.displayedDuration&&(this.$duration.text(n),this.displayedDuration=n)},t.prototype.seek=function(t){if(!this.settings.seekEnabled)return;var n=t.pageX-this.$seekBarContainer.offset().left,r=n/this.$seekBarContainer.width()*100;return r=Math.min(100,Math.max(r,0)),this.container.seekPercentage(r),this.setSeekPercentage(r),!1},t.prototype.setKeepVisible=function(){this.keepVisible=!0},t.prototype.resetKeepVisible=function(){this.keepVisible=!1},t.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},t.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},t.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},t.prototype.show=function(t){var n=this;if(this.disabled)return;var r=2e3;if(!t||t.clientX!==this.lastMouseX&&t.clientY!==this.lastMouseY||navigator.userAgent.match(/firefox/i))clearTimeout(this.hideId),this.$el.show(),this.trigger(g.default.MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout(function(){return n.hide()},r),t&&(this.lastMouseX=t.clientX,this.lastMouseY=t.clientY)},t.prototype.hide=function(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!this.isVisible())return;var r=n||2e3;clearTimeout(this.hideId);if(!this.disabled&&this.options.hideMediaControl===!1)return;!this.disabled&&(n||this.userKeepVisible||this.keepVisible||this.draggingSeekBar||this.draggingVolumeBar)?this.hideId=setTimeout(function(){return t.hide()},r):(this.trigger(g.default.MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0))},t.prototype.settingsUpdate=function(){var t=this.getSettings();t&&!this.fullScreenOnVideoTagSupported&&!d.Fullscreen.fullscreenEnabled()&&(t.default&&(0,d.removeArrayItem)(t.default,"fullscreen"),t.left&&(0,d.removeArrayItem)(t.left,"fullscreen"),t.right&&(0,d.removeArrayItem)(t.right,"fullscreen"));var n=(0,s.default)(this.settings)!==(0,s.default)(t);n&&(this.settings=t,this.render())},t.prototype.getSettings=function(){return A.default.extend(!0,{},this.container.settings)},t.prototype.highDefinitionUpdate=function(t){this.isHD=t;var n=t?"addClass":"removeClass";this.$hdIndicator[n]("enabled")},t.prototype.createCachedElements=function(){var t=this.$el.find(".media-control-layer");this.$duration=t.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=t.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=t.find("button.media-control-button[data-playpause]"),this.$playStopToggle=t.find("button.media-control-button[data-playstop]"),this.$position=t.find(".media-control-indicator[data-position]"),this.$seekBarContainer=t.find(".bar-container[data-seekbar]"),this.$seekBarHover=t.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=t.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=t.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=t.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=t.find(".bar-container[data-volume]"),this.$volumeContainer=t.find(".drawer-container[data-volume]"),this.$volumeIcon=t.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},t.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},t.prototype.initializeIcons=function(){var t=this.$el.find(".media-control-layer");t.find("button.media-control-button[data-play]").append(D.default),t.find("button.media-control-button[data-pause]").append(H.default),t.find("button.media-control-button[data-stop]").append(j.default),this.$playPauseToggle.append(D.default),this.$playStopToggle.append(D.default),this.$volumeIcon.append(I.default),this.$fullscreenToggle.append(z.default),this.$hdIndicator.append($.default)},t.prototype.setSeekPercentage=function(t){t=Math.max(Math.min(t,100),0);if(this.displayedSeekBarPercentage===t)return;this.displayedSeekBarPercentage=t,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:t+"%"}),this.$seekBarScrubber.css({left:t+"%"})},t.prototype.seekRelative=function(t){if(!this.settings.seekEnabled)return;var n=this.container.getCurrentTime(),r=this.container.getDuration(),i=Math.min(Math.max(n+t,0),r);i=Math.min(i*100/r,100),this.container.seekPercentage(i)},t.prototype.bindKeyAndShow=function(t,n){var r=this;this.kibo.down(t,function(){return r.show(),n()})},t.prototype.bindKeyEvents=function(){var t=this;if(E.default.isMobile||this.options.disableKeyboardShortcuts)return;this.unbindKeyEvents(),this.bindKeyAndShow("space",function(){return t.togglePlayPause()}),this.bindKeyAndShow("left",function(){return t.seekRelative(-5)}),this.bindKeyAndShow("right",function(){return t.seekRelative(5)}),this.bindKeyAndShow("shift left",function(){return t.seekRelative(-10)}),this.bindKeyAndShow("shift right",function(){return t.seekRelative(10)}),this.bindKeyAndShow("shift ctrl left",function(){return t.seekRelative(-15)}),this.bindKeyAndShow("shift ctrl right",function(){return t.seekRelative(15)});var n=["1","2","3","4","5","6","7","8","9","0"];n.forEach(function(e){t.bindKeyAndShow(e,function(){return t.settings.seekEnabled&&t.container.seekPercentage(e*10)})})},t.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))},t.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var t=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",t),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},t.prototype.applyButtonStyle=function(t){this.buttonsColor&&t&&(0,A.default)(t).find("svg path").css("fill",this.buttonsColor)},t.prototype.destroy=function(){this.remove(),(0,A.default)(document).unbind("mouseup",this.stopDragHandler),(0,A.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening()},t.prototype.configure=function(t){this._options=A.default.extend(this._options,t),this.trigger(g.default.MEDIACONTROL_OPTIONS_CHANGE)},t.prototype.render=function(){var t=this,n=1e3;this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.hideId=setTimeout(function(){return t.hide()},n),this.disabled&&this.hide(),E.default.isSafari&&E.default.isMobile&&(E.default.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var i=0;return this.displayedSeekBarPercentage&&(i=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(i),r.nextTick(function(){t.settings.seekEnabled||t.$seekBarContainer.addClass("seek-disabled"),t.playerResize({width:t.options.width,height:t.options.height}),t.hideVolumeBar(0)}),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.rendered=!0,this.updateVolumeUI(),this.trigger(g.default.MEDIACONTROL_RENDERED),this},t}(b.default);t.default=K,K.extend=function(e){return(0,d.extend)(K,e)},e.exports=t["default"]}).call(t,n(61))},function(e,t,n){var r=n(11),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(t){return i.stringify.apply(i,arguments)}},function(e,t,n){var r=n(158);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(82);t=e.exports=n(7)(!1),t.push([e.i,".media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important;\n    cursor: url("+r(n(83))+"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      cursor: url("+r(n(83))+'), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    bottom: -50px; }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    bottom: 7px;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        -webkit-transform: translateX(-50%);\n                transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          -webkit-transform: translateX(-50%);\n                  transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: -webkit-transform .2s ease-out;\n          transition: transform .2s ease-out;\n          transition: transform .2s ease-out, -webkit-transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            -webkit-transform: scaleY(1.5);\n                    transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n',""])},function(e,t){e.exports='<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},function(e,t,n){var r=n(167);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,'[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n  [data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n  [data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n  [data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n  [data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n  [data-player] b, [data-player] u, [data-player] i, [data-player] center,\n  [data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n  [data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n  [data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n  [data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n  [data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n  [data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n  [data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font: inherit;\n    font-size: 100%;\n    vertical-align: baseline; }\n  [data-player] table {\n    border-collapse: collapse;\n    border-spacing: 0; }\n  [data-player] caption, [data-player] th, [data-player] td {\n    text-align: left;\n    font-weight: normal;\n    vertical-align: middle; }\n  [data-player] q, [data-player] blockquote {\n    quotes: none; }\n    [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n      content: "";\n      content: none; }\n  [data-player] a img {\n    border: none; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    max-width: none;\n    box-sizing: inherit;\n    float: none; }\n  [data-player] div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n',""])},function(e,t,n){var r=n(82);t=e.exports=n(7)(!1),t.push([e.i,'@font-face {\n  font-family: "Roboto";\n  font-style: normal;\n  font-weight: 400;\n  src: local("Roboto"), local("Roboto-Regular"), url('+r(n(169))+') format("truetype");\n}\n',""])},function(e,t){e.exports="<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"},function(e,t,n){"use strict";function st(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=st(r),s=n(63),o=st(s),u=n(0),a=st(u),f=n(1),l=st(f),c=n(2),h=st(c),p=n(14),d=st(p),v=n(40),m=st(v),g=n(41),y=st(g),b=n(88),w=st(b),E=n(89),S=st(E),x=n(90),T=st(x),N=n(91),C=st(N),k=n(92),L=st(k),A=n(93),O=st(A),M=n(94),_=st(M),D=n(206),P=st(D),H=n(95),B=st(H),j=n(96),F=st(j),I=n(216),q=st(I),R=n(97),U=st(R),z=n(98),W=st(z),X=n(223),V=st(X),$=n(99),J=st($),K=n(230),Q=st(K),G=n(235),Y=st(G),Z=n(236),et=st(Z),tt=n(237),nt=st(tt),rt=n(238),it=st(rt),ot=function(e){function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;(0,a.default)(this,t);var s=(0,l.default)(this,e.call(this));return s.playerId=r,s.playbackPlugins=[],i||(s.playbackPlugins=[].concat((0,o.default)(s.playbackPlugins),[C.default])),s.playbackPlugins=[].concat((0,o.default)(s.playbackPlugins),[y.default,S.default]),i||(s.playbackPlugins=[].concat((0,o.default)(s.playbackPlugins),[w.default,T.default])),s.playbackPlugins=[].concat((0,o.default)(s.playbackPlugins),[L.default,O.default]),s.containerPlugins=[_.default,B.default,F.default,P.default,q.default,U.default],s.corePlugins=[W.default,V.default,J.default,Q.default,Y.default,et.default,nt.default,it.default],Array.isArray(n)||s.validateExternalPluginsType(n),s.addExternalPlugins(n),s}return(0,h.default)(t,e),t.prototype.groupPluginsByType=function(t){return Array.isArray(t)&&(t=t.reduce(function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e},{})),t},t.prototype.removeDups=function(t){var n=function(t,n){return t[n.prototype.name]&&delete t[n.prototype.name],t[n.prototype.name]=n,t},r=t.reduceRight(n,(0,i.default)(null)),s=[];for(var o in r)s.unshift(r[o]);return s},t.prototype.addExternalPlugins=function(t){t=this.groupPluginsByType(t),t.playback&&(this.playbackPlugins=this.removeDups(t.playback.concat(this.playbackPlugins))),t.container&&(this.containerPlugins=this.removeDups(t.container.concat(this.containerPlugins))),t.core&&(this.corePlugins=this.removeDups(t.core.concat(this.corePlugins))),m.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},t.prototype.validateExternalPluginsType=function(t){var n=["playback","container","core"];n.forEach(function(e){(t[e]||[]).forEach(function(t){var n="external "+t.type+" plugin on "+e+" array";if(t.type!==e)throw new ReferenceError(n)})})},t}(d.default);t.default=ot,e.exports=t["default"]},function(e,t,n){n(71),n(172),e.exports=n(11).Array.from},function(e,t,n){"use strict";var r=n(51),i=n(17),s=n(36),o=n(173),u=n(174),a=n(67),f=n(175),l=n(176);i(i.S+i.F*!n(178)(function(e){Array.from(e)}),"Array",{from:function(t){var n=s(t),i=typeof this=="function"?this:Array,c=arguments.length,h=c>1?arguments[1]:undefined,p=h!==undefined,d=0,v=l(n),m,g,y,b;p&&(h=r(h,c>2?arguments[2]:undefined,2));if(v==undefined||i==Array&&!!u(v)){m=a(n.length);for(g=new i(m);m>d;d++)f(g,d,p?h(n[d],d):n[d])}else for(b=v.call(n),g=new i;!(y=b.next()).done;d++)f(g,d,p?o(b,h,[y.value,d],!0):y.value);return g.length=d,g}})},function(e,t,n){var r=n(26);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw o!==undefined&&r(o.call(e)),s}}},function(e,t,n){var r=n(31),i=n(12)("iterator"),s=Array.prototype;e.exports=function(e){return e!==undefined&&(r.Array===e||s[i]===e)}},function(e,t,n){"use strict";var r=n(18),i=n(30);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(177),i=n(12)("iterator"),s=n(31);e.exports=n(11).getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||s[r(e)]}},function(e,t,n){var r=n(46),i=n(12)("toStringTag"),s=r(function(){return arguments}())=="Arguments",o=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,u;return e===undefined?"Undefined":e===null?"Null":typeof (n=o(t=Object(e),i))=="string"?n:s?r(t):(u=r(t))=="Object"&&typeof t.callee=="function"?"Arguments":u}},function(e,t,n){var r=n(12)("iterator"),i=!1;try{var s=[7][r]();s["return"]=function(){i=!0},Array.from(s,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var s=[7],o=s[r]();o.next=function(){return{done:n=!0}},s[r]=function(){return o},e(s)}catch(u){}return n}},function(e,t,n){"use strict";(function(r){function D(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(87),s=D(i),o=n(0),u=D(o),a=n(1),f=D(a),l=n(3),c=D(l),h=n(2),p=D(h),d=n(63),v=D(d),m=n(44),g=D(m),y=n(5),b=n(10),w=D(b),E=n(13),S=D(E),x=n(23),T=D(x),N=n(4),C=D(N),k=n(6),L=D(k),A=n(8),O=D(A),M=n(180),_=D(M);n(181);var P={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map(function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'}),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};P.ogv=P.ogg,P["3gp"]=P["3gpp"];var H={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},B=(0,g.default)(H).reduce(function(e,t){return[].concat((0,v.default)(e),(0,v.default)(H[t]))},[]),j={code:"unknown",message:"unknown"},F=function(e){function t(){(0,u.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=(0,f.default)(this,e.call.apply(e,[this].concat(i)));o._destroyed=!1,o._loadStarted=!1,o._isBuffering=!1,o._playheadMoving=!1,o._playheadMovingTimer=null,o._stopped=!1,o._ccTrackId=-1,o._setupSrc(o.options.src),o.options.playback||(o.options.playback=o.options||{}),o.options.playback.disableContextMenu=o.options.playback.disableContextMenu||o.options.disableVideoTagContextMenu;var a=o.options.playback,l=a.preload||(S.default.isSafari?"auto":o.options.preload),c=void 0;return o.options.poster&&(typeof o.options.poster=="string"?c=o.options.poster:typeof o.options.poster.url=="string"&&(c=o.options.poster.url)),L.default.extend(o.el,{muted:o.options.mute,defaultMuted:o.options.mute,loop:o.options.loop,poster:c,preload:l||"metadata",controls:(a.controls||o.options.useVideoTagDefaultControls)&&"controls",crossOrigin:a.crossOrigin,"x-webkit-playsinline":a.playInline}),a.playInline&&o.$el.attr({playsinline:"playsinline"}),a.crossOrigin&&o.$el.attr({crossorigin:a.crossOrigin}),o.settings={"default":["seekbar"]},o.settings.left=["playpause","position","duration"],o.settings.right=["fullscreen","volume","hd-indicator"],a.externalTracks&&o._setupExternalTracks(a.externalTracks),o.options.autoPlay&&r.nextTick(function(){return!o._destroyed&&o.play()}),o}return(0,p.default)(t,e),(0,c.default)(t,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var n=this.options.src,r=t._mimeTypesForUrl(n,H,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||B.indexOf(r[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]),t.prototype._setupExternalTracks=function(t){this._externalTracks=t.map(function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}})},t.prototype._setupSrc=function(t){if(this.el.src===t)return;this._ccIsSetup=!1,this.el.src=t,this._src=this.el.src},t.prototype._onLoadedMetadata=function(t){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_LOADEDMETADATA,{duration:t.target.duration,data:t}),this._updateSettings();var n=typeof this._options.autoSeekFromUrl=="undefined"||this._options.autoSeekFromUrl;this.getPlaybackType()!==w.default.LIVE&&n&&this._checkInitialSeek()},t.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},t.prototype._updateSettings=function(){this.getPlaybackType()===w.default.VOD||this.getPlaybackType()===w.default.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(C.default.PLAYBACK_SETTINGSUPDATE)},t.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},t.prototype.getPlaybackType=function(){var t=this.tagName==="audio"?w.default.AOD:w.default.VOD;return[0,undefined,Infinity].indexOf(this.el.duration)>=0?w.default.LIVE:t},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype.consent=function(){!this.isPlaying()&&this.el.load()},t.prototype.play=function(){this.trigger(C.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();t&&t.catch&&t.catch(function(){})},t.prototype.pause=function(){this.el.pause()},t.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_STOP)},t.prototype.volume=function(t){t===0?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1),this.el.volume=t/100},t.prototype.mute=function(){this.el.muted=!0},t.prototype.unmute=function(){this.el.muted=!1},t.prototype.isMuted=function(){return!!this.el.volume},t.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},t.prototype._startPlayheadMovingChecks=function(){if(this._playheadMovingTimer!==null)return;this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500)},t.prototype._stopPlayheadMovingChecks=function(){if(this._playheadMovingTimer===null)return;clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1},t.prototype._determineIfPlayheadMoving=function(){var t=this._playheadMovingTimeOnCheck,n=this.el.currentTime;this._playheadMoving=t!==n,this._playheadMovingTimeOnCheck=n,this._handleBufferingEvents()},t.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},t.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},t.prototype._onCanPlay=function(){this._handleBufferingEvents()},t.prototype._onPlaying=function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_PLAY)},t.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_PAUSE)},t.prototype._onSeeking=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_SEEK)},t.prototype._onSeeked=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_SEEKED)},t.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(C.default.PLAYBACK_ENDED,this.name)},t.prototype._handleBufferingEvents=function(){var t=!this.el.ended&&!this.el.paused,n=this._loadStarted&&!this.el.ended&&!this._stopped&&(t&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==n&&(this._isBuffering=n,n?this.trigger(C.default.PLAYBACK_BUFFERING,this.name):this.trigger(C.default.PLAYBACK_BUFFERFULL,this.name))},t.prototype._onError=function(){var t=this.el.error||j,n=t.code,r=t.message,i=this.createError({code:n,description:r,raw:this.el.error,level:n===j.code?T.default.Levels.WARN:T.default.Levels.FATAL});this.trigger(C.default.PLAYBACK_ERROR,i)},t.prototype.destroy=function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),this.$el.remove(),this.el.removeAttribute("src"),this._src=null,y.DomRecycler.garbage(this.$el)},t.prototype.seek=function(t){this.el.currentTime=t},t.prototype.seekPercentage=function(t){var n=this.el.duration*(t/100);this.seek(n)},t.prototype._checkInitialSeek=function(){var t=(0,y.seekStringToSeconds)();t!==0&&this.seek(t)},t.prototype.getCurrentTime=function(){return this.el.currentTime},t.prototype.getDuration=function(){return this.el.duration},t.prototype._onTimeUpdate=function(){this.getPlaybackType()===w.default.LIVE?this.trigger(C.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(C.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},t.prototype._onProgress=function(){if(!this.el.buffered.length)return;var t=[],n=0;for(var r=0;r<this.el.buffered.length;r++)t=[].concat((0,v.default)(t),[{start:this.el.buffered.start(r),end:this.el.buffered.end(r)}]),this.el.currentTime>=t[r].start&&this.el.currentTime<=t[r].end&&(n=r);var i={start:t[n].start,current:t[n].end,total:this.el.duration};this.trigger(C.default.PLAYBACK_PROGRESS,i,t)},t.prototype._typeFor=function(n){var r=t._mimeTypesForUrl(n,P,this.options.mimeType);r.length===0&&(r=t._mimeTypesForUrl(n,H,this.options.mimeType));var i=r[0]||"";return i.split(";")[0]},t.prototype._ready=function(){if(this._isReadyState)return;this._isReadyState=!0,this.trigger(C.default.PLAYBACK_READY,this.name)},t.prototype._checkForClosedCaptions=function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(C.default.PLAYBACK_SUBTITLE_AVAILABLE);var t=this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}},t.prototype._handleTextTrackChange=function(){var t=this.closedCaptionsTracks,n=t.find(function(e){return e.track.mode==="showing"})||{id:-1};this._ccTrackId!==n.id&&(this._ccTrackId=n.id,this.trigger(C.default.PLAYBACK_SUBTITLE_CHANGED,{id:n.id}))},t.prototype.render=function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",function(){return!1}),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this},(0,c.default)(t,[{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===t.prototype.name}},{key:"closedCaptionsTracks",get:function(){var t=0,n=function(){return t++},r=this.el.textTracks?(0,s.default)(this.el.textTracks):[];return r.filter(function(e){return e.kind==="subtitles"||e.kind==="captions"}).map(function(e){return{id:n(),name:e.label,track:e}})}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(t){if(!(0,y.isNumber)(t))return;var n=this.closedCaptionsTracks,r=void 0;if(t!==-1){r=n.find(function(e){return e.id===t});if(!r)return;if(r.track.mode==="showing")return}n.filter(function(e){return e.track.mode!=="hidden"}).forEach(function(e){return e.track.mode="hidden"}),r&&(r.track.mode="showing"),this._ccTrackId=t,this.trigger(C.default.PLAYBACK_SUBTITLE_CHANGED,{id:t})}},{key:"template",get:function(){return(0,O.default)(_.default)}}]),t}(w.default);t.default=F,F._mimeTypesForUrl=function(e,t,n){var r=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=n||r&&t[r.toLowerCase()]||[];return i.constructor===Array?i:[i]},F._canPlay=function(e,t,n,r){var i=F._mimeTypesForUrl(n,t,r),s=document.createElement(e);return!!i.filter(function(e){return!!s.canPlayType(e).replace(/no/,"")})[0]},F.canPlay=function(e,t){return F._canPlay("audio",H,e,t)||F._canPlay("video",P,e,t)},e.exports=t["default"]}).call(t,n(61))},function(e,t){e.exports='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />\n<% }; %>\n'},function(e,t,n){var r=n(182);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n",""])},function(e,t,n){"use strict";function L(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=L(r),s=n(1),o=L(s),u=n(3),a=L(u),f=n(2),l=L(f),c=n(5),h=n(64),p=L(h),d=n(13),v=L(d),m=n(28),g=L(m),y=n(8),b=L(y),w=n(6),E=L(w),S=n(4),x=L(S),T=n(10),N=L(T),C=n(188),k=L(C),A=60,O=function(e){function t(){(0,i.default)(this,t);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var u=(0,o.default)(this,e.call.apply(e,[this].concat(r)));return u._src=u.options.src,u._baseUrl=u.options.baseUrl,u._autoPlay=u.options.autoPlay,u.settings={"default":["seekbar"]},u.settings.left=["playpause","position","duration"],u.settings.right=["fullscreen","volume"],u.settings.seekEnabled=!0,u._isReadyState=!1,u._addListeners(),u}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,b.default)(k.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return this._currentState==="ENDED"}},{key:"buffering",get:function(){return!!this._bufferingState&&this._currentState!=="ENDED"}}]),t.prototype._bootstrap=function(){var t=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%",this._currentState==="PLAYING"?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,E.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():g.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=A?setTimeout(function(){return t._bootstrap()},50):this.trigger(x.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},t.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(x.default.PLAYBACK_READY,this.name),this.trigger(x.default.PLAYBACK_SETTINGSUPDATE,this.name)},t.prototype.getPlaybackType=function(){return N.default.VOD},t.prototype.isHighDefinitionInUse=function(){return!1},t.prototype._updateTime=function(){this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},t.prototype._addListeners=function(){g.default.on(this.uniqueId+":progress",this._progress,this),g.default.on(this.uniqueId+":timeupdate",this._updateTime,this),g.default.on(this.uniqueId+":statechanged",this._checkState,this),g.default.on(this.uniqueId+":flashready",this._bootstrap,this)},t.prototype.stopListening=function(){e.prototype.stopListening.call(this),g.default.off(this.uniqueId+":progress"),g.default.off(this.uniqueId+":timeupdate"),g.default.off(this.uniqueId+":statechanged"),g.default.off(this.uniqueId+":flashready")},t.prototype._checkState=function(){if(this._isIdle||this._currentState==="PAUSED")return;this._currentState!=="PLAYING_BUFFERING"&&this.el.getState()==="PLAYING_BUFFERING"?(this._bufferingState=!0,this.trigger(x.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):this.el.getState()==="PLAYING"?(this._bufferingState=!1,this.trigger(x.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):this.el.getState()==="IDLE"?this._currentState="IDLE":this.el.getState()==="ENDED"&&(this.trigger(x.default.PLAYBACK_ENDED,this.name),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0)},t.prototype._progress=function(){this._currentState!=="IDLE"&&this._currentState!=="ENDED"&&this.trigger(x.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},t.prototype._firstPlay=function(){var t=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return t._checkInitialSeek()}),this._currentState="PLAYING"):this.listenToOnce(this,x.default.PLAYBACK_READY,this._firstPlay)},t.prototype._checkInitialSeek=function(){var t=(0,c.seekStringToSeconds)(window.location.href);t!==0&&this.seekSeconds(t)},t.prototype.play=function(){this.trigger(x.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"||this._currentState==="PLAYING_BUFFERING"?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(x.default.PLAYBACK_PLAY,this.name)):this._currentState!=="PLAYING"&&(this._firstPlay(),this.trigger(x.default.PLAYBACK_PLAY,this.name))},t.prototype.volume=function(t){var n=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return n.volume(t)})},t.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(x.default.PLAYBACK_PAUSE,this.name)},t.prototype.stop=function(){this.el.playerStop(),this.trigger(x.default.PLAYBACK_STOP),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},t.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},t.prototype.getDuration=function(){return this.el.getDuration()},t.prototype.seekPercentage=function(t){var n=this;if(this.el.getDuration()>0){var r=this.el.getDuration()*(t/100);this.seek(r)}else this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return n.seekPercentage(t)})},t.prototype.seek=function(t){var n=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(t),this.trigger(x.default.PLAYBACK_TIMEUPDATE,{current:t,total:this.el.getDuration()},this.name),this._currentState==="PAUSED"&&this.el.playerPause()):this.listenToOnce(this,x.default.PLAYBACK_BUFFERFULL,function(){return n.seek(t)})},t.prototype.destroy=function(){clearInterval(this.bootstrapId),e.prototype.stopListening.call(this),this.$el.remove()},(0,a.default)(t,[{key:"isReady",get:function(){return this._isReadyState}}]),t}(p.default);t.default=O,O.canPlay=function(e){if(!v.default.hasFlash||!e||e.constructor!==String)return!1;var t=e.split("?")[0].match(/.*\.(.*)$/)||[];return t.length>1&&!v.default.isMobile&&t[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)},e.exports=t["default"]},function(e,t,n){"use strict";function b(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=b(r),s=n(3),o=b(s),u=n(1),a=b(u),f=n(2),l=b(f),c=n(10),h=b(c),p=n(8),d=b(p),v=n(13),m=b(v),g=n(185),y=b(g);n(186);var w="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",E=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.setElement=function(t){this.$el=t,this.el=t[0]},t.prototype.render=function(){return this.$el.attr("data",this.swfPath),this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),m.default.isIE&&(this.$("embed").remove(),m.default.isLegacyIE&&this.$el.attr("classid",w)),this.el.id=this.cid,this},(0,o.default)(t,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,d.default)(y.default)}},{key:"attributes",get:function(){var t="application/x-shockwave-flash";return m.default.isLegacyIE&&(t=""),{"class":"clappr-flash-playback",type:t,width:"100%",height:"100%",data:this.swfPath,"data-flash-playback":this.name}}}]),t}(h.default);t.default=E,e.exports=t["default"]},function(e,t){e.exports='<param name="movie" value="<%= swfPath %>">\n<param name="quality" value="autohigh">\n<param name="swliveconnect" value="true">\n<param name="allowScriptAccess" value="always">\n<param name="bgcolor" value="#000000">\n<param name="allowFullScreen" value="false">\n<param name="wmode" value="<%= wmode %>">\n<param name="tabindex" value="1">\n<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">\n<embed\n  name="<%= cid %>"\n  type="application/x-shockwave-flash"\n  disabled="disabled"\n  tabindex="-1"\n  enablecontextmenu="false"\n  allowScriptAccess="always"\n  quality="autohigh"\n  pluginspage="http://www.macromedia.com/go/getflashplayer"\n  wmode="<%= wmode %>"\n  swliveconnect="true"\n  allowfullscreen="false"\n  bgcolor="#000000"\n  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"\n  data="<%= swfPath %>"\n  src="<%= swfPath %>"\n  width="100%"\n  height="100%">\n</embed>\n'},function(e,t,n){var r=n(187);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,".clappr-flash-playback[data-flash-playback] {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  pointer-events: none; }\n",""])},function(e,t){e.exports="<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"},function(e,t,n){"use strict";function g(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=g(r),s=n(3),o=g(s),u=n(1),a=g(u),f=n(2),l=g(f),c=n(4),h=g(c),p=n(10),d=g(p),v=n(41),m=g(v),y=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(h.default.PLAYBACK_SETTINGSUPDATE)},t.prototype.getPlaybackType=function(){return d.default.AOD},(0,o.default)(t,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),t}(m.default);t.default=y,y.canPlay=function(e,t){var n={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return m.default._canPlay("audio",n,e,t)},e.exports=t["default"]},function(e,t,n){"use strict";function M(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=M(r),s=n(1),o=M(s),u=n(3),a=M(u),f=n(2),l=M(f),c=n(64),h=M(c),p=n(4),d=M(p),v=n(8),m=M(v),g=n(10),y=M(g),b=n(28),w=M(b),E=n(13),S=M(E),x=n(23),T=M(x),N=n(191),C=M(N),k=n(192),L=M(k),A=n(6),O=M(A),_=60,D=-1,P=function(e){function t(){(0,i.default)(this,t);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var u=(0,o.default)(this,e.call.apply(e,[this].concat(r)));return u._src=u.options.src,u._baseUrl=u.options.baseUrl,u._initHlsParameters(u.options),u.highDefinition=!1,u._autoPlay=u.options.autoPlay,u._loop=u.options.loop,u._defaultSettings={left:["playstop"],"default":["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},u.settings=O.default.extend({},u._defaultSettings),u._playbackType=y.default.LIVE,u._hasEnded=!1,u._addListeners(),u}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,m.default)(L.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===undefined?D:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(t)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]),t.prototype._initHlsParameters=function(t){this._autoStartLoad=t.autoStartLoad===undefined?!0:t.autoStartLoad,this._capLevelToStage=t.capLevelToStage===undefined?!1:t.capLevelToStage,this._maxLevelCappingMode=t.maxLevelCappingMode===undefined?"downscale":t.maxLevelCappingMode,this._minBufferLength=t.minBufferLength===undefined?-1:t.minBufferLength,this._minBufferLengthCapping=t.minBufferLengthCapping===undefined?-1:t.minBufferLengthCapping,this._maxBufferLength=t.maxBufferLength===undefined?120:t.maxBufferLength,this._maxBackBufferLength=t.maxBackBufferLength===undefined?30:t.maxBackBufferLength,this._lowBufferLength=t.lowBufferLength===undefined?3:t.lowBufferLength,this._mediaTimePeriod=t.mediaTimePeriod===undefined?100:t.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=t.fpsDroppedMonitoringPeriod===undefined?5e3:t.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=t.fpsDroppedMonitoringThreshold===undefined?.2:t.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=t.capLevelonFPSDrop===undefined?!1:t.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=t.smoothAutoSwitchonFPSDrop===undefined?this.capLevelonFPSDrop:t.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=t.switchDownOnLevelError===undefined?!0:t.switchDownOnLevelError,this._seekMode=t.seekMode===undefined?"ACCURATE":t.seekMode,this._keyLoadMaxRetry=t.keyLoadMaxRetry===undefined?3:t.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=t.keyLoadMaxRetryTimeout===undefined?64e3:t.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=t.fragmentLoadMaxRetry===undefined?3:t.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=t.fragmentLoadMaxRetryTimeout===undefined?4e3:t.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=t.fragmentLoadSkipAfterMaxRetry===undefined?!0:t.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=t.maxSkippedFragments===undefined?5:t.maxSkippedFragments,this._flushLiveURLCache=t.flushLiveURLCache===undefined?!1:t.flushLiveURLCache,this._initialLiveManifestSize=t.initialLiveManifestSize===undefined?1:t.initialLiveManifestSize,this._manifestLoadMaxRetry=t.manifestLoadMaxRetry===undefined?3:t.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=t.manifestLoadMaxRetryTimeout===undefined?64e3:t.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=t.manifestRedundantLoadmaxRetry===undefined?3:t.manifestRedundantLoadmaxRetry,this._startFromBitrate=t.startFromBitrate===undefined?-1:t.startFromBitrate,this._startFromLevel=t.startFromLevel===undefined?-1:t.startFromLevel,this._autoStartMaxDuration=t.autoStartMaxDuration===undefined?-1:t.autoStartMaxDuration,this._seekFromLevel=t.seekFromLevel===undefined?-1:t.seekFromLevel,this._useHardwareVideoDecoder=t.useHardwareVideoDecoder===undefined?!1:t.useHardwareVideoDecoder,this._hlsLogEnabled=t.hlsLogEnabled===undefined?!0:t.hlsLogEnabled,this._logDebug=t.logDebug===undefined?!1:t.logDebug,this._logDebug2=t.logDebug2===undefined?!1:t.logDebug2,this._logWarn=t.logWarn===undefined?!0:t.logWarn,this._logError=t.logError===undefined?!0:t.logError,this._hlsMinimumDvrSize=t.hlsMinimumDvrSize===undefined?60:t.hlsMinimumDvrSize},t.prototype._addListeners=function(){var t=this;w.default.on(this.cid+":flashready",function(){return t._bootstrap()}),w.default.on(this.cid+":timeupdate",function(e){return t._updateTime(e)}),w.default.on(this.cid+":playbackstate",function(e){return t._setPlaybackState(e)}),w.default.on(this.cid+":levelchanged",function(e){return t._levelChanged(e)}),w.default.on(this.cid+":error",function(e,n,r){return t._flashPlaybackError(e,n,r)}),w.default.on(this.cid+":fragmentloaded",function(e){return t._onFragmentLoaded(e)}),w.default.on(this.cid+":levelendlist",function(e){return t._onLevelEndlist(e)})},t.prototype.stopListening=function(){e.prototype.stopListening.call(this),w.default.off(this.cid+":flashready"),w.default.off(this.cid+":timeupdate"),w.default.off(this.cid+":playbackstate"),w.default.off(this.cid+":levelchanged"),w.default.off(this.cid+":playbackerror"),w.default.off(this.cid+":fragmentloaded"),w.default.off(this.cid+":manifestloaded"),w.default.off(this.cid+":levelendlist")},t.prototype._bootstrap=function(){var t=this;if(this.el.playerLoad)this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(d.default.PLAYBACK_READY,this.name);else{this._bootstrapAttempts=this._bootstrapAttempts||0;if(++this._bootstrapAttempts<=_)setTimeout(function(){return t._bootstrap()},50);else{var n=this.createError({code:"playerLoadFail_maxNumberAttemptsReached",description:this.name+" error: Max number of attempts reached",level:T.default.Levels.FATAL,raw:{}});this.trigger(d.default.PLAYBACK_ERROR,n)}}},t.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},t.prototype.setAutoStartLoad=function(t){this._autoStartLoad=t,this.el.playerSetAutoStartLoad(this._autoStartLoad)},t.prototype.setCapLevelToStage=function(t){this._capLevelToStage=t,this.el.playerSetCapLevelToStage(this._capLevelToStage)},t.prototype.setMaxLevelCappingMode=function(t){this._maxLevelCappingMode=t,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},t.prototype.setSetMinBufferLength=function(t){this._minBufferLength=t,this.el.playerSetMinBufferLength(this._minBufferLength)},t.prototype.setMinBufferLengthCapping=function(t){this._minBufferLengthCapping=t,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},t.prototype.setMaxBufferLength=function(t){this._maxBufferLength=t,this.el.playerSetMaxBufferLength(this._maxBufferLength)},t.prototype.setMaxBackBufferLength=function(t){this._maxBackBufferLength=t,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},t.prototype.setLowBufferLength=function(t){this._lowBufferLength=t,this.el.playerSetLowBufferLength(this._lowBufferLength)},t.prototype.setMediaTimePeriod=function(t){this._mediaTimePeriod=t,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},t.prototype.setFpsDroppedMonitoringPeriod=function(t){this._fpsDroppedMonitoringPeriod=t,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},t.prototype.setFpsDroppedMonitoringThreshold=function(t){this._fpsDroppedMonitoringThreshold=t,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},t.prototype.setCapLevelonFPSDrop=function(t){this._capLevelonFPSDrop=t,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},t.prototype.setSmoothAutoSwitchonFPSDrop=function(t){this._smoothAutoSwitchonFPSDrop=t,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},t.prototype.setSwitchDownOnLevelError=function(t){this._switchDownOnLevelError=t,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},t.prototype.setSeekMode=function(t){this._seekMode=t,this.el.playerSetSeekMode(this._seekMode)},t.prototype.setKeyLoadMaxRetry=function(t){this._keyLoadMaxRetry=t,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},t.prototype.setKeyLoadMaxRetryTimeout=function(t){this._keyLoadMaxRetryTimeout=t,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},t.prototype.setFragmentLoadMaxRetry=function(t){this._fragmentLoadMaxRetry=t,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},t.prototype.setFragmentLoadMaxRetryTimeout=function(t){this._fragmentLoadMaxRetryTimeout=t,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},t.prototype.setFragmentLoadSkipAfterMaxRetry=function(t){this._fragmentLoadSkipAfterMaxRetry=t,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},t.prototype.setMaxSkippedFragments=function(t){this._maxSkippedFragments=t,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},t.prototype.setFlushLiveURLCache=function(t){this._flushLiveURLCache=t,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},t.prototype.setInitialLiveManifestSize=function(t){this._initialLiveManifestSize=t,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},t.prototype.setManifestLoadMaxRetry=function(t){this._manifestLoadMaxRetry=t,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},t.prototype.setManifestLoadMaxRetryTimeout=function(t){this._manifestLoadMaxRetryTimeout=t,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},t.prototype.setManifestRedundantLoadmaxRetry=function(t){this._manifestRedundantLoadmaxRetry=t,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},t.prototype.setStartFromBitrate=function(t){this._startFromBitrate=t,this.el.playerSetStartFromBitrate(this._startFromBitrate)},t.prototype.setStartFromLevel=function(t){this._startFromLevel=t,this.el.playerSetStartFromLevel(this._startFromLevel)},t.prototype.setAutoStartMaxDuration=function(t){this._autoStartMaxDuration=t,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},t.prototype.setSeekFromLevel=function(t){this._seekFromLevel=t,this.el.playerSetSeekFromLevel(this._seekFromLevel)},t.prototype.setUseHardwareVideoDecoder=function(t){this._useHardwareVideoDecoder=t,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},t.prototype.setSetLogInfo=function(t){this._hlsLogEnabled=t,this.el.playerSetLogInfo(this._hlsLogEnabled)},t.prototype.setLogDebug=function(t){this._logDebug=t,this.el.playerSetLogDebug(this._logDebug)},t.prototype.setLogDebug2=function(t){this._logDebug2=t,this.el.playerSetLogDebug2(this._logDebug2)},t.prototype.setLogWarn=function(t){this._logWarn=t,this.el.playerSetLogWarn(this._logWarn)},t.prototype.setLogError=function(t){this._logError=t,this.el.playerSetLogError(this._logError)},t.prototype._levelChanged=function(t){var n=this.el.getLevels()[t];n&&(this.highDefinition=n.height>=720||n.bitrate/1e3>=2e3,this.trigger(d.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),(!this._levels||this._levels.length===0)&&this._fillLevels(),this.trigger(d.default.PLAYBACK_BITRATE,{height:n.height,width:n.width,bandwidth:n.bitrate,bitrate:n.bitrate,level:t}),this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_END))},t.prototype._updateTime=function(t){if(this._currentState==="IDLE")return;var n=this._normalizeDuration(t.duration),r=Math.min(Math.max(t.position,0),n),i=this._dvrEnabled,s=this._playbackType===y.default.LIVE;this._dvrEnabled=s&&n>this._hlsMinimumDvrSize;if(n===100||s===undefined)return;this._dvrEnabled!==i&&(this._updateSettings(),this.trigger(d.default.PLAYBACK_SETTINGSUPDATE,this.name)),s&&(!this._dvrEnabled||!this._dvrInUse)&&(r=n),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:r,total:n},this.name)},t.prototype.play=function(){this.trigger(d.default.PLAYBACK_PLAY_INTENT),this._currentState==="PAUSED"?this.el.playerResume():!this._srcLoaded&&this._currentState!=="PLAYING"?this._firstPlay():this.el.playerPlay()},t.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},t.prototype.getCurrentTime=function(){return this.el.getPosition()},t.prototype.getCurrentLevelIndex=function(){return this._currentLevel},t.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},t.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},t.prototype.setCurrentLevel=function(t){this.currentLevel=t},t.prototype.isHighDefinitionInUse=function(){return this.highDefinition},t.prototype.getLevels=function(){return this.levels},t.prototype._setPlaybackState=function(t){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(t)>=0?(this._bufferingState=!0,this.trigger(d.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(t)):["PLAYING","PAUSED"].indexOf(t)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(d.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(t)):t==="IDLE"&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(t),this._hasEnded=!0,this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(d.default.PLAYBACK_ENDED,this.name)))},t.prototype._updateCurrentState=function(t){this._currentState=t,t!=="IDLE"&&(this._hasEnded=!1),this._updatePlaybackType(),t==="PLAYING"?this.trigger(d.default.PLAYBACK_PLAY,this.name):t==="PAUSED"&&this.trigger(d.default.PLAYBACK_PAUSE,this.name)},t.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===y.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(d.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},t.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},t.prototype._stopReportingProgress=function(){this._reportingProgress=!1},t.prototype._onFragmentLoaded=function(t){this.trigger(d.default.PLAYBACK_FRAGMENT_LOADED,t);if(this._reportingProgress&&this.getCurrentTime()){var n=this.getCurrentTime()+this.el.getbufferLength();this.trigger(d.default.PLAYBACK_PROGRESS,{start:this.getCurrentTime(),current:n,total:this.el.getDuration()})}},t.prototype._onLevelEndlist=function(){this._updatePlaybackType()},t.prototype._firstPlay=function(){var t=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(w.default.once(this.cid+":manifestloaded",function(e,n){return t._manifestLoaded(e,n)}),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},t.prototype.volume=function(t){var n=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,d.default.PLAYBACK_BUFFERFULL,function(){return n.volume(t)})},t.prototype.pause=function(){if(this._playbackType!==y.default.LIVE||this._dvrEnabled)this.el.playerPause(),this._playbackType===y.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0)},t.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(d.default.PLAYBACK_STOP),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},t.prototype.isPlaying=function(){return this._currentState?!!this._currentState.match(/playing/i):!1},t.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},t.prototype._normalizeDuration=function(t){return this._playbackType===y.default.LIVE&&(t=Math.max(0,t-10)),t},t.prototype.seekPercentage=function(t){var n=this.el.getDuration(),r=0;t>0&&(r=n*t/100),this.seek(r)},t.prototype.seek=function(t){var n=this.getDuration();if(this._playbackType===y.default.LIVE){var r=n-t>3;this._updateDvr(r)}this.el.playerSeek(t),this.trigger(d.default.PLAYBACK_TIMEUPDATE,{current:t,total:n},this.name)},t.prototype._updateDvr=function(t){var n=!!this._dvrInUse;this._dvrInUse=t,this._dvrInUse!==n&&(this._updateSettings(),this.trigger(d.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(d.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},t.prototype._flashPlaybackError=function(t,n,r){var i={code:t,description:r,level:T.default.Levels.FATAL,raw:{code:t,url:n,message:r}},s=this.createError(i);this.trigger(d.default.PLAYBACK_ERROR,s),this.trigger(d.default.PLAYBACK_STOP)},t.prototype._manifestLoaded=function(t,n){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(d.default.PLAYBACK_LOADEDMETADATA,{duration:t,data:n})},t.prototype._fillLevels=function(){var t=this.el.getLevels(),n=t.length;this._levels=[];for(var r=0;r<n;r++)this._levels.push({id:r,label:t[r].height+"p",level:t[r]});this.trigger(d.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},t.prototype.destroy=function(){this.stopListening(),this.$el.remove()},t.prototype._updateSettings=function(){this.settings=O.default.extend({},this._defaultSettings),this._playbackType===y.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},t.prototype._createCallbacks=function(){var t=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new C.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(e,n){t.flashlsEvents[e].apply(t.flashlsEvents,n)}},t.prototype.render=function(){return e.prototype.render.call(this),this._createCallbacks(),this},(0,a.default)(t,[{key:"isReady",get:function(){return this._isReadyState}},{key:"dvrEnabled",get:function(){return!!this._dvrEnabled}}]),t}(h.default);t.default=P,P.canPlay=function(e,t){var n=e.split("?")[0].match(/.*\.(.*)$/)||[];return S.default.hasFlash&&(n.length>1&&n[1].toLowerCase()==="m3u8"||t==="application/x-mpegURL"||t==="application/vnd.apple.mpegurl")},e.exports=t["default"]},function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=u(r),s=n(28),o=u(s),a=function(){function e(t){(0,i.default)(this,e),this.instanceId=t}return e.prototype.ready=function(){o.default.trigger(this.instanceId+":flashready")},e.prototype.videoSize=function(t,n){o.default.trigger(this.instanceId+":videosizechanged",t,n)},e.prototype.complete=function(){o.default.trigger(this.instanceId+":complete")},e.prototype.error=function(t,n,r){o.default.trigger(this.instanceId+":error",t,n,r)},e.prototype.manifest=function(t,n){o.default.trigger(this.instanceId+":manifestloaded",t,n)},e.prototype.audioLevelLoaded=function(t){o.default.trigger(this.instanceId+":audiolevelloaded",t)},e.prototype.levelLoaded=function(t){o.default.trigger(this.instanceId+":levelloaded",t)},e.prototype.levelEndlist=function(t){o.default.trigger(this.instanceId+":levelendlist",t)},e.prototype.fragmentLoaded=function(t){o.default.trigger(this.instanceId+":fragmentloaded",t)},e.prototype.fragmentPlaying=function(t){o.default.trigger(this.instanceId+":fragmentplaying",t)},e.prototype.position=function(t){o.default.trigger(this.instanceId+":timeupdate",t)},e.prototype.state=function(t){o.default.trigger(this.instanceId+":playbackstate",t)},e.prototype.seekState=function(t){o.default.trigger(this.instanceId+":seekstate",t)},e.prototype.switch=function(t){o.default.trigger(this.instanceId+":levelchanged",t)},e.prototype.audioTracksListChange=function(t){o.default.trigger(this.instanceId+":audiotracklistchanged",t)},e.prototype.audioTrackChange=function(t){o.default.trigger(this.instanceId+":audiotrackchanged",t)},e}();t.default=a,e.exports=t["default"]},function(e,t){e.exports="<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"},function(e,t,n){"use strict";function L(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(63),i=L(r),s=n(80),o=L(s),u=n(0),a=L(u),f=n(1),l=L(f),c=n(3),h=L(c),p=n(2),d=L(p),v=n(41),m=L(v),g=n(194),y=L(g),b=n(4),w=L(b),E=n(10),S=L(E),x=n(5),T=n(32),N=L(T),C=n(23),k=L(C),A=-1,O=function(e){function t(){(0,a.default)(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=(0,l.default)(this,e.call.apply(e,[this].concat(r)));return s.options.playback||(s.options.playback=s.options),s._minDvrSize=typeof s.options.hlsMinimumDvrSize=="undefined"?60:s.options.hlsMinimumDvrSize,s._extrapolatedWindowNumSegments=!s.options.playback||typeof s.options.playback.extrapolatedWindowNumSegments=="undefined"?2:s.options.playback.extrapolatedWindowNumSegments,s._playbackType=S.default.VOD,s._lastTimeUpdate={current:0,total:0},s._lastDuration=null,s._playableRegionStartTime=0,s._localStartTimeCorrelation=null,s._localEndTimeCorrelation=null,s._playableRegionDuration=0,s._programDateTime=0,s._durationExcludesAfterLiveSyncPoint=!1,s._segmentTargetDuration=null,s._playlistType=null,s._recoverAttemptsRemaining=s.options.hlsRecoverAttempts||16,s}return(0,d.default)(t,e),(0,h.default)(t,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return this._currentLevel===null||this._currentLevel===undefined?A:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(w.default.PLAYBACK_LEVEL_SWITCH_START),this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===S.default.LIVE&&this._playlistType!=="EVENT"?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return(0,x.now)()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var t=this._localStartTimeCorrelation,n=this._now-t.local,r=(t.remote+n)/1e3;return Math.min(r,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var t=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return t;var n=this._localEndTimeCorrelation,r=this._now-n.local,i=(n.remote+r)/1e3;return Math.max(t-this._extrapolatedWindowDuration,Math.min(i,t))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return this._segmentTargetDuration===null?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return y.default}}]),t.prototype._setup=function(){var t=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new y.default((0,x.assign)({},this.options.playback.hlsjsConfig)),this._hls.on(y.default.Events.MEDIA_ATTACHED,function(){return t._hls.loadSource(t.options.src)}),this._hls.on(y.default.Events.LEVEL_LOADED,function(e,n){return t._updatePlaybackType(e,n)}),this._hls.on(y.default.Events.LEVEL_UPDATED,function(e,n){return t._onLevelUpdated(e,n)}),this._hls.on(y.default.Events.LEVEL_SWITCHING,function(e,n){return t._onLevelSwitch(e,n)}),this._hls.on(y.default.Events.FRAG_LOADED,function(e,n){return t._onFragmentLoaded(e,n)}),this._hls.on(y.default.Events.ERROR,function(e,n){return t._onHLSJSError(e,n)}),this._hls.on(y.default.Events.SUBTITLE_TRACK_LOADED,function(e,n){return t._onSubtitleLoaded(e,n)}),this._hls.on(y.default.Events.SUBTITLE_TRACKS_UPDATED,function(){return t._ccTracksUpdated=!0}),this._hls.attachMedia(this.el)},t.prototype.render=function(){return this._ready(),e.prototype.render.call(this)},t.prototype._ready=function(){this._isReadyState=!0,this.trigger(w.default.PLAYBACK_READY,this.name)},t.prototype._recover=function(t,n,r){if(!this._recoveredDecodingError)this._recoveredDecodingError=!0,this._hls.recoverMediaError();else if(!this._recoveredAudioCodecError)this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else{N.default.error("hlsjs: failed to recover",{evt:t,data:n}),r.level=k.default.Levels.FATAL;var i=this.createError(r);this.trigger(w.default.PLAYBACK_ERROR,i)}},t.prototype._setupSrc=function(t){},t.prototype._startTimeUpdateTimer=function(){var t=this;this._timeUpdateTimer=setInterval(function(){t._onDurationChange(),t._onTimeUpdate()},100)},t.prototype._stopTimeUpdateTimer=function(){clearInterval(this._timeUpdateTimer)},t.prototype.getProgramDateTime=function(){return this._programDateTime},t.prototype.getDuration=function(){return this._duration},t.prototype.getCurrentTime=function(){return Math.max(0,this.el.currentTime-this._startTime)},t.prototype.getStartTimeOffset=function(){return this._startTime},t.prototype.seekPercentage=function(t){var n=this._duration;t>0&&(n=this._duration*(t/100)),this.seek(n)},t.prototype.seek=function(n){n<0&&(N.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),n=this.getDuration()),this.dvrEnabled&&this._updateDvr(n<this.getDuration()-3),n+=this._startTime,e.prototype.seek.call(this,n)},t.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},t.prototype._updateDvr=function(t){this.trigger(w.default.PLAYBACK_DVR,t),this.trigger(w.default.PLAYBACK_STATS_ADD,{dvr:t})},t.prototype._updateSettings=function(){this._playbackType===S.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(w.default.PLAYBACK_SETTINGSUPDATE)},t.prototype._onHLSJSError=function(t,n){var r={code:n.type+"_"+n.details,description:this.name+" error: type: "+n.type+", details: "+n.details,raw:n},i=void 0;n.response&&(r.description+=", response: "+(0,o.default)(n.response));if(n.fatal)if(this._recoverAttemptsRemaining>0){this._recoverAttemptsRemaining-=1;switch(n.type){case y.default.ErrorTypes.NETWORK_ERROR:switch(n.details){case y.default.ErrorDetails.MANIFEST_LOAD_ERROR:case y.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case y.default.ErrorDetails.MANIFEST_PARSING_ERROR:case y.default.ErrorDetails.LEVEL_LOAD_ERROR:case y.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:N.default.error("hlsjs: unrecoverable network fatal error.",{evt:t,data:n}),i=this.createError(r),this.trigger(w.default.PLAYBACK_ERROR,i);break;default:N.default.warn("hlsjs: trying to recover from network error.",{evt:t,data:n}),r.level=k.default.Levels.WARN,this.createError(r),this._hls.startLoad()}break;case y.default.ErrorTypes.MEDIA_ERROR:N.default.warn("hlsjs: trying to recover from media error.",{evt:t,data:n}),r.level=k.default.Levels.WARN,this.createError(r),this._recover(t,n,r);break;default:N.default.error("hlsjs: could not recover from error.",{evt:t,data:n}),i=this.createError(r),this.trigger(w.default.PLAYBACK_ERROR,i)}}else N.default.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:t,data:n}),i=this.createError(r),this.trigger(w.default.PLAYBACK_ERROR,i);else r.level=k.default.Levels.WARN,this.createError(r),N.default.warn("hlsjs: non-fatal error occurred",{evt:t,data:n})},t.prototype._onTimeUpdate=function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()},n=this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total;if(n)return;this._lastTimeUpdate=t,this.trigger(w.default.PLAYBACK_TIMEUPDATE,t,this.name)},t.prototype._onDurationChange=function(){var n=this.getDuration();if(this._lastDuration===n)return;this._lastDuration=n,e.prototype._onDurationChange.call(this)},t.prototype._onProgress=function(){if(!this.el.buffered.length)return;var t=[],n=0;for(var r=0;r<this.el.buffered.length;r++)t=[].concat((0,i.default)(t),[{start:Math.max(0,this.el.buffered.start(r)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(r)-this._playableRegionStartTime)}]),this.el.currentTime>=t[r].start&&this.el.currentTime<=t[r].end&&(n=r);var s={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(w.default.PLAYBACK_PROGRESS,s,t)},t.prototype.play=function(){this._hls||this._setup(),e.prototype.play.call(this),this._startTimeUpdateTimer()},t.prototype.pause=function(){if(!this._hls)return;e.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0)},t.prototype.stop=function(){this._hls&&(e.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},t.prototype.destroy=function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),e.prototype.destroy.call(this)},t.prototype._updatePlaybackType=function(t,n){this._playbackType=n.details.live?S.default.LIVE:S.default.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===S.default.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()},t.prototype._fillLevels=function(){this._levels=this._hls.levels.map(function(e,t){return{id:t,level:e,label:e.bitrate/1e3+"Kbps"}}),this.trigger(w.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},t.prototype._onLevelUpdated=function(t,n){this._segmentTargetDuration=n.details.targetduration,this._playlistType=n.details.type||null;var r=!1,i=!1,s=n.details.fragments,o=this._playableRegionStartTime,u=this._playableRegionDuration;if(s.length===0)return;s[0].rawProgramDateTime&&(this._programDateTime=s[0].rawProgramDateTime),this._playableRegionStartTime!==s[0].start&&(r=!0,this._playableRegionStartTime=s[0].start);if(r)if(!this._localStartTimeCorrelation)this._localStartTimeCorrelation={local:this._now,remote:(s[0].start+this._extrapolatedWindowDuration/2)*1e3};else{var a=this._localStartTimeCorrelation,f=this._now-a.local,l=(a.remote+f)/1e3;l<s[0].start?this._localStartTimeCorrelation={local:this._now,remote:s[0].start*1e3}:l>o+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:Math.max(s[0].start,o+this._extrapolatedWindowDuration)*1e3})}var c=n.details.totalduration;if(this._playbackType===S.default.LIVE){var h=n.details.targetduration,p=this.options.playback.hlsjsConfig||{},d=p.liveSyncDurationCount||y.default.DefaultConfig.liveSyncDurationCount,v=h*d;v<=c?(c-=v,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}c!==this._playableRegionDuration&&(i=!0,this._playableRegionDuration=c);var m=s[0].start+c,g=o+u,b=m!==g;if(b)if(!this._localEndTimeCorrelation)this._localEndTimeCorrelation={local:this._now,remote:m*1e3};else{var w=this._localEndTimeCorrelation,E=this._now-w.local,x=(w.remote+E)/1e3;x>m?this._localEndTimeCorrelation={local:this._now,remote:m*1e3}:x<m-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:(m-this._extrapolatedWindowDuration)*1e3}:x>g&&(this._localEndTimeCorrelation={local:this._now,remote:g*1e3})}i&&this._onDurationChange(),r&&this._onProgress()},t.prototype._onFragmentLoaded=function(t,n){this.trigger(w.default.PLAYBACK_FRAGMENT_LOADED,n)},t.prototype._onSubtitleLoaded=function(){if(!this._ccIsSetup){this.trigger(w.default.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===S.default.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}},t.prototype._onLevelSwitch=function(t,n){this.levels.length||this._fillLevels(),this.trigger(w.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(w.default.PLAYBACK_LEVEL_SWITCH,n);var r=this._hls.levels[n.level];r&&(this.highDefinition=r.height>=720||r.bitrate/1e3>=2e3,this.trigger(w.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(w.default.PLAYBACK_BITRATE,{height:r.height,width:r.width,bandwidth:r.bitrate,bitrate:r.bitrate,level:n.level}))},t.prototype.getPlaybackType=function(){return this._playbackType},t.prototype.isSeekEnabled=function(){return this._playbackType===S.default.VOD||this.dvrEnabled},(0,h.default)(t,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===S.default.LIVE}}]),t}(m.default);t.default=O,O.canPlay=function(e,t){var n=e.split("?")[0].match(/.*\.(.*)$/)||[],r=n.length>1&&n[1].toLowerCase()==="m3u8"||t==="application/x-mpegURL"||t==="application/vnd.apple.mpegurl";return!!y.default.isSupported()&&!!r},e.exports=t["default"]},function(e,t,n){(function(r,i){e.exports=i()})(typeof self!="undefined"?self:this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=9)}([function(e,t,n){"use strict";function i(){}function u(e,t){return t="["+e+"] > "+t,t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=u(e,r[0])),t.apply(self.console,r)}:i}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){o[t]=e[t]?e[t].bind(e):a(t)})}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=s,l=function(t){if(t===!0||(typeof t=="undefined"?"undefined":r(t))==="object"){f(t,"debug","log","info","warn","error");try{o.log()}catch(n){o=s}}else o=s},c=o},function(e,t,n){"use strict";var r={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};t.a=r},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){(function(n){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(e,t,n){n=n||{},e=e.trim(),t=t.trim();if(!t){if(!n.alwaysNormalize)return e;var r=u.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=u.normalizePath(r.path),u.buildURLFromParts(r)}var s=u.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=u.normalizePath(s.path),u.buildURLFromParts(s)):t;var o=u.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&o.path[0]!=="/"){var a=i.exec(o.path);o.netLoc=a[1],o.path=a[2]}o.netLoc&&!o.path&&(o.path="/");var f={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc){f.netLoc=o.netLoc;if(s.path[0]!=="/")if(!s.path)f.path=o.path,s.params||(f.params=o.params,s.query||(f.query=o.query));else{var l=o.path,c=l.substring(0,l.lastIndexOf("/")+1)+s.path;f.path=u.normalizePath(c)}}return f.path===null&&(f.path=n.alwaysNormalize?u.normalizePath(s.path):s.path),u.buildURLFromParts(f)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(s,"");while(e.length!==(e=e.replace(o,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=u})(this)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"b",function(){return s});var i=function(){function e(){r(this,e)}return e.isHeader=function(t,n){return n+10<=t.length&&t[n]===73&&t[n+1]===68&&t[n+2]===51&&t[n+3]<255&&t[n+4]<255&&t[n+6]<128&&t[n+7]<128&&t[n+8]<128&&t[n+9]<128?!0:!1},e.isFooter=function(t,n){return n+10<=t.length&&t[n]===51&&t[n+1]===68&&t[n+2]===73&&t[n+3]<255&&t[n+4]<255&&t[n+6]<128&&t[n+7]<128&&t[n+8]<128&&t[n+9]<128?!0:!1},e.getID3Data=function(n,r){var i=r,s=0;while(e.isHeader(n,r)){s+=10;var o=e._readSize(n,r+6);s+=o,e.isFooter(n,r+10)&&(s+=10),r+=s}return s>0?n.subarray(i,i+s):undefined},e._readSize=function(t,n){var r=0;return r=(t[n]&127)<<21,r|=(t[n+1]&127)<<14,r|=(t[n+2]&127)<<7,r|=t[n+3]&127,r},e.getTimeStamp=function(n){var r=e.getID3Frames(n);for(var i=0;i<r.length;i++){var s=r[i];if(e.isTimeStampFrame(s))return e._readTimeStamp(s)}return undefined},e.isTimeStampFrame=function(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"},e._getFrameData=function(n){var r=String.fromCharCode(n[0],n[1],n[2],n[3]),i=e._readSize(n,4),s=10;return{type:r,size:i,data:n.subarray(s,s+i)}},e.getID3Frames=function(n){var r=0,i=[];while(e.isHeader(n,r)){var s=e._readSize(n,r+6);r+=10;var o=r+s;while(r+8<o){var u=e._getFrameData(n.subarray(r)),a=e._decodeFrame(u);a&&i.push(a),r+=u.size+10}e.isFooter(n,r)&&(r+=10)}return i},e._decodeFrame=function(n){return n.type==="PRIV"?e._decodePrivFrame(n):n.type[0]==="T"?e._decodeTextFrame(n):n.type[0]==="W"?e._decodeURLFrame(n):undefined},e._readTimeStamp=function(t){if(t.data.byteLength===8){var n=new Uint8Array(t.data),r=n[3]&1,i=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}return undefined},e._decodePrivFrame=function(n){if(n.size<2)return undefined;var r=e._utf8ArrayToStr(n.data,!0),i=new Uint8Array(n.data.subarray(r.length+1));return{key:n.type,info:r,data:i.buffer}},e._decodeTextFrame=function(n){if(n.size<2)return undefined;if(n.type==="TXXX"){var r=1,i=e._utf8ArrayToStr(n.data.subarray(r));r+=i.length+1;var s=e._utf8ArrayToStr(n.data.subarray(r));return{key:n.type,info:i,data:s}}var o=e._utf8ArrayToStr(n.data.subarray(1));return{key:n.type,data:o}},e._decodeURLFrame=function(n){if(n.type==="WXXX"){if(n.size<2)return undefined;var r=1,i=e._utf8ArrayToStr(n.data.subarray(r));r+=i.length+1;var s=e._utf8ArrayToStr(n.data.subarray(r));return{key:n.type,info:i,data:s}}var o=e._utf8ArrayToStr(n.data);return{key:n.type,data:o}},e._utf8ArrayToStr=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,r=t.length,i=void 0,s=void 0,o=void 0,u="",a=0;while(a<r){i=t[a++];if(i===0&&n)return u;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(i);break;case 12:case 13:s=t[a++],u+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=t[a++],o=t[a++],u+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0);break;default:}}return u},e}(),s=i._utf8ArrayToStr;t.a=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){var t=e.byteLength,n=t&&(new DataView(e)).getUint8(t-1);return n?e.slice(0,t-n):e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t,n){r(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(t,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,t)},e}(),s=i,u=function(){function e(t,n){o(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=u,c=function(){function e(){f(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(t){var n=new DataView(t),r=new Uint32Array(4);for(var i=0;i<4;i++)r[i]=n.getUint32(i*4);return r},e.prototype.initTable=function(){var t=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],s=r[1],o=r[2],u=r[3],a=this.invSubMix,f=a[0],l=a[1],c=a[2],h=a[3],p=new Uint32Array(256),d=0,v=0,m=0;for(m=0;m<256;m++)m<128?p[m]=m<<1:p[m]=m<<1^283;for(m=0;m<256;m++){var g=v^v<<1^v<<2^v<<3^v<<4;g=g>>>8^g&255^99,t[d]=g,n[g]=d;var y=p[d],b=p[y],w=p[b],E=p[g]*257^g*16843008;i[d]=E<<24|E>>>8,s[d]=E<<16|E>>>16,o[d]=E<<8|E>>>24,u[d]=E,E=w*16843009^b*65537^y*257^d*16843008,f[g]=E<<24|E>>>8,l[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,h[g]=E,d?(d=y^p[p[p[w^y]]],v^=p[p[v]]):d=v=1}},e.prototype.expandKey=function(t){var n=this.uint8ArrayToUint32Array_(t),r=!0,i=0;while(i<n.length&&r)r=n[i]===this.key[i],i++;if(r)return;this.key=n;var s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);var o=this.ksRows=(s+6+1)*4,u=void 0,a=void 0,f=this.keySchedule=new Uint32Array(o),l=this.invKeySchedule=new Uint32Array(o),c=this.sBox,h=this.rcon,p=this.invSubMix,d=p[0],v=p[1],m=p[2],g=p[3],y=void 0,b=void 0;for(u=0;u<o;u++){if(u<s){y=f[u]=n[u];continue}b=y,u%s===0?(b=b<<8|b>>>24,b=c[b>>>24]<<24|c[b>>>16&255]<<16|c[b>>>8&255]<<8|c[b&255],b^=h[u/s|0]<<24):s>6&&u%s===4&&(b=c[b>>>24]<<24|c[b>>>16&255]<<16|c[b>>>8&255]<<8|c[b&255]),f[u]=y=(f[u-s]^b)>>>0}for(a=0;a<o;a++)u=o-a,a&3?b=f[u]:b=f[u-4],a<4||u<=4?l[a]=b:l[a]=d[c[b>>>24]]^v[c[b>>>16&255]]^m[c[b>>>8&255]]^g[c[b&255]],l[a]=l[a]>>>0},e.prototype.networkToHostOrderSwap=function(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24},e.prototype.decrypt=function(t,n,r,i){var s=this.keySize+6,o=this.invKeySchedule,u=this.invSBox,a=this.invSubMix,f=a[0],c=a[1],h=a[2],p=a[3],d=this.uint8ArrayToUint32Array_(r),v=d[0],m=d[1],g=d[2],y=d[3],b=new Int32Array(t),w=new Int32Array(b.length),E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=void 0,O=void 0,M=void 0,_=void 0,D=void 0,P=void 0,H=this.networkToHostOrderSwap;while(n<b.length){A=H(b[n]),O=H(b[n+1]),M=H(b[n+2]),_=H(b[n+3]),N=A^o[0],C=_^o[1],k=M^o[2],L=O^o[3],D=4;for(P=1;P<s;P++)E=f[N>>>24]^c[C>>16&255]^h[k>>8&255]^p[L&255]^o[D],S=f[C>>>24]^c[k>>16&255]^h[L>>8&255]^p[N&255]^o[D+1],x=f[k>>>24]^c[L>>16&255]^h[N>>8&255]^p[C&255]^o[D+2],T=f[L>>>24]^c[N>>16&255]^h[C>>8&255]^p[k&255]^o[D+3],N=E,C=S,k=x,L=T,D+=4;E=u[N>>>24]<<24^u[C>>16&255]<<16^u[k>>8&255]<<8^u[L&255]^o[D],S=u[C>>>24]<<24^u[k>>16&255]<<16^u[L>>8&255]<<8^u[N&255]^o[D+1],x=u[k>>>24]<<24^u[L>>16&255]<<16^u[N>>8&255]<<8^u[C&255]^o[D+2],T=u[L>>>24]<<24^u[N>>16&255]<<16^u[C>>8&255]<<8^u[k&255]^o[D+3],D+=3,w[n]=H(E^v),w[n+1]=H(T^m),w[n+2]=H(x^g),w[n+3]=H(S^y),v=A,m=O,g=M,y=_,n+=4}return i?l(w.buffer):w.buffer},e.prototype.destroy=function(){this.key=undefined,this.keySize=undefined,this.ksRows=undefined,this.sBox=undefined,this.invSBox=undefined,this.subMix=undefined,this.invSubMix=undefined,this.keySchedule=undefined,this.invKeySchedule=undefined,this.rcon=undefined},e}(),h=c,p=n(2),d=n(0),m=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=r.removePKCS7Padding,s=i===undefined?!0:i;v(this,e),this.logEnabled=!0,this.observer=t,this.config=n,this.removePKCS7Padding=s;if(s)try{var o=crypto||self.crypto;this.subtle=o.subtle||o.webkitSubtle}catch(u){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(t,n,r,i){var o=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.b.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new h),u.expandKey(n),i(u.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(d.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var f=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new a(f,n)),this.fastAesKey.expandKey().then(function(e){var u=new s(f,r);u.decrypt(t,e).catch(function(e){o.onWebCryptoError(e,t,n,r,i)}).then(function(e){i(e)})}).catch(function(e){o.onWebCryptoError(e,t,n,r,i)})}},e.prototype.onWebCryptoError=function(t,n,r,i,s){this.config.enableSoftwareAES?(d.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(n,r,i,s)):(d.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:p.b.MEDIA_ERROR,details:p.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=undefined)},e}(),g=t.a=m},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function r(e){return typeof e=="function"}function i(e){return typeof e=="number"}function s(e){return typeof e=="object"&&e!==null}function o(e){return e===void 0}e.exports=n,n.EventEmitter=n,n.prototype._events=undefined,n.prototype._maxListeners=undefined,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,a,f;this._events||(this._events={});if(e==="error")if(!this._events.error||s(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}n=this._events[e];if(o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(s(n)){u=Array.prototype.slice.call(arguments,1),f=n.slice(),i=f.length;for(a=0;a<i;a++)f[a].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(o(this._maxListeners)?i=n.defaultMaxListeners:i=this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e],o=n.length,i=-1;if(n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(i<0)return this;n.length===1?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}n=this._events[e];if(r(n))this.removeListener(e,n);else if(n)while(n.length)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:r(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),i=n(1),o=Math.pow(2,32)-1,u=function(){function e(t,n){s(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(t){this.initPTS=t},e.prototype.resetInitSegment=function(n,r,s,o){if(n&&n.byteLength){var u=this.initData=e.parseInitSegment(n);r==null&&(r="mp4a.40.5"),s==null&&(s="avc1.42e01e");var a={};u.audio&&u.video?a.audiovideo={container:"video/mp4",codec:r+","+s,initSegment:o?n:null}:(u.audio&&(a.audio={container:"audio/mp4",codec:r,initSegment:o?n:null}),u.video&&(a.video={container:"video/mp4",codec:s,initSegment:o?n:null})),this.observer.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else r&&(this.audioCodec=r),s&&(this.videoCodec=s)},e.probe=function(n){return e.findBox({data:n,start:0,end:Math.min(n.length,16384)},["moof"]).length>0},e.bin2str=function(t){return String.fromCharCode.apply(null,t)},e.readUint16=function(t,n){t.data&&(n+=t.start,t=t.data);var r=t[n]<<8|t[n+1];return r<0?65536+r:r},e.readUint32=function(t,n){t.data&&(n+=t.start,t=t.data);var r=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3];return r<0?4294967296+r:r},e.writeUint32=function(t,n,r){t.data&&(n+=t.start,t=t.data),t[n]=r>>24,t[n+1]=r>>16&255,t[n+2]=r>>8&255,t[n+3]=r&255},e.findBox=function(n,r){var i=[],s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0;n.data?(l=n.start,a=n.end,n=n.data):(l=0,a=n.byteLength);if(!r.length)return null;for(s=l;s<a;)o=e.readUint32(n,s),u=e.bin2str(n.subarray(s+4,s+8)),c=o>1?s+o:a,u===r[0]&&(r.length===1?i.push({data:n,start:s+8,end:c}):(f=e.findBox({data:n,start:s+8,end:c},r.slice(1)),f.length&&(i=i.concat(f)))),s=c;return i},e.parseSegmentIndex=function(n){var r=e.findBox(n,["moov"])[0],i=r?r.end:null,s=0,o=e.findBox(n,["sidx"]),u=void 0;if(!o||!o[0])return null;u=[],o=o[0];var a=o.data[0];s=a===0?8:16;var f=e.readUint32(o,s);s+=4;var l=0,c=0;a===0?s+=8:s+=16,s+=2;var h=o.end+c,p=e.readUint16(o,s);s+=2;for(var d=0;d<p;d++){var v=s,m=e.readUint32(o,v);v+=4;var g=m&2147483647,y=(m&2147483648)>>>31;if(y===1){console.warn("SIDX has hierarchical references (not supported)");return}var b=e.readUint32(o,v);v+=4,u.push({referenceSize:g,subsegmentDuration:b,info:{duration:b/f,start:h,end:h+g-1}}),h+=g,v+=4,s=v}return{earliestPresentationTime:l,timescale:f,version:a,referencesCount:p,references:u,moovEndOffset:i}},e.parseInitSegment=function(n){var i=[],s=e.findBox(n,["moov","trak"]);return s.forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var s=n.data[n.start],o=s===0?12:20,u=e.readUint32(n,o),a=e.findBox(t,["mdia","mdhd"])[0];if(a){s=a.data[a.start],o=s===0?12:20;var f=e.readUint32(a,o),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var c=e.bin2str(l.data.subarray(l.start+8,l.start+12)),h={soun:"audio",vide:"video"}[c];if(h){var p=e.findBox(t,["mdia","minf","stbl","stsd"]);if(p.length){p=p[0];var d=e.bin2str(p.data.subarray(p.start+12,p.start+16));r.b.log("MP4Demuxer:"+h+":"+d+" found")}i[u]={timescale:f,type:h},i[h]={timescale:f,id:u}}}}}}),i},e.getStartDTS=function(n,r){var i=void 0,s=void 0,o=void 0;return i=e.findBox(r,["moof","traf"]),s=[].concat.apply([],i.map(function(t){return e.findBox(t,["tfhd"]).map(function(r){var i=void 0,s=void 0,o=void 0;return i=e.readUint32(r,4),s=n[i].timescale||9e4,o=e.findBox(t,["tfdt"]).map(function(t){var n=void 0,r=void 0;return n=t.data[t.start],r=e.readUint32(t,4),n===1&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0],o/s})})),o=Math.min.apply(null,s),isFinite(o)?o:0},e.offsetStartDTS=function(n,r,i){e.findBox(r,["moof","traf"]).map(function(t){return e.findBox(t,["tfhd"]).map(function(r){var s=e.readUint32(r,4),u=n[s].timescale||9e4;e.findBox(t,["tfdt"]).map(function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(n===0)e.writeUint32(t,4,r-i*u);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*u,r=Math.max(r,0);var s=Math.floor(r/(o+1)),a=Math.floor(r%(o+1));e.writeUint32(t,4,s),e.writeUint32(t,8,a)}})})})},e.prototype.append=function(n,r,s,o){var u=this.initData;u||(this.resetInitSegment(n,this.audioCodec,this.videoCodec,!1),u=this.initData);var a=void 0,f=this.initPTS;if(f===undefined){var l=e.getStartDTS(u,n);this.initPTS=f=l-r,this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:f})}e.offsetStartDTS(u,n,f),a=e.getStartDTS(u,n),this.remuxer.remux(u.audio,u.video,null,null,a,s,o,n)},e.prototype.destroy=function(){},e}();t.a=u},function(e,t,n){"use strict";function u(e,t,n,r){var s=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=navigator.userAgent.toLowerCase(),h=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((t[n+2]&192)>>>6)+1,u=(t[n+2]&60)>>>2;if(u>p.length-1){e.trigger(Event.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u});return}f=(t[n+2]&1)<<2,f|=(t[n+3]&192)>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+s+",sampleingIndex:"+u+"["+p[u]+"Hz],channelConfig:"+f);if(/firefox/i.test(c))u>=6?(s=5,l=new Array(4),a=u-3):(s=2,l=new Array(2),a=u);else if(c.indexOf("android")!==-1)s=2,l=new Array(2),a=u;else{s=5,l=new Array(4);if(r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&u>=6)a=u-3;else{if(r&&r.indexOf("mp4a.40.2")!==-1&&(u>=6&&f===1||/vivaldi/i.test(c))||!r&&f===1)s=2,l=new Array(2);a=u}}return l[0]=s<<3,l[0]|=(u&14)>>1,l[1]|=(u&1)<<7,l[1]|=f<<3,s===5&&(l[1]|=(a&14)>>1,l[2]=(a&1)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:p[u],channelCount:f,codec:"mp4a.40."+s,manifestCodec:h}}function a(e,t){return e[t]===255&&(e[t+1]&246)===240}function f(e,t){return e[t+1]&1?7:9}function l(e,t){return(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5}function c(e,t){return t+1<e.length&&a(e,t)?!0:!1}function h(e,t){if(t+1<e.length&&a(e,t)){var n=f(e,t),r=n;t+5<e.length&&(r=l(e,t));var i=t+r;if(i===e.length||i+1<e.length&&a(e,i))return!0}return!1}function p(e,t,n,r,i){if(!e.samplerate){var s=u(t,n,r,i);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,o.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function d(e){return 9216e4/e}function v(e,t,n,r,i){var s=void 0,o=void 0,u=void 0,a=e.length;return s=f(e,t),o=l(e,t),o-=s,o>0&&t+s+o<=a?(u=n+r*i,{headerLength:s,frameLength:o,stamp:u}):undefined}function m(e,t,n,r,i){var s=d(e.samplerate),o=v(t,n,r,i,s);if(o){var u=o.stamp,a=o.headerLength,f=o.frameLength,l={unit:t.subarray(n+a,n+a+f),pts:u,dts:u};return e.samples.push(l),e.len+=f,{sample:l,length:f+a}}return undefined}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(1),i=n(2),s=n(5),o=n(0),g=n(4),b=function(){function e(t,n,r){y(this,e),this.observer=t,this.config=r,this.remuxer=n}return e.prototype.resetInitSegment=function(t,n,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:n,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(t){if(!t)return!1;var n=g.a.getID3Data(t,0)||[],r=n.length;for(var i=t.length;r<i;r++)if(h(t,r))return o.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(t,n,r,i){var s=this._audioTrack,u=g.a.getID3Data(t,0)||[],a=g.a.getTimeStamp(u),f=a?90*a:n*9e4,l=0,h=f,d=t.length,v=u.length,y=[{pts:h,dts:h,data:u}];while(v<d-1)if(c(t,v)&&v+5<d){p(s,this.observer,t,v,s.manifestCodec);var b=m(s,t,v,f,l);if(!b){o.b.log("Unable to parse AAC frame");break}v+=b.length,h=b.sample.pts,l++}else g.a.isHeader(t,v)?(u=g.a.getID3Data(t,v),y.push({pts:h,dts:h,data:u}),v+=u.length):v++;this.remuxer.remux(s,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},n,r,i)},e.prototype.destroy=function(){},e}(),w=b,E=n(7),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,n,r,i,s){if(r+24>n.length)return undefined;var o=this.parseHeader(n,r);if(o&&r+o.frameLength<=n.length){var u=o.samplesPerFrame*9e4/o.sampleRate,a=i+s*u,f={unit:n.subarray(r,r+o.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(f),t.len+=o.frameLength,{sample:f,length:o.frameLength}}return undefined},parseHeader:function(t,n){var r=t[n+1]>>3&3,i=t[n+1]>>1&3,s=t[n+2]>>4&15,o=t[n+2]>>2&3,u=t[n+2]>>1&1;if(r!==1&&s!==0&&s!==15&&o!==3){var a=r===3?3-i:i===3?3:4,f=S.BitratesMap[a*14+s-1]*1e3,l=r===3?0:r===2?1:2,c=S.SamplingRateMap[l*3+o],h=t[n+3]>>6===3?1:2,p=S.SamplesCoefficients[r][i],d=S.BytesInSlot[i],v=p*8*d,m=parseInt(p*f/c+u,10)*d;return{sampleRate:c,channelCount:h,frameLength:m,samplesPerFrame:v}}return undefined},isHeaderPattern:function(t,n){return t[n]===255&&(t[n+1]&224)===224&&(t[n+1]&6)!==0},isHeader:function(t,n){return n+1<t.length&&this.isHeaderPattern(t,n)?!0:!1},probe:function(t,n){if(n+1<t.length&&this.isHeaderPattern(t,n)){var r=4,i=this.parseHeader(t,n),s=r;i&&i.frameLength&&(s=i.frameLength);var o=n+s;if(o===t.length||o+1<t.length&&this.isHeaderPattern(t,o))return!0}return!1}},x=S,N=function(){function e(t){T(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var t=this.data,n=this.bytesAvailable,r=t.byteLength-n,i=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");i.set(t.subarray(r,r+s)),this.word=(new DataView(i.buffer)).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s},e.prototype.skipBits=function(t){var n=void 0;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,n=t>>3,t-=n>>3,this.bytesAvailable-=n,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.prototype.readBits=function(t){var n=Math.min(this.bitsAvailable,t),r=this.word>>>32-n;return t>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0?this.word<<=n:this.bytesAvailable>0&&this.loadWord(),n=t-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r},e.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if((this.word&2147483648>>>t)!==0)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.prototype.readBoolean=function(){return this.readBits(1)===1},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(t){var n=8,r=8,i=void 0,s=void 0;for(i=0;i<t;i++)r!==0&&(s=this.readEG(),r=(n+s+256)%256),n=r===0?n:r},e.prototype.readSPS=function(){var t=0,n=0,r=0,i=0,s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0,p=void 0,d=this.readUByte.bind(this),v=this.readBits.bind(this),m=this.readUEG.bind(this),g=this.readBoolean.bind(this),y=this.skipBits.bind(this),b=this.skipEG.bind(this),w=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);d(),s=d(),o=v(5),y(3),u=d(),w();if(s===100||s===110||s===122||s===244||s===44||s===83||s===86||s===118||s===128){var S=m();S===3&&y(1),w(),w(),y(1);if(g()){h=S!==3?8:12;for(p=0;p<h;p++)g()&&(p<6?E(16):E(64))}}w();var x=m();if(x===0)m();else if(x===1){y(1),b(),b(),a=m();for(p=0;p<a;p++)b()}w(),y(1),f=m(),l=m(),c=v(1),c===0&&y(1),y(1),g()&&(t=m(),n=m(),r=m(),i=m());var T=[1,1];if(g()&&g()){var N=d();switch(N){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[d()<<8|d(),d()<<8|d()]}}return{width:Math.ceil((f+1)*16-t*2-n*2),height:(2-c)*(l+1)*16-(c?2:4)*(r+i),pixelRatio:T}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),C=N,L=function(){function e(t,n,r,i){k(this,e),this.decryptdata=r,this.discardEPB=i,this.decrypter=new s.a(t,n,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(t,n){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,n)},e.prototype.decryptAacSample=function(t,n,r,i){var s=t[n].unit,o=s.subarray(16,s.length-s.length%16),u=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),a=this;this.decryptBuffer(u,function(e){e=new Uint8Array(e),s.set(e,16),i||a.decryptAacSamples(t,n+1,r)})},e.prototype.decryptAacSamples=function(t,n,r){for(;;n++){if(n>=t.length){r();return}if(t[n].unit.length<32)continue;var i=this.decrypter.isSync();this.decryptAacSample(t,n,r,i);if(!i)return}},e.prototype.getAvcEncryptedData=function(t){var n=Math.floor((t.length-48)/160)*16+16,r=new Int8Array(n),i=0;for(var s=32;s<=t.length-16;s+=160,i+=16)r.set(t.subarray(s,s+16),i);return r},e.prototype.getAvcDecryptedUnit=function(t,n){n=new Uint8Array(n);var r=0;for(var i=32;i<=t.length-16;i+=160,r+=16)t.set(n.subarray(r,r+16),i);return t},e.prototype.decryptAvcSample=function(t,n,r,i,s,o){var u=this.discardEPB(s.data),a=this.getAvcEncryptedData(u),f=this;this.decryptBuffer(a.buffer,function(e){s.data=f.getAvcDecryptedUnit(u,e),o||f.decryptAvcSamples(t,n,r+1,i)})},e.prototype.decryptAvcSamples=function(t,n,r,i){for(;;n++,r=0){if(n>=t.length){i();return}var s=t[n].units;for(;;r++){if(r>=s.length)break;var o=s[r];if(o.length<=48||o.type!==1&&o.type!==5)continue;var u=this.decrypter.isSync();this.decryptAvcSample(t,n,r,i,o,u);if(!u)return}}},e}(),A=L,M={video:0,audio:1,id3:2,text:3},_=function(){function e(t,n,r,i){O(this,e),this.observer=t,this.config=r,this.typeSupported=i,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(t){t!=null&&t.key!=null&&t.method==="SAMPLE-AES"?this.sampleAes=new A(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},e.probe=function(n){var r=e._syncOffset(n);return r<0?!1:(r&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(t){var n=Math.min(1e3,t.length-564),r=0;while(r<n){if(t[r]===71&&t[r+188]===71&&t[r+376]===71)return r;r++}return-1},e.createTrack=function(t,n){return{container:t==="video"||t==="audio"?"video/mp2t":undefined,type:t,id:M[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:t==="video"?0:undefined,isAAC:t==="audio"?!0:undefined,duration:t==="audio"?n:undefined}},e.prototype.resetInitSegment=function(n,r,i,s){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",s),this._audioTrack=e.createTrack("audio",s),this._id3Track=e.createTrack("id3",s),this._txtTrack=e.createTrack("text",s),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=s},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(n,s,u,a){var f=void 0,l=n.length,c=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=!1;this.contiguous=u;var g=this.pmtParsed,y=this._avcTrack,b=this._audioTrack,w=this._id3Track,E=y.pid,S=b.pid,x=w.pid,T=this._pmtId,N=y.pesData,C=b.pesData,k=w.pesData,L=this._parsePAT,A=this._parsePMT,O=this._parsePES,M=this._parseAVCPES.bind(this),_=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),H=e._syncOffset(n);l-=(l+H)%188;for(f=H;f<l;f+=188)if(n[f]===71){c=!!(n[f+1]&64),h=((n[f+1]&31)<<8)+n[f+2],p=(n[f+3]&48)>>4;if(p>1){d=f+5+n[f+4];if(d===f+188)continue}else d=f+4;switch(h){case E:c&&(N&&(v=O(N))&&v.pts!==undefined&&M(v,!1),N={data:[],size:0}),N&&(N.data.push(n.subarray(d,f+188)),N.size+=f+188-d);break;case S:c&&(C&&(v=O(C))&&v.pts!==undefined&&(b.isAAC?_(v):D(v)),C={data:[],size:0}),C&&(C.data.push(n.subarray(d,f+188)),C.size+=f+188-d);break;case x:c&&(k&&(v=O(k))&&v.pts!==undefined&&P(v),k={data:[],size:0}),k&&(k.data.push(n.subarray(d,f+188)),k.size+=f+188-d);break;case 0:c&&(d+=n[d]+1),T=this._pmtId=L(n,d);break;case T:c&&(d+=n[d]+1);var B=A(n,d,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);E=B.avc,E>0&&(y.pid=E),S=B.audio,S>0&&(b.pid=S,b.isAAC=B.isAAC),x=B.id3,x>0&&(w.pid=x),m&&!g&&(o.b.log("reparse from beginning"),m=!1,f=H-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=!0}}else this.observer.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});N&&(v=O(N))&&v.pts!==undefined?(M(v,!0),y.pesData=null):y.pesData=N,C&&(v=O(C))&&v.pts!==undefined?(b.isAAC?_(v):D(v),b.pesData=null):(C&&C.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),b.pesData=C),k&&(v=O(k))&&v.pts!==undefined?(P(v),w.pesData=null):w.pesData=k,this.sampleAes==null?this.remuxer.remux(b,y,w,this._txtTrack,s,u,a):this.decryptAndRemux(b,y,w,this._txtTrack,s,u,a)},e.prototype.decryptAndRemux=function(t,n,r,i,s,o,u){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,n,r,i,s,o,u)})}else this.decryptAndRemuxAvc(t,n,r,i,s,o,u)},e.prototype.decryptAndRemuxAvc=function(t,n,r,i,s,o,u){if(n.samples){var a=this;this.sampleAes.decryptAvcSamples(n.samples,0,0,function(){a.remuxer.remux(t,n,r,i,s,o,u)})}else this.remuxer.remux(t,n,r,i,s,o,u)},e.prototype.destroy=function(){this._initPTS=this._initDTS=undefined,this._duration=0},e.prototype._parsePAT=function(t,n){return(t[n+10]&31)<<8|t[n+11]},e.prototype._parsePMT=function(t,n,r,i){var s=void 0,u=void 0,a=void 0,f=void 0,l={audio:-1,avc:-1,id3:-1,isAAC:!0};s=(t[n+1]&15)<<8|t[n+2],u=n+3+s-4,a=(t[n+10]&15)<<8|t[n+11],n+=12+a;while(n<u){f=(t[n+1]&31)<<8|t[n+2];switch(t[n]){case 207:if(!i){o.b.log("unkown stream type:"+t[n]);break};case 15:l.audio===-1&&(l.audio=f);break;case 21:l.id3===-1&&(l.id3=f);break;case 219:if(!i){o.b.log("unkown stream type:"+t[n]);break};case 27:l.avc===-1&&(l.avc=f);break;case 3:case 4:r?l.audio===-1&&(l.audio=f,l.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unkown stream type:"+t[n])}n+=((t[n+3]&15)<<8|t[n+4])+5}return l},e.prototype._parsePES=function(t){var n=0,r=void 0,i=void 0,s=void 0,u=void 0,a=void 0,f=void 0,l=void 0,c=void 0,h=void 0,p=t.data;if(!t||t.size===0)return null;while(p[0].length<19&&p.length>1){var d=new Uint8Array(p[0].length+p[1].length);d.set(p[0]),d.set(p[1],p[0].length),p[0]=d,p.splice(1,1)}r=p[0],s=(r[0]<<16)+(r[1]<<8)+r[2];if(s===1){u=(r[4]<<8)+r[5];if(u&&u>t.size-6)return null;i=r[7],i&192&&(l=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,l>4294967295&&(l-=8589934592),i&64?(c=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,c>4294967295&&(c-=8589934592),l-c>54e5&&(o.b.warn(Math.round((l-c)/9e4)+"s delta between PTS and DTS, align them"),l=c)):c=l),a=r[8],h=a+9,t.size-=h,f=new Uint8Array(t.size);for(var v=0,m=p.length;v<m;v++){r=p[v];var g=r.byteLength;if(h){if(h>g){h-=g;continue}r=r.subarray(h),g-=h,h=0}f.set(r,n),n+=g}return u&&(u-=a+3),{data:f,pts:l,dts:c,len:u}}return null},e.prototype.pushAccesUnit=function(t,n){if(t.units.length&&t.frame){var r=n.samples,i=r.length;!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||n.sps&&(i||this.contiguous)?(t.id=i,r.push(t)):n.dropped++}t.debug.length&&o.b.log(t.pts+"/"+t.dts+":"+t.debug)},e.prototype._parseAVCPES=function(t,n){var r=this,i=this._avcTrack,s=this._parseAVCNALu(t.data),o=!1,u=void 0,a=this.avcSample,f=void 0,l=!1,c=void 0,h=this.pushAccesUnit.bind(this),p=function(t,n,r,i){return{key:t,pts:n,dts:r,units:[],debug:i}};t.data=null,a&&s.length&&!i.audFound&&(h(a,i),a=this.avcSample=p(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:f=!0,a||(a=r.avcSample=p(!0,t.pts,t.dts,"")),o&&(a.debug+="NDR "),a.frame=!0;var n=e.data;if(l&&n.length>4){var s=(new C(n)).readSliceType();if(s===2||s===4||s===7||s===9)a.key=!0}break;case 5:f=!0,a||(a=r.avcSample=p(!0,t.pts,t.dts,"")),o&&(a.debug+="IDR "),a.key=!0,a.frame=!0;break;case 6:f=!0,o&&a&&(a.debug+="SEI "),u=new C(r.discardEPB(e.data)),u.readUByte();var d=0,v=0,m=!1,g=0;while(!m&&u.bytesAvailable>1){d=0;do g=u.readUByte(),d+=g;while(g===255);v=0;do g=u.readUByte(),v+=g;while(g===255);if(d===4&&u.bytesAvailable!==0){m=!0;var y=u.readUByte();if(y===181){var b=u.readUShort();if(b===49){var w=u.readUInt();if(w===1195456820){var E=u.readUByte();if(E===3){var S=u.readUByte(),x=u.readUByte(),T=31&S,N=[S,x];for(c=0;c<T;c++)N.push(u.readUByte()),N.push(u.readUByte()),N.push(u.readUByte());r._insertSampleInOrder(r._txtTrack.samples,{type:3,pts:t.pts,bytes:N})}}}}}else if(v<u.bytesAvailable)for(c=0;c<v;c++)u.readUByte()}break;case 7:f=!0,l=!0,o&&a&&(a.debug+="SPS ");if(!i.sps){u=new C(e.data);var k=u.readSPS();i.width=k.width,i.height=k.height,i.pixelRatio=k.pixelRatio,i.sps=[e.data],i.duration=r._duration;var L=e.data.subarray(1,4),A="avc1.";for(c=0;c<3;c++){var O=L[c].toString(16);O.length<2&&(O="0"+O),A+=O}i.codec=A}break;case 8:f=!0,o&&a&&(a.debug+="PPS "),i.pps||(i.pps=[e.data]);break;case 9:f=!1,i.audFound=!0,a&&h(a,i),a=r.avcSample=p(!1,t.pts,t.dts,o?"AUD ":"");break;case 12:f=!1;break;default:f=!1,a&&(a.debug+="unknown NAL "+e.type+" ")}if(a&&f){var M=a.units;M.push(e)}}),n&&a&&(h(a,i),this.avcSample=null)},e.prototype._insertSampleInOrder=function(t,n){var r=t.length;if(r>0){if(n.pts>=t[r-1].pts)t.push(n);else for(var i=r-1;i>=0;i--)if(n.pts<t[i].pts){t.splice(i,0,n);break}}else t.push(n)},e.prototype._getLastNalUnit=function(){var t=this.avcSample,n=void 0;if(!t||t.units.length===0){var r=this._avcTrack,i=r.samples;t=i[i.length-1]}if(t){var s=t.units;n=s[s.length-1]}return n},e.prototype._parseAVCNALu=function(t){var n=0,r=t.byteLength,i=void 0,s=void 0,o=this._avcTrack,u=o.naluState||0,a=u,f=[],l=void 0,c=void 0,h=-1,p=void 0;u===-1&&(h=0,p=t[0]&31,u=0,n=1);while(n<r){i=t[n++];if(!u){u=i?0:1;continue}if(u===1){u=i?0:2;continue}if(!i)u=3;else if(i===1){if(h>=0)l={data:t.subarray(h,n-u-1),type:p},f.push(l);else{var d=this._getLastNalUnit();if(d){a&&n<=4-a&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-a)),s=n-u-1;if(s>0){var v=new Uint8Array(d.data.byteLength+s);v.set(d.data,0),v.set(t.subarray(0,s),d.data.byteLength),d.data=v}}}n<r?(c=t[n]&31,h=n,p=c,u=0):u=-1}else u=0}h>=0&&u>=0&&(l={data:t.subarray(h,r),type:p,state:u},f.push(l));if(f.length===0){var m=this._getLastNalUnit();if(m){var g=new Uint8Array(m.data.byteLength+t.byteLength);g.set(m.data,0),g.set(t,m.data.byteLength),m.data=g}}return o.naluState=u,f},e.prototype.discardEPB=function(t){var n=t.byteLength,r=[],i=1,s=void 0,o=void 0;while(i<n-2)t[i]===0&&t[i+1]===0&&t[i+2]===3?(r.push(i+2),i+=2):i++;if(r.length===0)return t;s=n-r.length,o=new Uint8Array(s);var u=0;for(i=0;i<s;u++,i++)u===r[0]&&(u++,r.shift()),o[i]=t[u];return o},e.prototype._parseAACPES=function(t){var n=this._audioTrack,s=t.data,u=t.pts,a=0,f=this.aacOverFlow,l=this.aacLastPTS,h=void 0,v=void 0,g=void 0,y=void 0,b=void 0;if(f){var w=new Uint8Array(f.byteLength+s.byteLength);w.set(f,0),w.set(s,f.byteLength),s=w}for(g=a,b=s.length;g<b-1;g++)if(c(s,g))break;if(g){var E=void 0,S=void 0;g<b-1?(E="AAC PES did not start with ADTS header,offset:"+g,S=!1):(E="no ADTS header found in AAC PES",S=!0),o.b.warn("parsing error:"+E),this.observer.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:S,reason:E});if(S)return}p(n,this.observer,s,g,this.audioCodec),v=0,h=d(n.samplerate);if(f&&l){var x=l+h;Math.abs(x-u)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((x-u)/90)),u=x)}while(g<b)if(c(s,g)&&g+5<b){var T=m(n,s,g,u,v);if(!T)break;g+=T.length,y=T.sample.pts,v++}else g++;g<b?f=s.subarray(g,b):f=null,this.aacOverFlow=f,this.aacLastPTS=y},e.prototype._parseMPEGPES=function(t){var n=t.data,r=n.length,i=0,s=0,o=t.pts;while(s<r)if(x.isHeader(n,s)){var u=x.appendFrame(this._audioTrack,n,s,o,i);if(!u)break;s+=u.length,i++}else s++},e.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},e}(),D=_,H=function(){function e(t,n,r){P(this,e),this.observer=t,this.config=r,this.remuxer=n}return e.prototype.resetInitSegment=function(t,n,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:n,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(t){var n=void 0,r=void 0,i=g.a.getID3Data(t,0);if(i&&g.a.getTimeStamp(i)!==undefined)for(n=i.length,r=Math.min(t.length-1,n+100);n<r;n++)if(x.probe(t,n))return o.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(t,n,r,i){var s=g.a.getID3Data(t,0),o=g.a.getTimeStamp(s),u=o?90*o:n*9e4,a=s.length,f=t.length,l=0,c=0,h=this._audioTrack,p=[{pts:u,dts:u,data:s}];while(a<f)if(x.isHeader(t,a)){var d=x.appendFrame(h,t,a,u,l);if(!d)break;a+=d.length,c=d.sample.pts,l++}else g.a.isHeader(t,a)?(s=g.a.getID3Data(t,a),p.push({pts:c,dts:c,data:s}),a+=s.length):a++;this.remuxer.remux(h,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},n,r,i)},e.prototype.destroy=function(){},e}(),B=H,F=function(){function e(){j(this,e)}return e.getSilentFrame=function(t,n){switch(t){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),I=F,R=Math.pow(2,32)-1,U=function(){function e(){q(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var n=void 0;for(n in e.types)e.types.hasOwnProperty(n)&&(e.types[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var u=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),f=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,u,f,u,a),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,s))},e.box=function(t){var n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,s=i,o=void 0;while(i--)r+=n[i].byteLength;o=new Uint8Array(r),o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(t,4);for(i=0,r=8;i<s;i++)o.set(n[i],r),r+=n[i].byteLength;return o},e.hdlr=function(n){return e.box(e.types.hdlr,e.HDLR_TYPES[n])},e.mdat=function(n){return e.box(e.types.mdat,n)},e.mdhd=function(n,r){r*=n;var i=Math.floor(r/(R+1)),s=Math.floor(r%(R+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))},e.mdia=function(n){return e.box(e.types.mdia,e.mdhd(n.timescale,n.duration),e.hdlr(n.type),e.minf(n))},e.mfhd=function(n){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]))},e.minf=function(n){return n.type==="audio"?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(n)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(n))},e.moof=function(n,r,i){return e.box(e.types.moof,e.mfhd(n),e.traf(i,r))},e.moov=function(n){var r=n.length,i=[];while(r--)i[r]=e.trak(n[r]);return e.box.apply(null,[e.types.moov,e.mvhd(n[0].timescale,n[0].duration)].concat(i).concat(e.mvex(n)))},e.mvex=function(n){var r=n.length,i=[];while(r--)i[r]=e.trex(n[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(n,r){r*=n;var i=Math.floor(r/(R+1)),s=Math.floor(r%(R+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(n){var r=n.samples||[],i=new Uint8Array(4+r.length),s=void 0,o=void 0;for(o=0;o<r.length;o++)s=r[o].flags,i[o+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return e.box(e.types.sdtp,i)},e.stbl=function(n){return e.box(e.types.stbl,e.stsd(n),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(n){var r=[],i=[],s=void 0,o=void 0,u=void 0;for(s=0;s<n.sps.length;s++)o=n.sps[s],u=o.byteLength,r.push(u>>>8&255),r.push(u&255),r=r.concat(Array.prototype.slice.call(o));for(s=0;s<n.pps.length;s++)o=n.pps[s],u=o.byteLength,i.push(u>>>8&255),i.push(u&255),i=i.concat(Array.prototype.slice.call(o));var a=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|n.sps.length].concat(r).concat([n.pps.length]).concat(i))),f=n.width,l=n.height,c=n.pixelRatio[0],h=n.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,h>>24,h>>16&255,h>>8&255,h&255])))},e.esds=function(t){var n=t.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(t.config).concat([6,1,2]))},e.mp4a=function(n){var r=n.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0]),e.box(e.types.esds,e.esds(n)))},e.mp3=function(n){var r=n.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,r>>8&255,r&255,0,0]))},e.stsd=function(n){return n.type==="audio"?!n.isAAC&&n.codec==="mp3"?e.box(e.types.stsd,e.STSD,e.mp3(n)):e.box(e.types.stsd,e.STSD,e.mp4a(n)):e.box(e.types.stsd,e.STSD,e.avc1(n))},e.tkhd=function(n){var r=n.id,i=n.duration*n.timescale,s=n.width,o=n.height,u=Math.floor(i/(R+1)),a=Math.floor(i%(R+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,u>>24,u>>16&255,u>>8&255,u&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,o>>8&255,o&255,0,0]))},e.traf=function(n,r){var i=e.sdtp(n),s=n.id,o=Math.floor(r/(R+1)),u=Math.floor(r%(R+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,u>>24,u>>16&255,u>>8&255,u&255])),e.trun(n,i.length+16+20+8+16+8+8),i)},e.trak=function(n){return n.duration=n.duration||4294967295,e.box(e.types.trak,e.tkhd(n),e.mdia(n))},e.trex=function(n){var r=n.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(n,r){var i=n.samples||[],s=i.length,o=12+16*s,u=new Uint8Array(o),a=void 0,f=void 0,l=void 0,c=void 0,h=void 0,p=void 0;r+=8+o,u.set([0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0);for(a=0;a<s;a++)f=i[a],l=f.duration,c=f.size,h=f.flags,p=f.cts,u.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,p>>>24&255,p>>>16&255,p>>>8&255,p&255],12+16*a);return e.box(e.types.trun,u)},e.initSegment=function(n){e.types||e.init();var r=e.moov(n),i=void 0;return i=new Uint8Array(e.FTYP.byteLength+r.byteLength),i.set(e.FTYP),i.set(r,e.FTYP.byteLength),i},e}(),z=U,X=1e4,V=function(){function e(t,n,r,i){W(this,e),this.observer=t,this.config=n,this.typeSupported=r;var s=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&s&&!s.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(t,n,i,s,u,a,f){this.ISGenerated||this.generateIS(t,n,u);if(this.ISGenerated){var l=t.samples.length,c=n.samples.length,h=u,p=u;if(l&&c){var d=(t.samples[0].dts-n.samples[0].dts)/n.inputTimeScale;h+=Math.max(0,d),p+=Math.max(0,-d)}if(l){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,n,u));var v=this.remuxAudio(t,h,a,f);if(c){var m=void 0;v&&(m=v.endPTS-v.startPTS),n.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,n,u)),this.remuxVideo(n,p,a,m,f)}}else if(c){var g=this.remuxVideo(n,p,a,0,f);g&&t.codec&&this.remuxEmptyAudio(t,h,a,g)}}i.samples.length&&this.remuxID3(i,u),s.samples.length&&this.remuxText(s,u),this.observer.trigger(r.a.FRAG_PARSED)},e.prototype.generateIS=function(t,n,s){var u=this.observer,a=t.samples,f=n.samples,l=this.typeSupported,c="audio/mp4",h={},p={tracks:h},d=this._initPTS===undefined,v=void 0,m=void 0;d&&(v=m=Infinity),t.config&&a.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(c="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),h.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:z.initSegment([t]),metadata:{channelCount:t.channelCount}},d&&(v=m=a[0].pts-t.inputTimeScale*s));if(n.sps&&n.pps&&f.length){var g=n.inputTimeScale;n.timescale=g,h.video={container:"video/mp4",codec:n.codec,initSegment:z.initSegment([n]),metadata:{width:n.width,height:n.height}},d&&(v=Math.min(v,f[0].pts-g*s),m=Math.min(m,f[0].dts-g*s),this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:v}))}Object.keys(h).length?(u.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,d&&(this._initPTS=v,this._initDTS=m)):u.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(t,n,s,u,a){var f=8,l=t.timescale,c=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=t.samples,w=[],E=b.length,S=this._PTSNormalize,x=this._initDTS,T=this.nextAvcDts,N=this.isSafari;if(E===0)return;N&&(s|=b.length&&T&&(a&&Math.abs(n-T/l)<.1||Math.abs(b[0].pts-T-x)<l/5)),s||(T=n*l),b.forEach(function(e){e.pts=S(e.pts-x,T),e.dts=S(e.dts-x,T)}),b.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var C=b.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(C<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(C/90)+" ms to overcome this issue");for(var k=0;k<b.length;k++)b[k].dts+=C}var L=b[0];v=Math.max(L.dts,0),d=Math.max(L.pts,0);var A=Math.round((v-T)/90);s&&A&&(A>1?o.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC:"+ -A+" ms overlapping between fragments detected"),v=T,b[0].dts=v,d=Math.max(d-A,T),b[0].pts=d,o.b.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(v/90)+",delta:"+A+" ms")),m=v,L=b[b.length-1],y=Math.max(L.dts,0),g=Math.max(L.pts,0,y),N&&(c=Math.round((y-v)/(b.length-1)));var O=0,M=0;for(var _=0;_<E;_++){var D=b[_],P=D.units,H=P.length,B=0;for(var j=0;j<H;j++)B+=P[j].data.length;M+=B,O+=H,D.length=B,N?D.dts=v+_*c:D.dts=Math.max(D.dts,v),D.pts=Math.max(D.pts,D.dts)}var F=M+4*O+8;try{h=new Uint8Array(F)}catch(I){this.observer.trigger(r.a.ERROR,{type:i.b.MUX_ERROR,details:i.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F});return}var q=new DataView(h.buffer);q.setUint32(0,F),h.set(z.types.mdat,4);for(var R=0;R<E;R++){var U=b[R],W=U.units,X=0,V=void 0;for(var $=0,J=W.length;$<J;$++){var K=W[$],Q=K.data,G=K.data.byteLength;q.setUint32(f,G),f+=4,h.set(Q,f),f+=G,X+=4+G}if(!N){if(R<E-1)c=b[R+1].dts-U.dts;else{var Y=this.config,Z=U.dts-b[R>0?R-1:R].dts;if(Y.stretchShortVideoTrack){var et=Y.maxBufferHole,tt=Math.floor(et*l),nt=(u?d+u*l:this.nextAudioPts)-U.pts;nt>tt?(c=nt-Z,c<0&&(c=Z),o.b.log("It is approximately "+nt/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=Z}else c=Z}V=Math.round(U.pts-U.dts)}else V=Math.max(0,c*Math.round((U.pts-U.dts)/c));w.push({size:X,duration:c,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=y+c;var rt=t.dropped;t.len=0,t.nbNalu=0,t.dropped=0;if(w.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var it=w[0].flags;it.dependsOn=2,it.isNonSync=0}t.samples=w,p=z.moof(t.sequenceNumber++,v,t),t.samples=[];var st={data1:p,data2:h,startPTS:d/l,endPTS:(g+c)/l,startDTS:v/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:w.length,dropped:rt};return this.observer.trigger(r.a.FRAG_PARSING_DATA,st),st},e.prototype.remuxAudio=function(t,n,s,u){var a=t.inputTimeScale,f=t.timescale,l=a/f,c=t.isAAC?1024:1152,h=c*l,p=this._PTSNormalize,d=this._initDTS,v=!t.isAAC&&this.typeSupported.mpeg,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,E=void 0,S=void 0,x=t.samples,T=[],N=this.nextAudioPts;s|=x.length&&N&&(u&&Math.abs(n-N/a)<.1||Math.abs(x[0].pts-N-d)<20*h),x.forEach(function(e){e.pts=e.dts=p(e.pts-d,n*a)}),x=x.filter(function(e){return e.pts>=0});if(x.length===0)return;s||(u?N=n*a:N=x[0].pts);if(t.isAAC){var C=this.config.maxAudioFramesDrift;for(var k=0,L=N;k<x.length;){var A=x[k],O,M=A.pts;O=M-L;var _=Math.abs(1e3*O/a);if(O<=-C*h)o.b.warn("Dropping 1 audio frame @ "+(L/a).toFixed(3)+"s due to "+Math.round(_)+" ms overlap."),x.splice(k,1),t.len-=A.unit.length;else if(O>=C*h&&_<X&&L){var D=Math.round(O/h);o.b.warn("Injecting "+D+" audio frame @ "+(L/a).toFixed(3)+"s due to "+Math.round(1e3*O/a)+" ms gap.");for(var P=0;P<D;P++){var H=Math.max(L,0);y=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),y||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),y=A.unit.subarray()),x.splice(k,0,{unit:y,pts:H,dts:H}),t.len+=y.length,L+=h,k++}A.pts=A.dts=L,L+=h,k++}else Math.abs(O)>.1*h,A.pts=A.dts=L,L+=h,k++}}for(var B=0,j=x.length;B<j;B++){var F=x[B],q=F.unit,R=F.pts;if(S!==undefined)g.duration=Math.round((R-S)/l);else{var U=Math.round(1e3*(R-N)/a),W=0;if(s&&t.isAAC&&U){if(U>0&&U<X)W=Math.round((R-N)/h),o.b.log(U+" ms hole between AAC samples detected,filling it"),W>0&&(y=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),y||(y=q.subarray()),t.len+=W*y.length);else if(U<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(N/a).toFixed(3)+"s/"+(R/a).toFixed(3)+"s/"+ -U+"ms"),t.len-=q.byteLength;continue}R=N}E=R;if(!(t.len>0))return;var V=v?t.len:t.len+8;m=v?0:8;try{b=new Uint8Array(V)}catch($){this.observer.trigger(r.a.ERROR,{type:i.b.MUX_ERROR,details:i.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V});return}if(!v){var J=new DataView(b.buffer);J.setUint32(0,V),b.set(z.types.mdat,4)}for(var K=0;K<W;K++)y=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),y||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),y=q.subarray()),b.set(y,m),m+=y.byteLength,g={size:y.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(g)}b.set(q,m);var Q=q.byteLength;m+=Q,g={size:Q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(g),S=R}var G=0,Y=T.length;Y>=2&&(G=T[Y-2].duration,g.duration=G);if(Y){this.nextAudioPts=N=S+l*G,t.len=0,t.samples=T,v?w=new Uint8Array:w=z.moof(t.sequenceNumber++,E/l,t),t.samples=[];var Z=E/a,et=N/a,tt={data1:w,data2:b,startPTS:Z,endPTS:et,startDTS:Z,endDTS:et,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.observer.trigger(r.a.FRAG_PARSING_DATA,tt),tt}return null},e.prototype.remuxEmptyAudio=function(t,n,r,i){var s=t.inputTimeScale,u=t.samplerate?t.samplerate:s,a=s/u,f=this.nextAudioPts,l=(f!==undefined?f:i.startDTS*s)+this._initDTS,c=i.endDTS*s+this._initDTS,h=1024,p=a*h,d=Math.ceil((c-l)/p),v=I.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);o.b.warn("remux empty Audio");if(!v){o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}var m=[];for(var g=0;g<d;g++){var y=l+g*p;m.push({unit:v,pts:y,dts:y}),t.len+=v.length}t.samples=m,this.remuxAudio(t,n,r)},e.prototype.remuxID3=function(t,n){var i=t.samples.length,s=void 0,o=t.inputTimeScale,u=this._initPTS,a=this._initDTS;if(i){for(var f=0;f<i;f++)s=t.samples[f],s.pts=(s.pts-u)/o,s.dts=(s.dts-a)/o;this.observer.trigger(r.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],n=n},e.prototype.remuxText=function(t,n){t.samples.sort(function(e,t){return e.pts-t.pts});var i=t.samples.length,s=void 0,o=t.inputTimeScale,u=this._initPTS;if(i){for(var a=0;a<i;a++)s=t.samples[a],s.pts=(s.pts-u)/o;this.observer.trigger(r.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],n=n},e.prototype._PTSNormalize=function(t,n){var r=void 0;if(n===undefined)return t;n<t?r=-8589934592:r=8589934592;while(Math.abs(t-n)>4294967296)t+=r;return t},e}(),$=V,K=function(){function e(t){J(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(t,n,i,s,o,u,a,f){var l=this.observer,c="";t&&(c+="audio"),n&&(c+="video"),l.trigger(r.a.FRAG_PARSING_DATA,{data1:f,startPTS:o,startDTS:o,type:c,hasAudio:!!t,hasVideo:!!n,nb:1,dropped:0}),l.trigger(r.a.FRAG_PARSED)},e}(),Q=K,Y=function(){function e(t,n,r,i){G(this,e),this.observer=t,this.typeSupported=n,this.config=r,this.vendor=i}return e.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.prototype.push=function(t,n,i,o,u,a,f,l,c,h,p,d){if(t.byteLength>0&&n!=null&&n.key!=null&&n.method==="AES-128"){var v=this.decrypter;v==null&&(v=this.decrypter=new s.a(this.observer,this.config));var m=this,g=void 0;try{g=performance.now()}catch(y){g=Date.now()}v.decrypt(t,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(s){t=Date.now()}m.observer.trigger(r.a.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:t}}),m.pushDecrypted(new Uint8Array(e),n,new Uint8Array(i),o,u,a,f,l,c,h,p,d)})}else this.pushDecrypted(new Uint8Array(t),n,new Uint8Array(i),o,u,a,f,l,c,h,p,d)},e.prototype.pushDecrypted=function(t,n,s,o,u,a,f,l,c,h,p,d){var v=this.demuxer;if(!v||(f||l)&&!this.probe(t)){var m=this.observer,g=this.typeSupported,y=this.config,b=[{demux:D,remux:$},{demux:E.a,remux:Q},{demux:w,remux:$},{demux:B,remux:$}];for(var S=0,x=b.length;S<x;S++){var T=b[S],N=T.demux.probe;if(N(t)){var C=this.remuxer=new T.remux(m,y,g,this.vendor);v=new T.demux(m,C,y,g),this.probe=N;break}}if(!v){m.trigger(r.a.ERROR,{type:i.b.MEDIA_ERROR,details:i.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}this.demuxer=v}var k=this.remuxer;if(f||l)v.resetInitSegment(s,o,u,h),k.resetInitSegment();f&&(v.resetTimeStamp(d),k.resetTimeStamp(d)),typeof v.setDecryptData=="function"&&v.setDecryptData(n),v.append(t,a,c,p)},e}(),Z=t.a=Y},function(e,t,n){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){var n=L[t];return!!n&&n[e.slice(0,4)]===!0}function O(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function R(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ct(){if(typeof window!="undefined")return window.MediaSource||window.WebKitMediaSource}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Et(e,t,n){var r=e[t],i=e[n],s=i.startPTS;isNaN(s)?n>t?i.start=r.start+r.duration:i.start=Math.max(r.start-i.duration,0):n>t?(r.duration=s-r.start,r.duration<0&&a.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-s,i.duration<0&&a.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function St(e,t,n,r,i,s){var o=n;if(!isNaN(t.startPTS)){var u=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=u:t.deltaPTS=Math.max(u,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),s=Math.max(s,t.endDTS)}var a=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=r,t.startDTS=i,t.endDTS=s,t.duration=r-n;var f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var l=void 0,c=void 0,h=void 0;l=f-e.startSN,c=e.fragments,c[l]=t;for(h=l;h>0;h--)Et(c,h,h-1);for(h=l;h<c.length-1;h++)Et(c,h,h+1);return e.PTSKnown=!0,a}function xt(e,t){var n=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,s=e.fragments,o=t.fragments,u=0,f=void 0;t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);if(r<n){t.PTSKnown=!1;return}for(var l=n;l<=r;l++){var c=s[i+l],h=o[l];h&&c&&(u=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,h.backtracked=c.backtracked,h.dropped=c.dropped,f=h))}if(u){a.b.log("discontinuity sliding from playlist, take drift into account");for(l=0;l<o.length;l++)o[l].cc+=u}if(f)St(t,f,f.startPTS,f.endPTS,f.startDTS,f.endDTS);else if(i>=0&&i<s.length){var p=s[i].start;for(l=0;l<o.length;l++)o[l].start+=p}t.PTSKnown=e.PTSKnown}function Ct(e,t){var n=null;for(var r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}function kt(e,t){return rt.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function Lt(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}function At(e,t){var n=e.fragments,r=t.fragments;if(!r.length||!n.length){a.b.log("No fragments to align");return}var i=Ct(n,r[0].cc);if(!i||i&&!i.startPTS){a.b.log("No frag in previous level to align on");return}return i}function Ot(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function Mt(e,t,n){if(Lt(e,t,n)){var r=At(t.details,n);r&&(a.b.log("Adjusting PTS using last level due to CC increase within current level"),Ot(r.start,n))}if(n.PTSKnown===!1&&t&&t.details&&t.details.fragments&&t.details.fragments.length){var i=t.details.programDateTime,s=n.programDateTime,o=(s-i)/1e3+t.details.fragments[0].start;isNaN(o)||(a.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),Ot(o,n))}}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function Pt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function $t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Gt(e,t){var n=null;try{n=new window.Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Yt(e){if(e&&e.cues)while(e.cues.length>0)e.removeCue(e.cues[0])}function Zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function tn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function sn(){var e=ct(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&typeof e.isTypeSupported=="function"&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&typeof t.prototype.appendBuffer=="function"&&typeof t.prototype.remove=="function";return!!n&&!!r}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function vn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function wn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function kn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function On(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function _n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function Rn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function $n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Zn(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Yn,this.regionList=[]}function er(e){function t(e,t,n,r){return(e|0)*3600+(t|0)*60+(n|0)+(r|0)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function tr(){this.values=Object.create(null)}function nr(e,t,n,r){var i=r?e.split(r):[e];for(var s in i){if(typeof i[s]!="string")continue;var o=i[s].split(n);if(o.length!==2)continue;var u=o[0],a=o[1];t(u,a)}}function sr(e,t,n){function i(){var t=er(e);if(t===null)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(e,t){var r=new tr;nr(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),o=s[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),s.length===2&&r.alt("lineAlign",s[1],["start",ir,"end"]);break;case"position":s=t.split(","),r.percent(e,s[0]),s.length===2&&r.alt("positionAlign",s[1],["start",ir,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",ir,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");i==="auto"&&rr.line===-1&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",ir);var s=r.get("position","auto");s==="auto"&&rr.position===50&&(s=t.align==="start"||t.align==="left"?0:t.align==="end"||t.align==="right"?100:50),t.position=s}function o(){e=e.replace(/^\s+/,"")}var r=e;o(),t.startTime=i(),o();if(e.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),s(e,t)}function or(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function ar(e,t,n,r){var i=void 0,s=void 0,o=void 0,u=void 0,a=void 0,f=window.VTTCue||window.TextTrackCue;for(var l=0;l<r.rows.length;l++){i=r.rows[l],o=!0,u=0,a="";if(!i.isEmpty()){for(var c=0;c<i.chars.length;c++)i.chars[c].uchar.match(/\s/)&&o?u++:(a+=i.chars[c].uchar,o=!1);i.cueStartTime=t,t===n&&(n+=1e-4),s=new f(t,n,or(a.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?s.line=l+1:s.line=l>7?l-2:l+1,s.align="left",s.position=Math.max(0,Math.min(100,100*(u/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(s)}}}function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function Ir(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function qr(e,t){return e&&e.label===t.name&&!e.textTrack1&&!e.textTrack2}function Rr(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}function Xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function $r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Jr(e){var t=[];for(var n=0;n<e.length;n++)e[n].kind==="subtitles"&&t.push(e[n]);return t}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function ei(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function si(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function ui(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r={};n.d(r,"newCue",function(){return ar});var i=n(3),s=n.n(i),o=n(2),u=n(1),a=n(0),f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),h=function(){function e(t){l(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return f(this.handledEvents)==="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(c.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(t,n){this.onEventGeneric(t,n)},e.prototype.onEventGeneric=function(t,n){var r=function(t,n){var r="on"+t.replace("hls","");if(typeof this[r]!="function")throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,n)};try{r.call(this,t,n).call()}catch(i){a.b.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(u.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:i})}},e}(),p=h,d=n(7),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(){function e(){m(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return v(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=s.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),y=g,b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function(){function e(){var t;w(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=(t={},t[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.prototype.hasElementaryStream=function(t){return this._elementaryStreams[t]===!0},e.prototype.createInitializationVector=function(t){var n=new Uint8Array(16);for(var r=12;r<16;r++)n[r]=t>>8*(15-r)&255;return n},e.prototype.fragmentDecryptdataFromLevelkey=function(t,n){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new y,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(n)),r},b(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=s.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var n=this.rawByteRange.split("@",2);if(n.length===1){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(n[1]);t[1]=parseInt(n[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}(),S=E,T=/^(\d+)x(\d+)$/,N=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,C=function(){function e(t){x(this,e),typeof t=="string"&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(t){var n=parseInt(this[t],10);return n>Number.MAX_SAFE_INTEGER?Infinity:n},e.prototype.hexadecimalInteger=function(t){if(this[t]){var n=(this[t]||"0x").slice(2);n=(n.length&1?"0":"")+n;var r=new Uint8Array(n.length/2);for(var i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(t){var n=parseInt(this[t],16);return n>Number.MAX_SAFE_INTEGER?Infinity:n},e.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.prototype.enumeratedString=function(t){return this[t]},e.prototype.decimalResolution=function(t){var n=T.exec(this[t]);return n===null?undefined:{width:parseInt(n[1],10),height:parseInt(n[2],10)}},e.parseAttrList=function(t){var n=void 0,r={};N.lastIndex=0;while((n=N.exec(t))!==null){var i=n[2],s='"';i.indexOf(s)===0&&i.lastIndexOf(s)===i.length-1&&(i=i.slice(1,-1)),r[n[1]]=i}return r},e}(),k=C,L={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},_=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,D=/#EXT-X-MEDIA:(.*)/g,P=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),H=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,B=function(){function e(){M(this,e)}return e.findGroup=function(t,n){if(!t)return null;var r=null;for(var i=0;i<t.length;i++){var s=t[i];s.id===n&&(r=s)}return r},e.convertAVC1ToAVCOTI=function(t){var n=void 0,r=t.split(".");return r.length>2?(n=r.shift()+".",n+=parseInt(r.shift()).toString(16),n+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):n=t,n},e.resolve=function(t,n){return s.a.buildAbsoluteURL(n,t,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(n,r){function o(e,t){["video","audio"].forEach(function(n){var r=e.filter(function(e){return A(e,n)});if(r.length){var i=r.filter(function(e){return e.lastIndexOf("avc1",0)===0||e.lastIndexOf("mp4a",0)===0});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return r.indexOf(e)===-1})}}),t.unknownCodecs=e}var i=[],s=void 0;_.lastIndex=0;while((s=_.exec(n))!=null){var u={},a=u.attrs=new k(s[1]);u.url=e.resolve(s[2],r);var f=a.decimalResolution("RESOLUTION");f&&(u.width=f.width,u.height=f.height),u.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),u.name=a.NAME,o([].concat((a.CODECS||"").split(/[ ,]+/)),u),u.videoCodec&&u.videoCodec.indexOf("avc1")!==-1&&(u.videoCodec=e.convertAVC1ToAVCOTI(u.videoCodec)),i.push(u)}return i},e.parseMasterPlaylistMedia=function(n,r,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[],o=void 0,u=[],a=0;D.lastIndex=0;while((o=D.exec(n))!==null){var f={},l=new k(o[1]);if(l.TYPE===i){f.groupId=l["GROUP-ID"],f.name=l.NAME,f.type=i,f.default=l.DEFAULT==="YES",f.autoselect=l.AUTOSELECT==="YES",f.forced=l.FORCED==="YES",l.URI&&(f.url=e.resolve(l.URI,r)),f.lang=l.LANGUAGE,f.name||(f.name=f.lang);if(s.length){var c=e.findGroup(s,f.groupId);f.audioCodec=c?c.codec:s[0].codec}f.id=a++,u.push(f)}}return u},e.parseLevelPlaylist=function(t,n,r,i){var s=0,o=0,u={type:null,version:null,url:n,fragments:[],live:!0,startSN:0},f=new y,l=0,c=null,h=new S,p=void 0,d=void 0;P.lastIndex=0;while((p=P.exec(t))!==null){var v=p[1];if(v){h.duration=parseFloat(v);var m=(" "+p[2]).slice(1);h.title=m||null,h.tagList.push(m?["INF",v,m]:["INF",v])}else if(p[3]){if(!isNaN(h.duration)){var g=s++;h.type=i,h.start=o,h.levelkey=f,h.sn=g,h.level=r,h.cc=l,h.baseurl=n,h.relurl=(" "+p[3]).slice(1),u.programDateTime&&(c?h.rawProgramDateTime?h.pdt=Date.parse(h.rawProgramDateTime):h.pdt=c.pdt+c.duration*1e3:h.pdt=Date.parse(u.programDateTime),h.endPdt=h.pdt+h.duration*1e3),u.fragments.push(h),c=h,o+=h.duration,h=new S}}else if(p[4]){h.rawByteRange=(" "+p[4]).slice(1);if(c){var b=c.byteRangeEndOffset;b&&(h.lastByteRangeEndOffset=b)}}else if(p[5])h.rawProgramDateTime=(" "+p[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),u.programDateTime===undefined&&(u.programDateTime=new Date(new Date(Date.parse(p[5]))-1e3*o));else{p=p[0].match(H);for(d=1;d<p.length;d++)if(p[d]!==undefined)break;var w=(" "+p[d+1]).slice(1),E=(" "+p[d+2]).slice(1);switch(p[d]){case"#":h.tagList.push(E?[w,E]:[w]);break;case"PLAYLIST-TYPE":u.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":s=u.startSN=parseInt(w);break;case"TARGETDURATION":u.targetduration=parseFloat(w);break;case"VERSION":u.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":l++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(w);break;case"KEY":var x=w,T=new k(x),N=T.enumeratedString("METHOD"),C=T.URI,L=T.hexadecimalInteger("IV");N&&(f=new y,C&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(N)>=0&&(f.method=N,f.baseuri=n,f.reluri=C,f.key=null,f.iv=L));break;case"START":var A=w,O=new k(A),M=O.decimalFloatingPoint("TIME-OFFSET");isNaN(M)||(u.startTimeOffset=M);break;case"MAP":var _=new k(w);h.relurl=_.URI,h.rawByteRange=_.BYTERANGE,h.baseurl=n,h.level=r,h.type=i,h.sn="initSegment",u.initSegment=h,h=new S;break;default:a.b.warn("line parsed but not handled: "+p)}}}return h=c,h&&!h.relurl&&(u.fragments.pop(),o-=h.duration),u.totalduration=o,u.averagetargetduration=o/u.fragments.length,u.endSN=s-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=l,!u.initSegment&&u.fragments.length&&u.fragments.every(function(e){return e.relurl.endsWith(".mp4")})&&(a.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),h=new S,h.relurl=u.fragments[0].relurl,h.baseurl=n,h.level=r,h.type=i,h.sn="initSegment",u.initSegment=h,u.needSidxRanges=!0),u},e}(),j=B,F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},z={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},W=function(e){function t(n){I(this,t);var r=q(this,e.call(this,n,u.a.MANIFEST_LOADING,u.a.LEVEL_LOADING,u.a.AUDIO_TRACK_LOADING,u.a.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return R(t,e),t.canHaveQualityLevels=function(t){return t!==U.AUDIO_TRACK&&t!==U.SUBTITLE_TRACK},t.mapContextToLevelType=function(t){var n=t.type;switch(n){case U.AUDIO_TRACK:return z.AUDIO;case U.SUBTITLE_TRACK:return z.SUBTITLE;default:return z.MAIN}},t.getResponseUrl=function(t,n){var r=t.url;if(r===undefined||r.indexOf("data:")===0)r=n.url;return r},t.prototype.createInternalLoader=function(t){var n=this.hls.config,r=n.pLoader,i=n.loader,s=r||i,o=new s(n);return t.loader=o,this.loaders[t.type]=o,o},t.prototype.getInternalLoader=function(t){return this.loaders[t.type]},t.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},t.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy(),this.resetInternalLoader(t)}},t.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(t){this.load(t.url,{type:U.MANIFEST})},t.prototype.onLevelLoading=function(t){this.load(t.url,{type:U.LEVEL,level:t.level,id:t.id})},t.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:U.AUDIO_TRACK,id:t.id})},t.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:U.SUBTITLE_TRACK,id:t.id})},t.prototype.load=function(t,n){var r=this.hls.config,i=this.getInternalLoader(n);if(i){var s=i.context;if(s&&s.url===t)return a.b.trace("playlist request ongoing"),!1;a.b.warn("aborting previous loader for type: "+n.type),i.abort()}var o=void 0,u=void 0,f=void 0,l=void 0;switch(n.type){case U.MANIFEST:o=r.manifestLoadingMaxRetry,u=r.manifestLoadingTimeOut,f=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case U.LEVEL:o=0,u=r.levelLoadingTimeOut;break;default:o=r.levelLoadingMaxRetry,u=r.levelLoadingTimeOut,f=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,a.b.log("Playlist loader for "+n.type+" "+(n.level||n.id))}i=this.createInternalLoader(n),n.url=t,n.responseType=n.responseType||"";var c=void 0,h=void 0;return c={timeout:u,maxRetry:o,retryDelay:f,maxRetryDelay:l},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(n,c,h),!0},t.prototype.loadsuccess=function(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(r.isSidxRequest){this._handleSidxRequest(t,r),this._handlePlaylistLoaded(t,n,r,i);return}this.resetInternalLoader(r.type);var s=t.data;n.tload=performance.now();if(s.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(t,r,"no EXTM3U delimiter",i);return}s.indexOf("#EXTINF:")>0||s.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,n,r,i):this._handleMasterPlaylist(t,n,r,i)},t.prototype.loaderror=function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._handleNetworkError(n,r)},t.prototype.loadtimeout=function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._handleNetworkError(n,r,!0)},t.prototype._handleMasterPlaylist=function(n,r,i,s){var o=this.hls,f=n.data,l=t.getResponseUrl(n,i),c=j.parseMasterPlaylist(f,l);if(!c.length){this._handleManifestParsingError(n,i,"no level found in manifest",s);return}var h=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=j.parseMasterPlaylistMedia(f,l,"AUDIO",h),d=j.parseMasterPlaylistMedia(f,l,"SUBTITLES");if(p.length){var v=!1;p.forEach(function(e){e.url||(v=!0)}),v===!1&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(a.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}o.trigger(u.a.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:d,url:l,stats:r,networkDetails:s})},t.prototype._handleTrackOrLevelPlaylist=function(n,r,i,s){var o=this.hls,a=i.id,f=i.level,l=i.type,c=t.getResponseUrl(n,i),h=isNaN(f)?isNaN(a)?0:a:f,p=t.mapContextToLevelType(i),d=j.parseLevelPlaylist(n.data,c,h,p);d.tload=r.tload;if(l===U.MANIFEST){var v={url:c,details:d};o.trigger(u.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:c,stats:r,networkDetails:s})}r.tparsed=performance.now();if(d.needSidxRanges){var m=d.initSegment.url;this.load(m,{isSidxRequest:!0,type:l,level:f,levelDetails:d,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}i.levelDetails=d,this._handlePlaylistLoaded(n,r,i,s)},t.prototype._handleSidxRequest=function(t,n){var r=d.a.parseSegmentIndex(new Uint8Array(t.data));r.references.forEach(function(e,t){var r=e.info,i=n.levelDetails.fragments[t];i.byteRange.length===0&&(i.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),n.levelDetails.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"},t.prototype._handleManifestParsingError=function(t,n,r,i){this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:i})},t.prototype._handleNetworkError=function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1,i=void 0,s=void 0,a=this.getInternalLoader(t);switch(t.type){case U.MANIFEST:i=r?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,s=!0;break;case U.LEVEL:i=r?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,s=!1;break;case U.AUDIO_TRACK:i=r?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}a&&(a.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:i,fatal:s,url:a.url,loader:a,context:t,networkDetails:n})},t.prototype._handlePlaylistLoaded=function(n,r,i,s){var o=i.type,a=i.level,f=i.id,l=i.levelDetails;if(!l.targetduration){this._handleManifestParsingError(n,i,"invalid target duration",s);return}var c=t.canHaveQualityLevels(i.type);if(c)this.hls.trigger(u.a.LEVEL_LOADED,{details:l,level:a||0,id:f||0,stats:r,networkDetails:s});else switch(o){case U.AUDIO_TRACK:this.hls.trigger(u.a.AUDIO_TRACK_LOADED,{details:l,id:f,stats:r,networkDetails:s});break;case U.SUBTITLE_TRACK:this.hls.trigger(u.a.SUBTITLE_TRACK_LOADED,{details:l,id:f,stats:r,networkDetails:s})}},F(t,null,[{key:"ContextType",get:function(){return U}},{key:"LevelType",get:function(){return z}}]),t}(p),X=W,K=function(e){function t(n){V(this,t);var r=$(this,e.call(this,n,u.a.FRAG_LOADING));return r.loaders={},r}return J(t,e),t.prototype.destroy=function(){var n=this.loaders;for(var r in n){var i=n[r];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},t.prototype.onFragLoading=function(t){var n=t.frag,r=n.type,i=this.loaders,s=this.hls.config,o=s.fLoader,u=s.loader;n.loaded=0;var f=i[r];f&&(a.b.warn("abort previous fragment loader for type: "+r),f.abort()),f=i[r]=n.loader=s.fLoader?new o(s):new u(s);var l=void 0,c=void 0,h=void 0;l={url:n.url,frag:n,responseType:"arraybuffer",progressData:!1};var p=n.byteRangeStartOffset,d=n.byteRangeEndOffset;!isNaN(p)&&!isNaN(d)&&(l.rangeStart=p,l.rangeEnd=d),c={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:s.fragLoadingMaxRetryTimeout},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(l,c,h)},t.prototype.loadsuccess=function(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,s=t.data,o=r.frag;o.loader=undefined,this.loaders[o.type]=undefined,this.hls.trigger(u.a.FRAG_LOADED,{payload:s,frag:o,stats:n,networkDetails:i})},t.prototype.loaderror=function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,i=n.loader;i&&i.abort(),this.loaders[n.type]=undefined,this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:n.frag,response:t,networkDetails:r})},t.prototype.loadtimeout=function(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,i=n.loader;i&&i.abort(),this.loaders[n.type]=undefined,this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n.frag,networkDetails:r})},t.prototype.loadprogress=function(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,s=n.frag;s.loaded=t.loaded,this.hls.trigger(u.a.FRAG_LOAD_PROGRESS,{frag:s,stats:t,networkDetails:i})},t}(p),Q=K,et=function(e){function t(n){G(this,t);var r=Y(this,e.call(this,n,u.a.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return Z(t,e),t.prototype.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},p.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(t){var n=t.frag,r=n.type,i=this.loaders[r],s=n.decryptdata,o=s.uri;if(o!==this.decrypturl||this.decryptkey===null){var f=this.hls.config;i&&(a.b.warn("abort previous key loader for type:"+r),i.abort()),n.loader=this.loaders[r]=new f.loader(f),this.decrypturl=o,this.decryptkey=null;var l=void 0,c=void 0,h=void 0;l={url:o,frag:n,responseType:"arraybuffer"},c={timeout:f.fragLoadingTimeOut,maxRetry:f.fragLoadingMaxRetry,retryDelay:f.fragLoadingRetryDelay,maxRetryDelay:f.fragLoadingMaxRetryTimeout},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.loader.load(l,c,h)}else this.decryptkey&&(s.key=this.decryptkey,this.hls.trigger(u.a.KEY_LOADED,{frag:n}))},t.prototype.loadsuccess=function(t,n,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=undefined,this.loaders[i.type]=undefined,this.hls.trigger(u.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(t,n){var r=n.frag,i=r.loader;i&&i.abort(),this.loaders[n.type]=undefined,this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},t.prototype.loadtimeout=function(t,n){var r=n.frag,i=r.loader;i&&i.abort(),this.loaders[n.type]=undefined,this.hls.trigger(u.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(p),tt=et,nt={search:function(t,n){var r=0,i=t.length-1,s=null,o=null;while(r<=i){s=(r+i)/2|0,o=t[s];var u=n(o);if(u>0)r=s+1;else{if(!(u<0))return o;i=s-1}}return null}},rt=nt,it={isBuffered:function(t,n){try{if(t){var r=t.buffered;for(var i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}}catch(s){}return!1},bufferInfo:function(t,n,r){try{if(t){var i=t.buffered,s=[],o=void 0;for(o=0;o<i.length;o++)s.push({start:i.start(o),end:i.end(o)});return this.bufferedInfo(s,n,r)}}catch(u){}return{len:0,start:n,end:n,nextStart:undefined}},bufferedInfo:function(t,n,r){var i=[],s=void 0,o=void 0,u=void 0,a=void 0,f=void 0;t.sort(function(e,t){var n=e.start-t.start;return n?n:t.end-e.end});for(f=0;f<t.length;f++){var l=i.length;if(l){var c=i[l-1].end;t[f].start-c<r?t[f].end>c&&(i[l-1].end=t[f].end):i.push(t[f])}else i.push(t[f])}for(f=0,s=0,o=u=n;f<i.length;f++){var h=i[f].start,p=i[f].end;if(n+r>=h&&n<p)o=h,u=p,s=u-n;else if(n+r<h){a=h;break}}return{len:s,start:o,end:u,nextStart:a}}},st=it,ot=n(8),ut=n(6),at=n.n(ut),ft=n(10),lt=n.n(ft),pt=ct(),dt=function(){function e(t,n){ht(this,e),this.hls=t,this.id=n;var r=this.observer=new at.a,i=t.config;r.trigger=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];r.emit.apply(r,[t,t].concat(i))},r.off=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];r.removeListener.apply(r,[t].concat(i))};var s=function(e,n){n=n||{},n.frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);r.on(u.a.FRAG_DECRYPTED,s),r.on(u.a.FRAG_PARSING_INIT_SEGMENT,s),r.on(u.a.FRAG_PARSING_DATA,s),r.on(u.a.FRAG_PARSED,s),r.on(u.a.ERROR,s),r.on(u.a.FRAG_PARSING_METADATA,s),r.on(u.a.FRAG_PARSING_USERDATA,s),r.on(u.a.INIT_PTS_FOUND,s);var f={mp4:pt.isTypeSupported("video/mp4"),mpeg:pt.isTypeSupported("audio/mpeg"),mp3:pt.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&typeof Worker!="undefined"){a.b.log("demuxing in webworker");var c=void 0;try{c=this.w=lt()(11),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(e){t.trigger(u.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},c.postMessage({cmd:"init",typeSupported:f,vendor:l,id:n,config:JSON.stringify(i)})}catch(h){a.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),c&&URL.revokeObjectURL(c.objectURL),this.demuxer=new ot.a(r,f,i,l),this.w=undefined}}else this.demuxer=new ot.a(r,f,i,l)}return e.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var n=this.demuxer;n&&(n.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.prototype.push=function(t,n,r,i,s,o,u,f){var l=this.w,c=isNaN(s.startDTS)?s.start:s.startDTS,h=s.decryptdata,p=this.frag,d=!p||s.cc!==p.cc,v=!p||s.level!==p.level,m=p&&s.sn===p.sn+1,g=!v&&m;d&&a.b.log(this.id+":discontinuity detected"),v&&a.b.log(this.id+":switch detected"),this.frag=s;if(l)l.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:n,audioCodec:r,videoCodec:i,timeOffset:c,discontinuity:d,trackSwitch:v,contiguous:g,duration:o,accurateTimeOffset:u,defaultInitPTS:f},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,h,n,r,i,c,d,v,g,o,u,f)}},e.prototype.onWorkerMessage=function(t){var n=t.data,r=this.hls;switch(n.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case u.a.FRAG_PARSING_DATA:n.data.data1=new Uint8Array(n.data1),n.data2&&(n.data.data2=new Uint8Array(n.data2));default:n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data)}},e}(),vt=dt,bt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},wt=function(e){function t(n){mt(this,t);var r=gt(this,e.call(this,n,u.a.BUFFER_APPENDED,u.a.FRAG_BUFFERED,u.a.FRAG_LOADED));return r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=n.config,r}return yt(t,e),t.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,p.prototype.destroy.call(this),e.prototype.destroy.call(this)},t.prototype.getBufferedFrag=function(t,n){var r=this.fragments,i=Object.keys(r).filter(function(e){var i=r[e];if(i.body.type!==n)return!1;if(!i.buffered)return!1;var s=i.body;return s.startPTS<=t&&t<=s.endPTS});if(i.length===0)return null;var s=i.pop();return r[s].body},t.prototype.detectEvictedFragments=function(t,n){var r=this,i=void 0,s=void 0;Object.keys(this.fragments).forEach(function(e){var o=r.fragments[e];if(o.buffered===!0){var u=o.range[t];if(u){i=u.time;for(var a=0;a<i.length;a++){s=i[a];if(r.isTimeBuffered(s.startPTS,s.endPTS,n)===!1){r.removeFragment(o.body);break}}}}})},t.prototype.detectPartialFragments=function(t){var n=this,r=this.getFragmentKey(t),i=this.fragments[r];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(t.hasElementaryStream(e)===!0){var r=n.timeRanges[e];i.range[e]=n.getBufferedTimes(t.startPTS,t.endPTS,r)}}))},t.prototype.getBufferedTimes=function(t,n,r){var i=[],s=void 0,o=void 0,u=!1;for(var a=0;a<r.length;a++){s=r.start(a)-this.bufferPadding,o=r.end(a)+this.bufferPadding;if(t>=s&&n<=o){i.push({startPTS:Math.max(t,r.start(a)),endPTS:Math.min(n,r.end(a))});break}if(t<o&&n>s)i.push({startPTS:Math.max(t,r.start(a)),endPTS:Math.min(n,r.end(a))}),u=!0;else if(n<=s)break}return{time:i,partial:u}},t.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.sn},t.prototype.getPartialFragment=function(t){var n=this,r=void 0,i=void 0,s=void 0,o=null,u=0;return Object.keys(this.fragments).forEach(function(e){var a=n.fragments[e];n.isPartial(a)&&(i=a.body.startPTS-n.bufferPadding,s=a.body.endPTS+n.bufferPadding,t>=i&&t<=s&&(r=Math.min(t-i,s-t),u<=r&&(o=a.body,u=r)))}),o},t.prototype.getState=function(t){var n=this.getFragmentKey(t),r=this.fragments[n],i=bt.NOT_LOADED;return r!==undefined&&(r.buffered?this.isPartial(r)===!0?i=bt.PARTIAL:i=bt.OK:i=bt.APPENDING),i},t.prototype.isPartial=function(t){return t.buffered===!0&&(t.range.video!==undefined&&t.range.video.partial===!0||t.range.audio!==undefined&&t.range.audio.partial===!0)},t.prototype.isTimeBuffered=function(t,n,r){var i=void 0,s=void 0;for(var o=0;o<r.length;o++){i=r.start(o)-this.bufferPadding,s=r.end(o)+this.bufferPadding;if(t>=i&&n<=s)return!0;if(n<=i)return!1}return!1},t.prototype.onFragLoaded=function(t){var n=t.frag;if(!isNaN(n.sn)){var r=this.getFragmentKey(n),i={body:n,range:Object.create(null),buffered:!1};this.fragments[r]=i}},t.prototype.onBufferAppended=function(t){var n=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=n.timeRanges[e];n.detectEvictedFragments(e,t)})},t.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},t.prototype.hasFragment=function(t){var n=this.getFragmentKey(t);return this.fragments[n]!==undefined},t.prototype.removeFragment=function(t){var n=this.getFragmentKey(t);delete this.fragments[n]},t.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},t}(p),Tt={toString:function wi(e){var t="",n=e.length;for(var r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}},Nt=Tt,Ht=function(e){function t(n){_t(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var o=Dt(this,e.call.apply(e,[this,n].concat(i)));return o._tickInterval=null,o._tickCallCount=0,o}return Pt(t,e),t.prototype.destroy=function(){this.clearInterval(),e.prototype.destroy.call(this)},t.prototype.hasInterval=function(){return this._tickInterval!==null},t.prototype.setInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return this._tickInterval?!1:(this._tickInterval=setInterval(this.tick.bind(this,!1),e),!0)}),t.prototype.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return this._tickInterval?(clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}),t.prototype.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&setTimeout(this.tick.bind(this),0),this._tickCallCount=0)},t.prototype.doTick=function(){throw new Error("TaskLoop is abstract and `doLoop` must be implemented")},t}(p),Bt=Ht,jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Rt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},Ut=function(e){function t(n,r){Ft(this,t);var i=It(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.MANIFEST_LOADING,u.a.MANIFEST_PARSED,u.a.LEVEL_LOADED,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.FRAG_LOAD_EMERGENCY_ABORTED,u.a.FRAG_PARSING_INIT_SEGMENT,u.a.FRAG_PARSING_DATA,u.a.FRAG_PARSED,u.a.ERROR,u.a.AUDIO_TRACK_SWITCHING,u.a.AUDIO_TRACK_SWITCHED,u.a.BUFFER_CREATED,u.a.BUFFER_APPENDED,u.a.BUFFER_FLUSHED));return i.fragmentTracker=r,i.config=n.config,i.audioCodecSwap=!1,i._state=Rt.STOPPED,i}return qt(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad()},t.prototype.onHandlerDestroyed=function(){this.state=Rt.STOPPED,this.fragmentTracker=null},t.prototype.startLoad=function(t){if(this.levels){var n=this.lastCurrentTime,r=this.hls;this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0;if(!this.startFragRequested){var i=r.startLevel;i===-1&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}n>0&&t===-1&&(a.b.log("override startPosition with lastCurrentTime @"+n.toFixed(3)),t=n),this.state=Rt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=Rt.STOPPED},t.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=Rt.STOPPED,this.forceStartLoad=!1},t.prototype.doTick=function(){switch(this.state){case Rt.BUFFER_FLUSHING:this.fragLoadError=0;break;case Rt.IDLE:this._doTickIdle();break;case Rt.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=Rt.IDLE);break;case Rt.FRAG_LOADING_WAITING_RETRY:var n=performance.now(),r=this.retryDate;if(!r||n>=r||this.media&&this.media.seeking)a.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Rt.IDLE;break;case Rt.ERROR:case Rt.STOPPED:case Rt.FRAG_LOADING:case Rt.PARSING:case Rt.PARSED:case Rt.ENDED:break;default:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var t=this.hls,n=t.config,r=this.media;if(this.levelLastLoaded===undefined||!r&&(this.startFragRequested||!n.startFragPrefetch))return;var i=void 0;this.loadedmetadata?i=r.currentTime:i=this.nextLoadPosition;var s=t.nextLoadLevel,o=this.levels[s];if(!o)return;var f=o.bitrate,l=void 0;f?l=Math.max(8*n.maxBufferSize/f,n.maxBufferLength):l=n.maxBufferLength,l=Math.min(l,n.maxMaxBufferLength);var c=st.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,n.maxBufferHole),h=c.len;if(h>=l)return;a.b.trace("buffer length of "+h.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=s;var p=o.details;if(p===undefined||p.live===!0&&this.levelLastLoaded!==s){this.state=Rt.WAITING_LEVEL;return}var d=this.fragPrevious;if(!p.live&&d&&!d.backtracked&&d.sn===p.endSN&&!c.nextStart){var v=Math.min(r.duration,d.start+d.duration);if(v-Math.max(c.end,d.start)<=Math.max(.2,d.duration)){var m={};this.altAudio&&(m.type="video"),this.hls.trigger(u.a.BUFFER_EOS,m),this.state=Rt.ENDED;return}}this._fetchPayloadOrEos(i,c,p)},t.prototype._fetchPayloadOrEos=function(t,n,r){var i=this.fragPrevious,s=this.level,o=r.fragments,u=o.length;if(u===0)return;var f=o[0].start,l=o[u-1].start+o[u-1].duration,c=n.end,h=void 0;if(r.initSegment&&!r.initSegment.data)h=r.initSegment;else if(r.live){var p=this.config.initialLiveManifestSize;if(u<p){a.b.warn("Can not start playback of a level, reason: not enough fragments "+u+" < "+p);return}h=this._ensureFragmentAtLivePoint(r,c,f,l,i,o,u);if(h===null)return}else c<f&&(h=o[0]);h||(h=this._findFragment(f,i,u,o,c,l,r)),h&&this._loadFragmentOrKey(h,s,r,t,c)},t.prototype._ensureFragmentAtLivePoint=function(t,n,r,i,s,o,u){var f=this.hls.config,l=this.media,c=void 0,h=f.liveMaxLatencyDuration!==undefined?f.liveMaxLatencyDuration:f.liveMaxLatencyDurationCount*t.targetduration;if(n<Math.max(r-f.maxFragLookUpTolerance,i-h)){var p=this.liveSyncPosition=this.computeLivePosition(r,t);a.b.log("buffer end: "+n.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+p.toFixed(3)),n=p,l&&l.readyState&&l.duration>p&&(l.currentTime=p),this.nextLoadPosition=p}if(t.PTSKnown&&n>i&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(s)if(!t.programDateTime){var d=s.sn+1;if(d>=t.startSN&&d<=t.endSN){var v=o[d-t.startSN];s.cc===v.cc&&(c=v,a.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=rt.search(o,function(e){return s.cc-e.cc}),c&&a.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn))}else c=this._findFragmentByPDT(o,s.endPdt+1);c||(c=o[Math.min(u-1,Math.round(u/2))],a.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},t.prototype._findFragmentByPDT=function(t,n){if(!t||n===undefined)return null;var r=t[0];if(n<r.pdt)return null;var i=t[t.length-1];if(n>=i.endPdt)return null;for(var s=0;s<t.length;++s){var o=t[s];if(n<o.endPdt)return o}return null},t.prototype._findFragmentBySN=function(t,n,r,i){var s=this.hls.config,o=void 0,u=s.maxFragLookUpTolerance,a=t?n[t.sn-n[0].sn+1]:undefined,f=function(t){var n=Math.min(u,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0};return r<i&&(r>i-u&&(u=0),a&&!f(a)?o=a:o=rt.search(n,f)),o},t.prototype._findFragment=function(t,n,r,i,s,o,u){var f=this.hls.config,l=void 0,c=void 0;s<o?u.programDateTime?c=this._findFragmentByPDT(i,s*1e3+(u.programDateTime?Date.parse(u.programDateTime):0)-1e3*t):c=this._findFragmentBySN(n,i,s,o):c=i[r-1];if(c){l=c;var h=l.sn-u.startSN,p=n&&l.level===n.level,d=i[h-1],v=i[h+1];if(n&&l.sn===n.sn)if(p&&!l.backtracked)if(l.sn<u.endSN){var m=n.deltaPTS;m&&m>f.maxBufferHole&&n.dropped&&h?(l=d,a.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=v,a.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(v&&v.backtracked?(a.b.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+v.sn),l=v):(a.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,d?(l=d,l.backtracked=!0):h&&(l=null)))}return l},t.prototype._loadFragmentOrKey=function(t,n,r,i,s){if(t.decryptdata&&t.decryptdata.uri!=null&&t.decryptdata.key==null)a.b.log("Loading key for "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n),this.state=Rt.KEY_LOADING,this.hls.trigger(u.a.KEY_LOADING,{frag:t});else{a.b.log("Loading "+t.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+n+", currentTime:"+i.toFixed(3)+",bufferEnd:"+s.toFixed(3));var o=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,!isNaN(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||o===bt.NOT_LOADED?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(u.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new vt(this.hls,"main")),this.state=Rt.FRAG_LOADING):o===bt.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)}},t.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,X.LevelType.MAIN)},t.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var t=void 0,n=void 0,r=this.media;if(r&&r.readyState&&r.seeking===!1){n=r.currentTime,n>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=n),st.isBuffered(r,n)?t=this.getBufferedFrag(n):st.isBuffered(r,n+.1)&&(t=this.getBufferedFrag(n+.1));if(t){var i=t;if(i!==this.fragPlaying){this.hls.trigger(u.a.FRAG_CHANGED,{frag:i});var s=i.level;(!this.fragPlaying||this.fragPlaying.level!==s)&&this.hls.trigger(u.a.LEVEL_SWITCHED,{level:s}),this.fragPlaying=i}}}},t.prototype.immediateLevelSwitch=function(){a.b.log("immediateLevelSwitch");if(!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,n=void 0;t?(n=t.paused,t.pause()):n=!0,this.previouslyPaused=n}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,st.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},t.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var n=void 0,r=void 0,i=void 0;r=this.getBufferedFrag(t.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1);if(!t.paused){var s=this.hls.nextLoadLevel,o=this.levels[s],u=this.fragLastKbps;u&&this.fragCurrent?n=this.fragCurrent.duration*o.bitrate/(1e3*u)+1:n=0}else n=0;i=this.getBufferedFrag(t.currentTime+n);if(i){i=this.followingBufferedFrag(i);if(i){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}}},t.prototype.flushMainBuffer=function(t,n){this.state=Rt.BUFFER_FLUSHING;var r={startOffset:t,endOffset:n};this.altAudio&&(r.type="video"),this.hls.trigger(u.a.BUFFER_FLUSHING,r)},t.prototype.onMediaAttached=function(t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("seeked",this.onvseeked),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)},t.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(a.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var n=this.levels;n&&n.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=undefined})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var t=this.media,n=t?t.currentTime:undefined,r=this.config;isNaN(n)||a.b.log("media seeking to "+n.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:t,s=st.bufferInfo(i,n,this.config.maxBufferHole);if(this.state===Rt.FRAG_LOADING){var o=this.fragCurrent;if(s.len===0&&o){var u=r.maxFragLookUpTolerance,f=o.start-u,l=o.start+o.duration+u;n<f||n>l?(o.loader&&(a.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Rt.IDLE):a.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===Rt.ENDED&&(s.len===0&&(this.fragPrevious=0),this.state=Rt.IDLE);t&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},t.prototype.onMediaSeeked=function(){var t=this.media,n=t?t.currentTime:undefined;isNaN(n)||a.b.log("media seeked to "+n.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){a.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){a.b.log("trigger BUFFER_RESET"),this.hls.trigger(u.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(t){var n=!1,r=!1,i=void 0;t.levels.forEach(function(e){i=e.audioCodec,i&&(i.indexOf("mp4a.40.2")!==-1&&(n=!0),i.indexOf("mp4a.40.5")!==-1&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&a.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var s=this.config;(s.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(s.startPosition)},t.prototype.onLevelLoaded=function(t){var n=t.details,r=t.level,i=this.levels[this.levelLastLoaded],s=this.levels[r],o=n.totalduration,f=0;a.b.log("level "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+o);if(n.live){var l=s.details;l&&n.fragments.length>0?(xt(l,n),f=n.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(f,l),n.PTSKnown&&!isNaN(f)?a.b.log("live playlist sliding:"+f.toFixed(3)):(a.b.log("live playlist - outdated PTS, unknown sliding"),Mt(this.fragPrevious,i,n))):(a.b.log("live playlist - first load, unknown sliding"),n.PTSKnown=!1,Mt(this.fragPrevious,i,n))}else n.PTSKnown=!1;s.details=n,this.levelLastLoaded=r,this.hls.trigger(u.a.LEVEL_UPDATED,{details:n,level:r});if(this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var c=n.startTimeOffset;isNaN(c)?n.live?(this.startPosition=this.computeLivePosition(f,n),a.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(c<0&&(a.b.log("negative start time offset "+c+", count from end of last fragment"),c=f+o+c),a.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Rt.WAITING_LEVEL&&(this.state=Rt.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Rt.KEY_LOADING&&(this.state=Rt.IDLE,this.tick())},t.prototype.onFragLoaded=function(t){var n=this.fragCurrent,r=t.frag;if(this.state===Rt.FRAG_LOADING&&n&&r.type==="main"&&r.level===n.level&&r.sn===n.sn){var i=t.stats,s=this.levels[n.level],o=s.details;a.b.log("Loaded  "+n.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+n.level),this.bitrateTest=!1,this.stats=i;if(r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=Rt.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(u.a.FRAG_BUFFERED,{stats:i,frag:n,id:"main"}),this.tick();else if(r.sn==="initSegment")this.state=Rt.IDLE,i.tparsed=i.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(u.a.FRAG_BUFFERED,{stats:i,frag:n,id:"main"}),this.tick();else{this.state=Rt.PARSING;var f=o.totalduration,l=n.level,c=n.sn,h=this.config.defaultAudioCodec||s.audioCodec;this.audioCodecSwap&&(a.b.log("swapping playlist audio codec"),h===undefined&&(h=this.lastAudioCodec),h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,a.b.log("Parsing "+c+" of ["+o.startSN+" ,"+o.endSN+"],level "+l+", cc "+n.cc);var p=this.demuxer;p||(p=this.demuxer=new vt(this.hls,"main"));var d=this.media,v=d&&d.seeking,m=!v&&(o.PTSKnown||!o.live),g=o.initSegment?o.initSegment.data:[];p.push(t.payload,g,h,s.videoCodec,n,f,m,undefined)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(t){var n=this.fragCurrent,r=t.frag;if(n&&t.id==="main"&&r.sn===n.sn&&r.level===n.level&&this.state===Rt.PARSING){var i=t.tracks,s=void 0,o=void 0;i.audio&&this.altAudio&&delete i.audio,o=i.audio;if(o){var f=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();f&&this.audioCodecSwap&&(a.b.log("swapping playlist audio codec"),f.indexOf("mp4a.40.5")!==-1?f="mp4a.40.2":f="mp4a.40.5"),this.audioCodecSwitch&&o.metadata.channelCount!==1&&l.indexOf("firefox")===-1&&(f="mp4a.40.5"),l.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(f="mp4a.40.2",a.b.log("Android: force audio codec to "+f)),o.levelCodec=f,o.id=t.id}o=i.video,o&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=t.id),this.hls.trigger(u.a.BUFFER_CODECS,i);for(s in i){o=i[s],a.b.log("main track:"+s+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var c=o.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.a.BUFFER_APPENDING,{type:s,data:c,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&t.id==="main"&&i.sn===r.sn&&i.level===r.level&&(t.type!=="audio"||!this.altAudio)&&this.state===Rt.PARSING){var s=this.levels[this.level],o=r;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),t.hasAudio===!0&&o.addElementaryStream(S.ElementaryStreamTypes.AUDIO),t.hasVideo===!0&&o.addElementaryStream(S.ElementaryStreamTypes.VIDEO),a.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0));if(t.type==="video"){o.dropped=t.dropped;if(o.dropped)if(!o.backtracked){var f=s.details;if(!f||o.sn!==f.startSN){a.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=Rt.IDLE,this.fragPrevious=o,this.tick();return}a.b.warn("missing video frame(s) on first frag, appending with gap")}else a.b.warn("Already backtracked on this fragment, appending with the gap");else o.backtracked=!1}var l=St(s.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),c=this.hls;c.trigger(u.a.LEVEL_PTS_UPDATED,{details:s.details,level:this.level,drift:l,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===Rt.PARSING&&(n.appended=!0,n.pendingBuffering=!0,c.trigger(u.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(t){var n=this.fragCurrent,r=t.frag;n&&t.id==="main"&&r.sn===n.sn&&r.level===n.level&&this.state===Rt.PARSING&&(this.stats.tparsed=performance.now(),this.state=Rt.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(t){var n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){a.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(a.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Rt.IDLE}var s=this.hls;s.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(t){var n=t.id,r=!!this.hls.audioTracks[n].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(a.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},t.prototype.onBufferCreated=function(t){var n=t.tracks,r=void 0,i=void 0,s=!1;for(var o in n){var u=n[o];u.id==="main"?(i=o,r=u,o==="video"&&(this.videoBuffer=n[o].buffer)):s=!0}s&&r?(a.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(t){if(t.parent==="main"){var n=this.state;if(n===Rt.PARSING||n===Rt.PARSED)this.pendingBuffering=t.pending>0,this._checkAppendedParsed()}},t.prototype._checkAppendedParsed=function(){if(this.state===Rt.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent;if(t){var n=this.mediaBuffer?this.mediaBuffer:this.media;a.b.log("main buffered : "+Nt.toString(n.buffered)),this.fragPrevious=t;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=Rt.IDLE}this.tick()}},t.prototype.onError=function(t){var n=t.frag||this.fragCurrent;if(n&&n.type!=="main")return;var r=!!this.media&&st.isBuffered(this.media,this.media.currentTime)&&st.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);a.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Rt.FRAG_LOADING_WAITING_RETRY}else a.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Rt.ERROR;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==Rt.ERROR&&(t.fatal?(this.state=Rt.ERROR,a.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):!t.levelRetry&&this.state===Rt.WAITING_LEVEL&&(this.state=Rt.IDLE));break;case o.a.BUFFER_FULL_ERROR:t.parent==="main"&&(this.state===Rt.PARSING||this.state===Rt.PARSED)&&(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Rt.IDLE):(a.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break;default:}},t.prototype._reduceMaxBufferLength=function(t){var n=this.config;return n.maxMaxBufferLength>=t?(n.maxMaxBufferLength/=2,a.b.warn("main:reduce max buffer length to "+n.maxMaxBufferLength+"s"),!0):!1},t.prototype._checkBuffer=function(){var t=this.media,n=this.config;if(t&&t.readyState){var r=t.currentTime,i=this.mediaBuffer?this.mediaBuffer:t,s=i.buffered;if(!this.loadedmetadata&&s.length){this.loadedmetadata=!0;var f=t.seeking?r:this.startPosition;r!==f&&(a.b.log("target start position not buffered, seek to buffered.start(0) "+f+" from current time"+r+" "),t.currentTime=f)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var l=st.bufferInfo(t,r,n.maxBufferHole),c=!(t.paused&&t.readyState>1||t.ended||t.buffered.length===0),h=.5,p=r!==this.lastCurrentTime;if(p)this.stallReported&&(a.b.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=undefined,this.nudgeRetry=0;else if(c){var d=performance.now(),v=this.hls;if(!this.stalled)this.stalled=d,this.stallReported=!1;else{var m=d-this.stalled,g=l.len,y=this.nudgeRetry||0,b=this.fragmentTracker.getPartialFragment(r);if(b!==null){var w=0;for(var E=0;E<t.buffered.length;E++){var S=t.buffered.start(E);if(r>=w&&r<S){t.currentTime=Math.max(S,t.currentTime+.1),a.b.warn("skipping hole, adjusting currentTime from "+r+" to "+t.currentTime),this.stalled=undefined,v.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+t.currentTime,frag:b});return}w=t.buffered.end(E)}}if(g>h&&m>n.highBufferWatchdogPeriod*1e3){this.stallReported||(this.stallReported=!0,a.b.warn("playback stalling in high buffer @"+r),v.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=undefined,this.nudgeRetry=++y;if(y<n.nudgeMaxRetry){var x=t.currentTime,T=x+y*n.nudgeOffset;a.b.log("adjust currentTime from "+x+" to "+T),t.currentTime=T,v.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.b.error("still stuck in high buffer @"+r+" after "+n.nudgeMaxRetry+", raise fatal error"),v.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})}}}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=Rt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this.fragmentTracker.detectEvictedFragments(S.ElementaryStreamTypes.VIDEO,t.buffered),this.state=Rt.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(t,n){var r=this.config.liveSyncDuration!==undefined?this.config.liveSyncDuration:this.config.liveSyncDurationCount*n.targetduration;return t+Math.max(0,n.totalduration-r)},jt(t,[{key:"state",set:function(t){if(this.state!==t){var n=this.state;this._state=t,a.b.log("main stream:"+n+"->"+t),this.hls.trigger(u.a.STREAM_STATE_TRANSITION,{previousState:n,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var n=this.getBufferedFrag(t.currentTime);if(n)return n.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),t}(Bt),zt=Ut,Wt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Jt=function(e){function t(n){Xt(this,t);var r=Vt(this,e.call(this,n,u.a.MANIFEST_LOADED,u.a.LEVEL_LOADED,u.a.FRAG_LOADED,u.a.ERROR));return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return $t(t,e),t.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},t.prototype.cleanTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=undefined)}),this.timer!==null&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(t){var n=[],r=void 0,i={},s=null,f=!1,l=!1,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=[];t.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,l=l||!!e.audioCodec||!!e.attrs&&!!e.attrs.AUDIO,c===!0&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=undefined),s=i[e.bitrate],s===undefined?(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)):s.url.push(e.url)}),f===!0&&l===!0&&(n=n.filter(function(e){var t=e.videoCodec;return!!t})),n=n.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||O(t))&&(!n||O(n))}),t.audioTracks&&(h=t.audioTracks.filter(function(e){return!e.audioCodec||O(e.audioCodec,"audio")}));if(n.length>0){r=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var p=0;p<n.length;p++)if(n[p].bitrate===r){this._firstLevel=p,a.b.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+r);break}this.hls.trigger(u.a.MANIFEST_PARSED,{levels:n,audioTracks:h,firstLevel:this._firstLevel,stats:t.stats,audio:l,video:f,altAudio:h.length>0})}else this.hls.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(t){var n=this._levels,r=this.hls;if(t>=0&&t<n.length){this.cleanTimer();if(this.currentLevelIndex!==t){a.b.log("switching to level "+t),this.currentLevelIndex=t;var i=n[t];i.level=t,r.trigger(u.a.LEVEL_SWITCHING,i)}var s=n[t],f=s.details;if(!f||f.live===!0){var l=s.urlId;r.trigger(u.a.LEVEL_LOADING,{url:s.url[l],level:t,id:l})}}else r.trigger(u.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(t){if(t.fatal===!0){t.type===o.b.NETWORK_ERROR&&this.cleanTimer();return}var n=!1,r=!1,i=void 0;switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:i=t.frag.level,r=!0;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,n=!0;break;case o.a.REMUX_ALLOC_ERROR:i=t.level,n=!0}i!==undefined&&this.recoverLevel(t,i,n,r)},t.prototype.recoverLevel=function(t,n,r,i){var s=this,o=this.hls.config,u=t.details,f=this._levels[n],l=void 0,c=void 0,h=void 0;f.loadError++,f.fragmentError=i;if(r===!0){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry)){a.b.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.cleanTimer(),t.fatal=!0;return}c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},c),t.levelRetry=!0,this.levelRetryCount++,a.b.warn("level controller, "+u+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}if(r===!0||i===!0)l=f.url.length,l>1&&f.loadError<l?(a.b.warn("level controller, "+u+" for level "+n+": switching to redundant stream id "+f.urlId),f.urlId=(f.urlId+1)%l,f.details=undefined):this.manualLevelIndex===-1?(h=n===0?this._levels.length-1:n-1,a.b.warn("level controller, "+u+": switch to "+h),this.hls.nextAutoLevel=this.currentLevelIndex=h):i===!0&&(a.b.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null)},t.prototype.onFragLoaded=function(t){var n=t.frag;if(n!==undefined&&n.type==="main"){var r=this._levels[n.level];r!==undefined&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(t){var n=this,r=t.level;if(r===this.currentLevelIndex){var i=this._levels[r];i.fragmentError===!1&&(i.loadError=0,this.levelRetryCount=0);var s=t.details;if(s.live){var o=1e3*(s.averagetargetduration?s.averagetargetduration:s.targetduration),u=o,f=i.details;f&&s.endSN===f.endSN&&(u/=2,a.b.log("same live playlist, reload twice faster")),u-=performance.now()-t.stats.trequest,u=Math.max(o/2,Math.round(u)),a.b.log("live playlist, reload in "+Math.round(u)+" ms"),this.timer=setTimeout(function(){return n.loadLevel()},u)}else this.cleanTimer()}},t.prototype.loadLevel=function(){var t=void 0,n=void 0;this.currentLevelIndex!==null&&this.canload===!0&&(t=this._levels[this.currentLevelIndex],t!==undefined&&t.url.length>0&&(n=t.urlId,this.hls.trigger(u.a.LEVEL_LOADING,{url:t.url[n],level:this.currentLevelIndex,id:n})))},Wt(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var n=this._levels;n&&(t=Math.min(t,n.length-1),(this.currentLevelIndex!==t||n[t].details===undefined)&&this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,this._startLevel===undefined&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(this._startLevel===undefined){var t=this.hls.config.startLevel;return t!==undefined?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}]),t}(p),Kt=Jt,Qt=n(4),nn=function(e){function t(n){Zt(this,t);var r=en(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.FRAG_PARSING_METADATA));return r.id3Track=undefined,r.media=undefined,r}return tn(t,e),t.prototype.destroy=function(){p.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(t){this.media=t.media,!this.media},t.prototype.onMediaDetaching=function(){Yt(this.id3Track),this.id3Track=undefined,this.media=undefined},t.prototype.getID3Track=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.kind==="metadata"&&r.label==="id3")return Gt(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(t){var n=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue;for(var s=0;s<r.length;s++){var o=Qt.a.getID3Frames(r[s].data);if(o){var u=r[s].pts,a=s<r.length-1?r[s+1].pts:n.endPTS;u===a&&(a+=1e-4);for(var f=0;f<o.length;f++){var l=o[f];if(!Qt.a.isTimeStampFrame(l)){var c=new i(u,a,"");c.value=l,this.id3Track.addCue(c)}}}}},t}(p),rn=nn,un=function(){function e(t){on(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(t,n){var r=Math.pow(this.alpha_,t);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},e}(),an=un,ln=function(){function e(t,n,r,i){fn(this,e),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new an(n),this.fast_=new an(r)}return e.prototype.sample=function(t,n){t=Math.max(t,this.minDelayMs_);var r=8e3*n/t,i=t/1e3;this.fast_.sample(i,r),this.slow_.sample(i,r)},e.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),cn=ln,hn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mn=function(e){function t(n){pn(this,t);var r=dn(this,e.call(this,n,u.a.FRAG_LOADING,u.a.FRAG_LOADED,u.a.FRAG_BUFFERED,u.a.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=n,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return vn(t,e),t.prototype.destroy=function(){this.clearTimer(),p.prototype.destroy.call(this)},t.prototype.onFragLoading=function(t){var n=t.frag;if(n.type==="main"){this.timer||(this.timer=setInterval(this.onCheck,100));if(!this._bwEstimator){var r=this.hls,i=t.frag.level,s=r.levels[i].details.live,o=r.config,u=void 0,a=void 0;s?(u=o.abrEwmaFastLive,a=o.abrEwmaSlowLive):(u=o.abrEwmaFastVoD,a=o.abrEwmaSlowVoD),this._bwEstimator=new cn(r,a,u,o.abrEwmaDefaultEstimate)}this.fragCurrent=n}},t.prototype._abandonRulesCheck=function(){var t=this.hls,n=t.media,r=this.fragCurrent,i=r.loader,s=t.minAutoLevel;if(!i||i.stats&&i.stats.aborted){a.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var o=i.stats;if(n&&o&&(!n.paused&&n.playbackRate!==0||!n.readyState)&&r.autoLevel&&r.level){var f=performance.now()-o.trequest,l=Math.abs(n.playbackRate);if(f>500*r.duration/l){var c=t.levels,h=Math.max(1,o.bw?o.bw/8:o.loaded*1e3/f),p=c[r.level],d=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,v=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*d/8)),m=n.currentTime,g=(v-o.loaded)/h,y=(st.bufferInfo(n,m,t.config.maxBufferHole).end-m)/l;if(y<2*r.duration/l&&g>y){var b=void 0,w=void 0;for(w=r.level-1;w>s;w--){var E=c[w].realBitrate?Math.max(c[w].realBitrate,c[w].bitrate):c[w].bitrate;b=r.duration*E/(6.4*h);if(b<y)break}b<g&&(a.b.warn("loading too slow, abort fragment loading and switch to level "+w+":fragLoadedDelay["+w+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=w,this._bwEstimator.sample(f,o.loaded),i.abort(),this.clearTimer(),t.trigger(u.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}},t.prototype.onFragLoaded=function(t){var n=t.frag;if(n.type==="main"&&!isNaN(n.sn)){this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1;if(this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[n.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,s=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:s},r.realBitrate=Math.round(8*i/s)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},t.prototype.onFragBuffered=function(t){var n=t.stats,r=t.frag;if(n.aborted!==!0&&r.type==="main"&&!isNaN(r.sn)&&(!r.bitrateTest||n.tload===n.tbuffered)){var i=n.tparsed-n.trequest;a.b.log("latency/loading/parsing/append/kbps:"+Math.round(n.tfirst-n.trequest)+"/"+Math.round(n.tload-n.tfirst)+"/"+Math.round(n.tparsed-n.tload)+"/"+Math.round(n.tbuffered-n.tparsed)+"/"+Math.round(8*n.loaded/(n.tbuffered-n.trequest))),this._bwEstimator.sample(i,n.loaded),n.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(t){switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer();break;default:}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(t,n,r,i,s,o,u,f,l){for(var c=s;c>=i;c--){var h=l[c],p=h.details,d=p?p.totalduration/p.fragments.length:n,v=p?p.live:!1,m=void 0;c<=t?m=u*r:m=f*r;var g=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,y=g*d/m;a.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(m)+"/"+g+"/"+d+"/"+o+"/"+y);if(m>g&&(!y||v&&!this.bitrateTestDelay||y<o))return c}return-1},hn(t,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,n=this._bwEstimator;if(t!==-1&&(!n||!n.canEstimate()))return t;var r=this._nextABRAutoLevel;return t!==-1&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,n=t.maxAutoLevel,r=t.levels,i=t.config,s=t.minAutoLevel,o=t.media,u=this.lastLoadedFragLevel,f=this.fragCurrent?this.fragCurrent.duration:0,l=o?o.currentTime:0,c=o&&o.playbackRate!==0?Math.abs(o.playbackRate):1,h=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,p=(st.bufferInfo(o,l,i.maxBufferHole).end-l)/c,d=this._findBestLevel(u,f,h,s,n,p,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(d>=0)return d;a.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=f?Math.min(f,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(p===0){var y=this.bitrateTestDelay;if(y){var b=f?Math.min(f,i.maxLoadingDelay):i.maxLoadingDelay;v=b-y,a.b.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),m=g=1}}return d=this._findBestLevel(u,f,h,s,n,p+v,m,g,r),Math.max(d,0)}}]),t}(p),gn=mn,En=ct(),Sn=function(e){function t(n){yn(this,t);var r=bn(this,e.call(this,n,u.a.MEDIA_ATTACHING,u.a.MEDIA_DETACHING,u.a.MANIFEST_PARSED,u.a.BUFFER_RESET,u.a.BUFFER_APPENDING,u.a.BUFFER_CODECS,u.a.BUFFER_EOS,u.a.BUFFER_FLUSHING,u.a.LEVEL_PTS_UPDATED,u.a.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return wn(t,e),t.prototype.destroy=function(){p.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(t){var n=t.type,r=this.tracks.audio;if(n==="audio"&&r&&r.container==="audio/mpeg"){var i=this.sourceBuffer.audio,s=Math.abs(i.timestampOffset-t.start);if(s>.1){var o=i.updating;try{i.abort()}catch(u){o=!0,a.b.warn("can not abort audio buffer: "+u)}o?this.audioTimestampOffset=t.start:(a.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},t.prototype.onManifestParsed=function(t){var n=t.audio,r=t.video||t.levels.length&&t.audio,i=0;t.altAudio&&(n||r)&&(i=(n?1:0)+(r?1:0),a.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(t){var n=this.media=t.media;if(n){var r=this.mediaSource=new En;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),n.src=URL.createObjectURL(r),this._objectUrl=n.src}},t.prototype.onMediaDetaching=function(){a.b.log("media source detaching");var t=this.mediaSource;if(t){if(t.readyState==="open")try{t.endOfStream()}catch(n){a.b.warn("onMediaDetaching:"+n.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):a.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){a.b.log("media source opened"),this.hls.trigger(u.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var t=this.pendingTracks,n=Object.keys(t).length;n&&(this.sourceBufferNb<=n||this.sourceBufferNb===0)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){a.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){a.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;a.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var n=this.parent,r=this.segments.reduce(function(e,t){return t.parent===n?e+1:e},0),i={},s=this.sourceBuffer;for(var o in s)i[o]=s[o].buffered;this.hls.trigger(u.a.BUFFER_APPENDED,{parent:n,pending:r,timeRanges:i}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(t){a.b.error("sourceBuffer error:",t),this.hls.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var n in t){var r=t[n];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(i){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(t){if(Object.keys(this.sourceBuffer).length===0){for(var n in t)this.pendingTracks[n]=t[n];var r=this.mediaSource;r&&r.readyState==="open"&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(t){var n=this.sourceBuffer,r=this.mediaSource;for(var i in t)if(!n[i]){var s=t[i],f=s.levelCodec||s.codec,l=s.container+";codecs="+f;a.b.log("creating sourceBuffer("+l+")");try{var c=n[i]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[i]={codec:f,container:s.container},s.buffer=c}catch(h){a.b.error("error while trying to add sourceBuffer:"+h.message),this.hls.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:h,mimeType:l})}}this.hls.trigger(u.a.BUFFER_CREATED,{tracks:t})},t.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},t.prototype.onBufferAppendFail=function(t){a.b.error("sourceBuffer error:",t.event),this.hls.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(t){var n=this.sourceBuffer,r=t.type;for(var i in n)if(!r||i===r)n[i].ended||(n[i].ended=!0,a.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var t=this.sourceBuffer,n=this.mediaSource;if(!n||n.readyState!=="open"){this._needsEos=!1;return}for(var r in t){var i=t[r];if(!i.ended)return;if(i.updating){this._needsEos=!0;return}}a.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{n.endOfStream()}catch(s){a.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},t.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(t){var n=t.details;n.fragments.length>0&&(this._levelDuration=n.totalduration+n.fragments[0].start,this._live=n.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var t=this.hls.config,n=void 0;if(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")return;for(var r in this.sourceBuffer)if(this.sourceBuffer[r].updating===!0)return;n=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration);if(this._live===!0&&t.liveDurationInfinity===!0)a.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=Infinity;else if(this._levelDuration>this._msDuration&&this._levelDuration>n||n===Infinity||isNaN(n))a.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration},t.prototype.doFlush=function(){while(this.flushRange.length){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type)){this._needsFlush=!0;return}this.flushRange.shift(),this.flushBufferCounter=0}if(this.flushRange.length===0){this._needsFlush=!1;var n=0,r=this.sourceBuffer;try{for(var i in r)n+=r[i].buffered.length}catch(s){a.b.error("error while accessing sourceBuffer.buffered")}this.appended=n,this.hls.trigger(u.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var t=this.hls,n=this.sourceBuffer,r=this.segments;if(Object.keys(n).length){if(this.media.error){this.segments=[],a.b.error("trying to append although a media error occured, flush segment and abort");return}if(this.appending)return;if(r&&r.length){var i=r.shift();try{var s=i.type,f=n[s];f?f.updating?r.unshift(i):(f.ended=!1,this.parent=i.parent,f.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(l){a.b.error("error while trying to append buffer:"+l.message),r.unshift(i);var c={type:o.b.MEDIA_ERROR,parent:i.parent};l.code!==22?(this.appendError?this.appendError++:this.appendError=1,c.details=o.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(a.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],c.fatal=!0,t.trigger(u.a.ERROR,c)):(c.fatal=!1,t.trigger(u.a.ERROR,c))):(this.segments=[],c.details=o.a.BUFFER_FULL_ERROR,c.fatal=!1,t.trigger(u.a.ERROR,c))}}}},t.prototype.flushBuffer=function(t,n,r){var i=void 0,s=void 0,o=void 0,u=void 0,f=void 0,l=void 0,c=this.sourceBuffer;if(Object.keys(c).length){a.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+n);if(this.flushBufferCounter<this.appended)for(var h in c){if(r&&h!==r)continue;i=c[h],i.ended=!1;if(!!i.updating)return a.b.warn("cannot flush, sb updating in progress"),!1;try{for(s=0;s<i.buffered.length;s++){o=i.buffered.start(s),u=i.buffered.end(s),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&n===Number.POSITIVE_INFINITY?(f=t,l=n):(f=Math.max(o,t),l=Math.min(u,n));if(Math.min(l,u)-f>.5)return this.flushBufferCounter++,a.b.log("flush "+h+" ["+f+","+l+"], of ["+o+","+u+"], pos:"+this.media.currentTime),i.remove(f,l),!1}}catch(p){a.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}else a.b.warn("abort flushing too many retries");a.b.log("buffer flushed")}return!0},t}(p),xn=Sn,Tn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ln=function(e){function t(n){return Nn(this,t),Cn(this,e.call(this,n,u.a.FPS_DROP_LEVEL_CAPPING,u.a.MEDIA_ATTACHING,u.a.MANIFEST_PARSED))}return kn(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(n){t.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},t.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},t.prototype.onManifestParsed=function(t){var n=this.hls;this.restrictedLevels=[],n.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,n.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var n=this.hls;n.autoLevelCapping=this.getMaxLevel(t-1),n.autoLevelCapping>this.autoLevelCapping&&n.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}},t.prototype.getMaxLevel=function(n){var r=this;if(!this.levels)return-1;var i=this.levels.filter(function(e,i){return t.isLevelAllowed(i,r.restrictedLevels)&&i<=n});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return n.indexOf(t)===-1},t.getMaxLevelByMediaSize=function(t,n,r){if(!t||t&&!t.length)return-1;var i=function(t,n){return n?t.width!==n.width||t.height!==n.height:!0},s=t.length-1;for(var o=0;o<t.length;o+=1){var u=t[o];if((u.width>=n||u.height>=r)&&i(u,t[o+1])){s=o;break}}return s},Tn(t,[{key:"mediaWidth",get:function(){var n=void 0,r=this.media;return r&&(n=r.width||r.clientWidth||r.offsetWidth,n*=t.contentScaleFactor),n}},{key:"mediaHeight",get:function(){var n=void 0,r=this.media;return r&&(n=r.height||r.clientHeight||r.offsetHeight,n*=t.contentScaleFactor),n}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(n){}return t}}]),t}(p),An=Ln,Dn=function(e){function t(n){return On(this,t),Mn(this,e.call(this,n,u.a.MEDIA_ATTACHING))}return _n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=this.video=t.media instanceof HTMLVideoElement?t.media:null;typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(t,n,r){var i=performance.now();if(n){if(this.lastTime){var s=i-this.lastTime,o=r-this.lastDroppedFrames,f=n-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;c.trigger(u.a.FPS_DROP,{currentDropped:o,currentDecoded:f,totalDroppedFrames:r});if(l>0&&o>c.config.fpsDroppedMonitoringThreshold*f){var h=c.currentLevel;a.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=h)&&(h-=1,c.trigger(u.a.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:c.currentLevel}),c.autoLevelCapping=h,c.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}},t.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var n=t.getVideoPlaybackQuality();this.checkFPS(t,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}(p),Pn=Dn,Bn=function(){function e(t){Hn(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var t=this.loader;t&&t.readyState!==4&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(t,n,r){this.context=t,this.config=n,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=n.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var t=void 0,n=this.context;t=this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,n.url)}catch(s){t.open("GET",n.url,!0),i(t,n.url)}t.readyState||t.open("GET",n.url,!0)}catch(s){this.callbacks.onError({code:t.status,text:s.message},n,t);return}n.rangeEnd&&t.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=n.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.prototype.readystatechange=function(t){var n=t.currentTarget,r=n.readyState,i=this.stats,s=this.context,o=this.config;if(i.aborted)return;if(r>=2){window.clearTimeout(this.requestTimeout),i.tfirst===0&&(i.tfirst=Math.max(performance.now(),i.trequest));if(r===4){var u=n.status;if(u>=200&&u<300){i.tload=Math.max(i.tfirst,performance.now());var f=void 0,l=void 0;s.responseType==="arraybuffer"?(f=n.response,l=f.byteLength):(f=n.responseText,l=f.length),i.loaded=i.total=l;var c={url:n.responseURL,data:f};this.callbacks.onSuccess(c,i,s,n)}else i.retry>=o.maxRetry||u>=400&&u<499?(a.b.error(u+" while loading "+s.url),this.callbacks.onError({code:u,text:n.statusText},s,n)):(a.b.warn(u+" while loading "+s.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},e.prototype.loadtimeout=function(){a.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(t){var n=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,n)},e}(),jn=Bn,Fn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Un=function(e){function t(n){In(this,t);var r=qn(this,e.call(this,n,u.a.MANIFEST_LOADING,u.a.MANIFEST_PARSED,u.a.AUDIO_TRACK_LOADED,u.a.ERROR));return r.ticks=0,r.ontick=r.tick.bind(r),r}return Rn(t,e),t.prototype.destroy=function(){this.cleanTimer(),p.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,this.ticks===1&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(t){t.fatal&&t.type===o.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestParsed=function(t){var n=this,r=t.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(u.a.AUDIO_TRACKS_UPDATED,{audioTracks:r});var s=0;r.forEach(function(e){if(e.default&&!i){n.audioTrack=s,i=!0;return}s++}),i===!1&&r.length&&(a.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(a.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,a.b.log("switching to audioTrack "+t);var n=this.tracks[t],r=this.hls,i=n.type,s=n.url,o={id:t,type:i,url:s};r.trigger(u.a.AUDIO_TRACK_SWITCHING,o);var f=n.details;s&&(f===undefined||f.live===!0)&&(a.b.log("(re)loading playlist for audioTrack "+t),r.trigger(u.a.AUDIO_TRACK_LOADING,{url:s,id:t}))}},t.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,a.b.log("updating audioTrack "+t);var n=this.tracks[t],r=n.url,i=n.details;r&&(i===undefined||i.live===!0)&&(a.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(u.a.AUDIO_TRACK_LOADING,{url:r,id:t}))}},Fn(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){(this.trackId!==t||this.tracks[t].details===undefined)&&this.setAudioTrackInternal(t)}}]),t}(p),zn=Un,Wn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Jn={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},Kn=function(e){function t(n,r){Xn(this,t);var i=Vn(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.AUDIO_TRACKS_UPDATED,u.a.AUDIO_TRACK_SWITCHING,u.a.AUDIO_TRACK_LOADED,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.FRAG_PARSING_INIT_SEGMENT,u.a.FRAG_PARSING_DATA,u.a.FRAG_PARSED,u.a.ERROR,u.a.BUFFER_RESET,u.a.BUFFER_CREATED,u.a.BUFFER_APPENDED,u.a.BUFFER_FLUSHED,u.a.INIT_PTS_FOUND));return i.fragmentTracker=r,i.config=n.config,i.audioCodecSwap=!1,i._state=Jn.STOPPED,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return $n(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad()},t.prototype.onHandlerDestroyed=function(){this.state=Jn.STOPPED,this.fragmentTracker=null},t.prototype.onInitPtsFound=function(t){var n=t.id,r=t.frag.cc,i=t.initPTS;n==="main"&&(this.initPTS[r]=i,this.videoTrackCC=r,a.b.log("InitPTS for cc: "+r+" found from video track: "+i),this.state===Jn.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(t){if(this.tracks){var n=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,n>0&&t===-1?(a.b.log("audio:override startPosition with lastCurrentTime @"+n.toFixed(3)),this.state=Jn.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=Jn.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Jn.STOPPED},t.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Jn.STOPPED},t.prototype.doTick=function(){var t=void 0,n=void 0,r=void 0,i=this.hls,s=i.config;switch(this.state){case Jn.ERROR:case Jn.PAUSED:case Jn.BUFFER_FLUSHING:break;case Jn.STARTING:this.state=Jn.WAITING_TRACK,this.loadedmetadata=!1;break;case Jn.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!s.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else{t=this.nextLoadPosition;if(t===undefined)break}var f=this.mediaBuffer?this.mediaBuffer:this.media,l=this.videoBuffer?this.videoBuffer:this.media,c=st.bufferInfo(f,t,s.maxBufferHole),h=st.bufferInfo(l,t,s.maxBufferHole),p=c.len,d=c.end,v=this.fragPrevious,m=Math.min(s.maxBufferLength,s.maxMaxBufferLength),g=Math.max(m,h.len),y=this.audioSwitch,b=this.trackId;if((p<g||y)&&b<o.length){r=o[b].details;if(typeof r=="undefined"){this.state=Jn.WAITING_TRACK;break}if(!y&&!r.live&&v&&v.sn===r.endSN&&!c.nextStart)if(!this.media.seeking||this.media.duration-d<v.duration/2){this.hls.trigger(u.a.BUFFER_EOS,{type:"audio"}),this.state=Jn.ENDED;break}var w=r.fragments,E=w.length,S=w[0].start,x=w[E-1].start+w[E-1].duration,T=void 0;if(y)if(r.live&&!r.PTSKnown)a.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else{d=t;if(r.PTSKnown&&t<S){if(!(c.end>S||c.nextStart))return;a.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=S+.05}}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(d<=S){T=w[0],this.videoTrackCC!==null&&T.cc!==this.videoTrackCC&&(T=kt(w,this.videoTrackCC));if(r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var N=c.nextStart?c.nextStart:S;a.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(N+.05)),this.media.currentTime=N+.05;return}}else{var C=void 0,k=s.maxFragLookUpTolerance,L=v?w[v.sn-w[0].sn+1]:undefined,A=function(t){var n=Math.min(k,t.duration);return t.start+t.duration-n<=d?1:t.start-n>d&&t.start?-1:0};d<x?(d>x-k&&(k=0),L&&!A(L)?C=L:C=rt.search(w,A)):C=w[E-1],C&&(T=C,S=C.start,v&&T.level===v.level&&T.sn===v.sn&&(T.sn<r.endSN?(T=w[T.sn+1-r.startSN],a.b.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.decryptdata&&T.decryptdata.uri!=null&&T.decryptdata.key==null?(a.b.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=Jn.KEY_LOADING,i.trigger(u.a.KEY_LOADING,{frag:T})):(a.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+d.toFixed(3)),this.fragmentTracker.getState(T)===bt.NOT_LOADED&&(this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),i.trigger(u.a.FRAG_LOADING,{frag:T}),this.state=Jn.FRAG_LOADING)))}break;case Jn.WAITING_TRACK:n=this.tracks[this.trackId],n&&n.details&&(this.state=Jn.IDLE);break;case Jn.FRAG_LOADING_WAITING_RETRY:var O=performance.now(),M=this.retryDate;f=this.media;var _=f&&f.seeking;if(!M||O>=M||_)a.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Jn.IDLE;break;case Jn.WAITING_INIT_PTS:var D=this.videoTrackCC;if(this.initPTS[D]===undefined)break;var P=this.waitingFragment;if(P){var H=P.frag.cc;D!==H?(n=this.tracks[this.trackId],n.details&&n.details.live&&(a.b.warn("Waiting fragment CC ("+H+") does not match video track CC ("+D+")"),this.waitingFragment=null,this.state=Jn.IDLE)):(this.state=Jn.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Jn.IDLE;break;case Jn.STOPPED:case Jn.FRAG_LOADING:case Jn.PARSING:case Jn.PARSED:case Jn.ENDED:break;default:}},t.prototype.onMediaAttached=function(t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},t.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(a.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===Jn.ENDED&&(this.state=Jn.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(t){a.b.log("audio tracks updated"),this.tracks=t.audioTracks},t.prototype.onAudioTrackSwitching=function(t){var n=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=Jn.PAUSED,this.waitingFragment=null,n?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),n&&(this.audioSwitch=!0,this.state=Jn.IDLE),this.tick()},t.prototype.onAudioTrackLoaded=function(t){var n=t.details,r=t.id,i=this.tracks[r],s=n.totalduration,o=0;a.b.log("track "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+s);if(n.live){var u=i.details;u&&n.fragments.length>0?(xt(u,n),o=n.fragments[0].start,n.PTSKnown?a.b.log("live audio playlist sliding:"+o.toFixed(3)):a.b.log("live audio playlist - outdated PTS, unknown sliding")):(n.PTSKnown=!1,a.b.log("live audio playlist - first load, unknown sliding"))}else n.PTSKnown=!1;i.details=n;if(!this.startFragRequested){if(this.startPosition===-1){var f=n.startTimeOffset;isNaN(f)?this.startPosition=0:(a.b.log("start time offset found in playlist, adjust startPosition to "+f),this.startPosition=f)}this.nextLoadPosition=this.startPosition}this.state===Jn.WAITING_TRACK&&(this.state=Jn.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Jn.KEY_LOADING&&(this.state=Jn.IDLE,this.tick())},t.prototype.onFragLoaded=function(t){var n=this.fragCurrent,r=t.frag;if(this.state===Jn.FRAG_LOADING&&n&&r.type==="audio"&&r.level===n.level&&r.sn===n.sn){var i=this.tracks[this.trackId],s=i.details,o=s.totalduration,f=n.level,l=n.sn,c=n.cc,h=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",p=this.stats=t.stats;if(l==="initSegment")this.state=Jn.IDLE,p.tparsed=p.tbuffered=performance.now(),s.initSegment.data=t.payload,this.hls.trigger(u.a.FRAG_BUFFERED,{stats:p,frag:n,id:"audio"}),this.tick();else{this.state=Jn.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new vt(this.hls,"audio"));var d=this.initPTS[c],v=s.initSegment?s.initSegment.data:[];if(s.initSegment||d!==undefined){this.pendingBuffering=!0,a.b.log("Demuxing "+l+" of ["+s.startSN+" ,"+s.endSN+"],track "+f);var m=!1;this.demuxer.push(t.payload,v,h,null,n,o,m,d)}else a.b.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+s.startSN+" ,"+s.endSN+"],track "+f),this.waitingFragment=t,this.state=Jn.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(t){var n=this.fragCurrent,r=t.frag;if(n&&t.id==="audio"&&r.sn===n.sn&&r.level===n.level&&this.state===Jn.PARSING){var i=t.tracks,s=void 0;i.video&&delete i.video,s=i.audio;if(s){s.levelCodec=s.codec,s.id=t.id,this.hls.trigger(u.a.BUFFER_CODECS,i),a.b.log("audio track:audio,container:"+s.container+",codecs[level/parsed]=["+s.levelCodec+"/"+s.codec+"]");var o=s.initSegment;if(o){var f={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[f]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.a.BUFFER_APPENDING,f))}this.tick()}}},t.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&t.id==="audio"&&t.type==="audio"&&i.sn===r.sn&&i.level===r.level&&this.state===Jn.PARSING){var s=this.trackId,f=this.tracks[s],l=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),r.addElementaryStream(S.ElementaryStreamTypes.AUDIO),a.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),St(f.details,r,t.startPTS,t.endPTS);var c=this.audioSwitch,h=this.media,p=!1;if(c&&h)if(h.readyState){var d=h.currentTime;a.b.log("switching audio track : currentTime:"+d),d>=t.startPTS&&(a.b.log("switching audio track : flushing all audio"),this.state=Jn.BUFFER_FLUSHING,l.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,l.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:s}))}else this.audioSwitch=!1,l.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:s});var v=this.pendingData;if(!v){console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),l.trigger(u.a.ERROR,{type:o.b.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&v.push({type:t.type,data:e,parent:"audio",content:"data"})}),!p&&v.length&&(v.forEach(function(e){n.state===Jn.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(u.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(t){var n=this.fragCurrent,r=t.frag;n&&t.id==="audio"&&r.sn===n.sn&&r.level===n.level&&this.state===Jn.PARSING&&(this.stats.tparsed=performance.now(),this.state=Jn.PARSED,this._checkAppendedParsed())},t.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.prototype.onBufferCreated=function(t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},t.prototype.onBufferAppended=function(t){if(t.parent==="audio"){var n=this.state;if(n===Jn.PARSING||n===Jn.PARSED)this.pendingBuffering=t.pending>0,this._checkAppendedParsed()}},t.prototype._checkAppendedParsed=function(){if(this.state===Jn.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent,n=this.stats,r=this.hls;if(t){this.fragPrevious=t,n.tbuffered=performance.now(),r.trigger(u.a.FRAG_BUFFERED,{stats:n,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;a.b.log("audio buffered : "+Nt.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Jn.IDLE}this.tick()}},t.prototype.onError=function(t){var n=t.frag;if(n&&n.type!=="audio")return;switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var s=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);a.b.warn("audioStreamController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.state=Jn.FRAG_LOADING_WAITING_RETRY}else a.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Jn.ERROR}break;case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.state!==Jn.ERROR&&(this.state=t.fatal?Jn.ERROR:Jn.IDLE,a.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case o.a.BUFFER_FULL_ERROR:if(t.parent==="audio"&&(this.state===Jn.PARSING||this.state===Jn.PARSED)){var f=this.mediaBuffer,l=this.media.currentTime,c=f&&st.isBuffered(f,l)&&st.isBuffered(f,l+.5);if(c){var h=this.config;h.maxMaxBufferLength>=h.maxBufferLength&&(h.maxMaxBufferLength/=2,a.b.warn("audio:reduce max buffer length to "+h.maxMaxBufferLength+"s")),this.state=Jn.IDLE}else a.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Jn.BUFFER_FLUSHING,this.hls.trigger(u.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break;default:}},t.prototype.onBufferFlushed=function(){var t=this,n=this.pendingData;n&&n.length?(a.b.log("appending pending audio data on Buffer Flushed"),n.forEach(function(e){t.hls.trigger(u.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Jn.PARSED):(this.state=Jn.IDLE,this.fragPrevious=null,this.tick())},Wn(t,[{key:"state",set:function(t){if(this.state!==t){var n=this.state;this._state=t,a.b.log("audio stream:"+n+"->"+t)}},get:function(){return this._state}}]),t}(Bt),Qn=Kn,Gn=function(){function r(e){if(typeof e!="string")return!1;var n=t[e.toLowerCase()];return n?e.toLowerCase():!1}function i(e){if(typeof e!="string")return!1;var t=n[e.toLowerCase()];return t?e.toLowerCase():!1}function s(e){var t=1;for(;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(t,n,o){var u=this,a=function(){if(typeof navigator=="undefined")return;return/MSIE\s8\.0/.test(navigator.userAgent)}(),f={};a?u=document.createElement("custom"):f.enumerable=!0,u.hasBeenReset=!1;var l="",c=!1,h=t,p=n,d=o,v=null,m="",g=!0,y="auto",b="start",w=50,E="middle",S=50,x="middle";Object.defineProperty(u,"id",s({},f,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(u,"pauseOnExit",s({},f,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(u,"startTime",s({},f,{get:function(){return h},set:function(t){if(typeof t!="number")throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},f,{get:function(){return p},set:function(t){if(typeof t!="number")throw new TypeError("End time must be set to a number.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},f,{get:function(){return d},set:function(t){d=""+t,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},f,{get:function(){return v},set:function(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},f,{get:function(){return m},set:function(t){var n=r(t);if(n===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},f,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},f,{get:function(){return y},set:function(n){if(typeof n!="number"&&n!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},f,{get:function(){return b},set:function(t){var n=i(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},f,{get:function(){return w},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},f,{get:function(){return E},set:function(t){var n=i(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},f,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},f,{get:function(){return x},set:function(t){var n=i(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");x=n,this.hasBeenReset=!0}})),u.displayState=undefined;if(a)return u}if(typeof window!="undefined"&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};return o.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},o}(),Yn=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};tr.prototype={set:function(t,n){!this.get(t)&&n!==""&&(this.values[t]=n)},get:function(t,n,r){return r?this.has(t)?this.values[t]:n[r]:this.has(t)?this.values[t]:n},has:function(t){return t in this.values},alt:function(t,n,r){for(var i=0;i<r.length;++i)if(n===r[i]){this.set(t,n);break}},integer:function(t,n){/^-?\d+$/.test(n)&&this.set(t,parseInt(n,10))},percent:function(t,n){var r=void 0;if(r=n.match(/^([\d]{1,3})(\.[\d]*)?%$/)){n=parseFloat(n);if(n>=0&&n<=100)return this.set(t,n),!0}return!1}};var rr=new Gn(0,0,0),ir=rr.align==="middle"?"middle":"center";Zn.prototype={parse:function(t){function r(){var e=n.buffer,t=0;e=or(e);while(t<e.length&&e[t]!=="\r"&&e[t]!=="\n")++t;var r=e.substr(0,t);return e[t]==="\r"&&++t,e[t]==="\n"&&++t,n.buffer=e.substr(t),r}function i(e){nr(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}var n=this;t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var s=void 0;if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=r();var o=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}var u=!1;while(n.buffer){if(!/\r\n|\n/.test(n.buffer))return this;u?u=!1:s=r();switch(n.state){case"HEADER":/:/.test(s)?i(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;n.cue=new Gn(0,0,""),n.state="CUE";if(s.indexOf("-->")===-1){n.cue.id=s;continue};case"CUE":try{sr(s,n.cue,n.regionList)}catch(a){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var f=s.indexOf("-->")!==-1;if(!s||f&&(u=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=s;continue;case"BADCUE":s||(n.state="ID");continue}}}catch(a){n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{t.buffer+=t.decoder.decode();if(t.cue||t.state==="HEADER")t.buffer+="\n\n",t.parse();if(t.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(n){throw n}return t.onflush&&t.onflush(),this}};var ur=Zn,lr={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},cr=function(t){var n=t;return lr.hasOwnProperty(t)&&(n=lr[t]),String.fromCharCode(n)},hr=15,pr=100,dr={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},vr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},mr={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},gr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},yr=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],br={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,n){var r=this.verboseFilter[t];this.verboseLevel>=r&&console.log(this.time+" ["+t+"] "+n)}},wr=function(t){var n=[];for(var r=0;r<t.length;r++)n.push(t[r].toString(16));return n},Er=function(){function e(t,n,r,i,s){fr(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=r||!1,this.background=i||"black",this.flash=s||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(t){var n=["foreground","underline","italics","background","flash"];for(var r=0;r<n.length;r++){var i=n[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},e.prototype.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},e.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.prototype.toString=function t(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Sr=function(){function e(t,n,r,i,s,o){fr(this,e),this.uchar=t||" ",this.penState=new Er(n,r,i,s,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(t,n){this.uchar=t,this.penState.copy(n)},e.prototype.setPenState=function(t){this.penState.copy(t)},e.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.prototype.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},e}(),xr=function(){function e(){fr(this,e),this.chars=[];for(var t=0;t<pr;t++)this.chars.push(new Sr);this.pos=0,this.currPenState=new Er}return e.prototype.equals=function(t){var n=!0;for(var r=0;r<pr;r++)if(!this.chars[r].equals(t.chars[r])){n=!1;break}return n},e.prototype.copy=function(t){for(var n=0;n<pr;n++)this.chars[n].copy(t.chars[n])},e.prototype.isEmpty=function(){var t=!0;for(var n=0;n<pr;n++)if(!this.chars[n].isEmpty()){t=!1;break}return t},e.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(br.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>pr&&(br.log("ERROR","Too large cursor position "+this.pos),this.pos=pr)},e.prototype.moveCursor=function(t){var n=this.pos+t;if(t>1)for(var r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(t){t>=144&&this.backSpace();var n=cr(t);if(this.pos>=pr){br.log("ERROR","Cannot insert "+t.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)},e.prototype.clearFromPos=function(t){var n=void 0;for(n=t;n<pr;n++)this.chars[n].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){var t=[],n=!0;for(var r=0;r<pr;r++){var i=this.chars[r].uchar;i!==" "&&(n=!1),t.push(i)}return n?"":t.join("")},e.prototype.setPenStyles=function(t){this.currPenState.setStyles(t);var n=this.chars[this.pos];n.setPenState(this.currPenState)},e}(),Tr=function(){function e(){fr(this,e),this.rows=[];for(var t=0;t<hr;t++)this.rows.push(new xr);this.currRow=hr-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var t=0;t<hr;t++)this.rows[t].clear();this.currRow=hr-1},e.prototype.equals=function(t){var n=!0;for(var r=0;r<hr;r++)if(!this.rows[r].equals(t.rows[r])){n=!1;break}return n},e.prototype.copy=function(t){for(var n=0;n<hr;n++)this.rows[n].copy(t.rows[n])},e.prototype.isEmpty=function(){var t=!0;for(var n=0;n<hr;n++)if(!this.rows[n].isEmpty()){t=!1;break}return t},e.prototype.backSpace=function(){var t=this.rows[this.currRow];t.backSpace()},e.prototype.clearToEndOfRow=function(){var t=this.rows[this.currRow];t.clearToEndOfRow()},e.prototype.insertChar=function(t){var n=this.rows[this.currRow];n.insertChar(t)},e.prototype.setPen=function(t){var n=this.rows[this.currRow];n.setPenStyles(t)},e.prototype.moveCursor=function(t){var n=this.rows[this.currRow];n.moveCursor(t)},e.prototype.setCursor=function(t){br.log("INFO","setCursor: "+t);var n=this.rows[this.currRow];n.setCursor(t)},e.prototype.setPAC=function(t){br.log("INFO","pacData = "+JSON.stringify(t));var n=t.row-1;this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1);if(this.nrRollUpRows&&this.currRow!==n){for(var r=0;r<hr;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){var o=s.rows[i].cueStartTime;if(o&&o<br.time)for(var u=0;u<this.nrRollUpRows;u++)this.rows[n-this.nrRollUpRows+u+1].copy(s.rows[i+u])}}this.currRow=n;var a=this.rows[this.currRow];if(t.indent!==null){var f=t.indent,l=Math.max(f-1,0);a.setCursor(t.indent),t.color=a.chars[l].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(t){br.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},e.prototype.rollUp=function(){if(this.nrRollUpRows===null){br.log("DEBUG","roll_up but nrRollUpRows not set yet");return}br.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),br.log("INFO","Rolling up")},e.prototype.getDisplayText=function(t){t=t||!1;var n=[],r="",i=-1;for(var s=0;s<hr;s++){var o=this.rows[s].getTextString();o&&(i=s+1,t?n.push("Row "+i+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(t?r="["+n.join(" | ")+"]":r=n.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),Nr=function(){function e(t,n){fr(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Tr,this.nonDisplayedMemory=new Tr,this.lastOutputScreen=new Tr,this.currRollUpRow=this.displayedMemory.rows[hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[hr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(t){this.outputFilter=t},e.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},e.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.prototype.setMode=function(t){if(t===this.mode)return;this.mode=t,br.log("INFO","MODE="+t),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t},e.prototype.insertChars=function(t){for(var n=0;n<t.length;n++)this.writeScreen.insertChar(t[n]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";br.log("INFO",r+": "+this.writeScreen.getDisplayText(!0));if(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")br.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate()},e.prototype.ccRCL=function(){br.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){br.log("INFO","BS - BackSpace");if(this.mode==="MODE_TEXT")return;this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate()},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){br.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(t){br.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.prototype.ccFON=function(){br.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){br.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){br.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){br.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){br.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){br.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){br.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){br.log("INFO","EOC - End Of Caption");if(this.mode==="MODE_POP-ON"){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,br.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(t){br.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.prototype.ccMIDROW=function(t){var n={flash:!1};n.underline=t%2===1,n.italics=t>=46;if(!n.italics){var r=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}else n.foreground="white";br.log("INFO","MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)},e.prototype.outputDataUpdate=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,n=br.time;if(n===null)return;this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),t===!0&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},e}(),Cr=function(){function e(t,n,r){fr(this,e),this.field=t||1,this.outputs=[n,r],this.channels=[new Nr(1,n),new Nr(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return e.prototype.getHandler=function(t){return this.channels[t].getHandler()},e.prototype.setHandler=function(t,n){this.channels[t].setHandler(n)},e.prototype.addData=function(t,n){var r=void 0,i=void 0,s=void 0,o=!1;this.lastTime=t,br.setTime(t);for(var u=0;u<n.length;u+=2){i=n[u]&127,s=n[u+1]&127;if(i===0&&s===0){this.dataCounters.padding+=2;continue}br.log("DATA","["+wr([n[u],n[u+1]])+"] -> ("+wr([i,s])+")"),r=this.parseCmd(i,s),r||(r=this.parseMidrow(i,s)),r||(r=this.parsePAC(i,s)),r||(r=this.parseBackgroundAttributes(i,s));if(!r){o=this.parseChars(i,s);if(o)if(this.currChNr&&this.currChNr>=0){var a=this.channels[this.currChNr-1];a.insertChars(o)}else br.log("WARNING","No channel found yet. TEXT-MODE?")}r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,br.log("WARNING","Couldn't parse cleaned data "+wr([i,s])+" orig: "+wr([n[u],n[u+1]])))}},e.prototype.parseCmd=function(t,n){var r=null,i=(t===20||t===28)&&n>=32&&n<=47,s=(t===23||t===31)&&n>=33&&n<=35;if(!i&&!s)return!1;if(t===this.lastCmdA&&n===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,br.log("DEBUG","Repeated command ("+wr([t,n])+") is dropped"),!0;t===20||t===23?r=1:r=2;var o=this.channels[r-1];return t===20||t===28?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.lastCmdA=t,this.lastCmdB=n,this.currChNr=r,!0},e.prototype.parseMidrow=function(t,n){var r=null;if((t===17||t===25)&&n>=32&&n<=47){t===17?r=1:r=2;if(r!==this.currChNr)return br.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[r-1];return i.ccMIDROW(n),br.log("DEBUG","MIDROW ("+wr([t,n])+")"),!0}return!1},e.prototype.parsePAC=function(t,n){var r=null,i=null,s=(t>=17&&t<=23||t>=25&&t<=31)&&n>=64&&n<=127,o=(t===16||t===24)&&n>=64&&n<=95;if(!s&&!o)return!1;if(t===this.lastCmdA&&n===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=t<=23?1:2,n>=64&&n<=95?i=r===1?dr[t]:mr[t]:i=r===1?vr[t]:gr[t];var u=this.interpretPAC(i,n),a=this.channels[r-1];return a.setPAC(u),this.lastCmdA=t,this.lastCmdB=n,this.currChNr=r,!0},e.prototype.interpretPAC=function(t,n){var r=n,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i},e.prototype.parseChars=function(t,n){var r=null,i=null,s=null;t>=25?(r=2,s=t-8):(r=1,s=t);if(s>=17&&s<=19){var o=n;s===17?o=n+80:s===18?o=n+112:o=n+144,br.log("INFO","Special char '"+cr(o)+"' in channel "+r),i=[o]}else t>=32&&t<=127&&(i=n===0?[t]:[t,n]);if(i){var u=wr(i);br.log("DEBUG","Char codes =  "+u.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(t,n){var r=void 0,i=void 0,s=void 0,o=void 0,u=(t===16||t===24)&&n>=32&&n<=47,a=(t===23||t===31)&&n>=45&&n<=47;return!u&&!a?!1:(r={},t===16||t===24?(i=Math.floor((n-32)/2),r.background=yr[i],n%2===1&&(r.background=r.background+"_semi")):n===45?r.background="transparent":(r.foreground="black",n===47&&(r.underline=!0)),s=t<24?1:2,o=this.channels[s-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(t){for(var n=0;n<this.channels.length;n++)this.channels[n]&&this.channels[n].cueSplitAtTime(t)},e}(),kr=Cr,Ar=function(){function e(t,n){Lr(this,e),this.timelineController=t,this.track=n,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){if(this.startTime===null)return;this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null},e.prototype.newCue=function(t,n,r){if(this.startTime===null||this.startTime>t)this.startTime=t;this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.track)},e}(),Or=Ar,Mr=function(t,n,r){return t.substr(r||0,n.length)===n},_r=function(t){var n=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),s=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)?-1:(n+=1e3*r,n+=6e4*i,n+=36e5*s,n)},Dr=function Ei(e){var Ei=5381,t=e.length;while(t)Ei=Ei*33^e.charCodeAt(--t);return(Ei>>>0).toString()},Pr=function(t,n,r){var i=t[n],s=t[i.prevCC];if(!s||!s.new&&i.new){t.ccOffset=t.presentationOffset=i.start,i.new=!1;return}while(s&&s.new)t.ccOffset+=i.start-s.start,i.new=!1,i=s,s=t[i.prevCC];t.presentationOffset=r},Hr={parse:function(t,n,r,i,s,o){var u=/\r\n|\n\r|\n|\r/g,a=Object(Qt.b)(new Uint8Array(t)).trim().replace(u,"\n").split("\n"),f="00:00.000",l=0,c=0,h=0,p=[],d=void 0,v=!0,m=new ur;m.oncue=function(e){var t=r[i],n=r.ccOffset;t&&t.new&&(c!==undefined?n=r.ccOffset=t.start:Pr(r,i,h)),h&&(n=h+r.ccOffset-r.presentationOffset),e.startTime+=n-c,e.endTime+=n-c,e.id=Dr(e.startTime.toString())+Dr(e.endTime.toString())+Dr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&p.push(e)},m.onparsingerror=function(e){d=e},m.onflush=function(){if(d&&o){o(d);return}s(p)},a.forEach(function(e){if(v){if(Mr(e,"X-TIMESTAMP-MAP=")){v=!1,e.substr(16).split(",").forEach(function(e){Mr(e,"LOCAL:")?f=e.substr(6):Mr(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{n=n<0?n+8589934592:n,l-=n,c=_r(f)/1e3,h=l/9e4,c===-1&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){d=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}e===""&&(v=!1)}m.parse(e+"\n")}),m.flush()}},Br=Hr,Ur=function(e){function t(n){jr(this,t);var r=Fr(this,e.call(this,n,u.a.MEDIA_ATTACHING,u.a.MEDIA_DETACHING,u.a.FRAG_PARSING_USERDATA,u.a.FRAG_DECRYPTED,u.a.MANIFEST_LOADING,u.a.MANIFEST_LOADED,u.a.FRAG_LOADED,u.a.LEVEL_SWITCHING,u.a.INIT_PTS_FOUND));r.hls=n,r.config=n.config,r.enabled=!0,r.Cues=n.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=undefined,r.cueRanges=[];if(r.config.enableCEA708Captions){var i=new Or(r,1),s=new Or(r,2);r.cea608Parser=new kr(0,i,s)}return r}return Ir(t,e),t.prototype.addCues=function(t,n,r,i){var s=this.cueRanges,o=!1;for(var u=s.length;u--;){var a=s[u],f=Rr(a[0],a[1],n,r);if(f>=0){a[0]=Math.min(a[0],n),a[1]=Math.max(a[1],r),o=!0;if(f/(r-n)>.5)return}}o||s.push([n,r]),this.Cues.newCue(this[t],n,r,i)},t.prototype.onInitPtsFound=function(t){var n=this;typeof this.initPTS=="undefined"&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){n.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(t){var n=this.media;if(n)for(var r=0;r<n.textTracks.length;r++){var i=n.textTracks[r],s="textTrack"+t;if(i[s]===!0)return i}return null},t.prototype.createCaptionsTrack=function(t){var n="textTrack"+t;if(!this[n]){var r=this.getExistingTrack(t);if(!r){var i=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config["captionsTextTrack"+t+"LanguageCode"]);i&&(i[n]=!0,this[n]=i)}else this[n]=r,Yt(this[n]),Gt(this[n],this.media)}},t.prototype.createTextTrack=function(t,n,r){var i=this.media;if(i)return i.addTextTrack(t,n,r)},t.prototype.destroy=function(){p.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},t.prototype.onMediaDetaching=function(){Yt(this.textTrack1),Yt(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},t.prototype._cleanTracks=function(){var t=this.media;if(t){var n=t.textTracks;if(n)for(var r=0;r<n.length;r++)Yt(n[r])}},t.prototype.onManifestLoaded=function(t){var n=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=undefined,this.cueRanges=[];if(this.config.enableWebVTT){this.tracks=t.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var i=void 0;if(t<r.length){var s=r[t];qr(s,e)&&(i=s)}i||(i=n.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=n.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",n.textTracks.push(i)})}},t.prototype.onLevelSwitching=function(){this.enabled=this.hls.currentLevel.closedCaptions!=="NONE"},t.prototype.onFragLoaded=function(t){var n=t.frag,r=t.payload;if(n.type==="main"){var i=n.sn;if(i!==this.lastSn+1){var s=this.cea608Parser;s&&s.reset()}this.lastSn=i}else if(n.type==="subtitle")if(r.byteLength){if(typeof this.initPTS=="undefined"){this.unparsedVttFrags.push(t);return}var o=n.decryptdata;(o==null||o.key==null||o.method!=="AES-128")&&this._parseVTTs(n,r)}else this.hls.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})},t.prototype._parseVTTs=function(t,n){var r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,"new":!0},this.prevCC=t.cc);var i=this.textTracks,s=this.hls;Br.parse(n,this.initPTS,r,t.cc,function(e){var n=i[t.trackId];if(n.mode==="disabled"){s.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});return}e.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(t){var r=new window.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}}),s.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){a.b.log("Failed to parse VTT cue: "+e),s.trigger(u.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},t.prototype.onFragDecrypted=function(t){var n=t.payload,r=t.frag;if(r.type==="subtitle"){if(typeof this.initPTS=="undefined"){this.unparsedVttFrags.push(t);return}this._parseVTTs(r,n)}},t.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var n=0;n<t.samples.length;n++){var r=this.extractCea608Data(t.samples[n].bytes);this.cea608Parser.addData(t.samples[n].pts,r)}},t.prototype.extractCea608Data=function(t){var n=t[0]&31,r=2,i=void 0,s=void 0,o=void 0,u=void 0,a=void 0,f=[];for(var l=0;l<n;l++){i=t[r++],s=127&t[r++],o=127&t[r++],u=(4&i)!==0,a=3&i;if(s===0&&o===0)continue;u&&a===0&&(f.push(s),f.push(o))}return f},t}(p),zr=Ur,Wr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kr=function(e){function t(n){Xr(this,t);var r=Vr(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.MEDIA_DETACHING,u.a.MANIFEST_LOADING,u.a.MANIFEST_LOADED,u.a.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=undefined,r.subtitleDisplay=!1,r}return $r(t,e),t.prototype._onTextTracksChanged=function(){if(!this.media)return;var t=-1,n=Jr(this.media.textTracks);for(var r=0;r<n.length;r++)if(n[r].mode==="hidden")t=r;else if(n[r].mode==="showing"){t=r;break}this.subtitleTrack=t},t.prototype.destroy=function(){p.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(t){var n=this;this.media=t.media;if(!this.media)return;this.queuedDefaultTrack!==undefined&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){n.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener)},t.prototype.onMediaDetaching=function(){if(!this.media)return;this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=undefined},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(t){var n=this,r=t.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(u.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(n.media?n.subtitleTrack=e.id:n.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var t=this.trackId,n=this.tracks[t];if(!n)return;var r=n.details;if(r===undefined||r.live===!0)a.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(u.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:t})},t.prototype.onSubtitleTrackLoaded=function(t){var n=this;t.id<this.tracks.length&&(a.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){n.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(t){if(t<-1||t>=this.tracks.length)return;this.timer&&(clearInterval(this.timer),this.timer=null);var n=Jr(this.media.textTracks);this.trackId!==-1&&(n[this.trackId].mode="disabled"),this.trackId=t,a.b.log("switching to subtitle track "+t),this.hls.trigger(u.a.SUBTITLE_TRACK_SWITCH,{id:t});if(t===-1)return;var r=this.tracks[t];t<n.length&&(n[t].mode=this.subtitleDisplay?"showing":"hidden");var i=r.details;if(i===undefined||i.live===!0)a.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(u.a.SUBTITLE_TRACK_LOADING,{url:r.url,id:t})},Wr(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),t}(p),Qr=Kr,Gr=n(5),ti={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},ni=function(e){function t(n){Yr(this,t);var r=Zr(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.ERROR,u.a.KEY_LOADED,u.a.FRAG_LOADED,u.a.SUBTITLE_TRACKS_UPDATED,u.a.SUBTITLE_TRACK_SWITCH,u.a.SUBTITLE_TRACK_LOADED,u.a.SUBTITLE_FRAG_PROCESSED));return r.config=n.config,r.vttFragSNsProcessed={},r.vttFragQueues=undefined,r.currentlyProcessing=null,r.state=ti.STOPPED,r.currentTrackId=-1,r.decrypter=new Gr.a(n.observer,n.config),r}return ei(t,e),t.prototype.onHandlerDestroyed=function(){this.state=ti.STOPPED},t.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},t.prototype.nextFrag=function(){if(this.currentlyProcessing===null&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(u.a.FRAG_LOADING,{frag:t}),this.state=ti.FRAG_LOADING}},t.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=ti.IDLE,this.nextFrag()},t.prototype.onMediaAttached=function(){this.state=ti.IDLE},t.prototype.onError=function(t){var n=t.frag;if(n&&n.type!=="subtitle")return;this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.doTick=function(){var t=this;switch(this.state){case ti.IDLE:var n=this.tracks,r=this.currentTrackId,i=this.vttFragSNsProcessed[r],s=this.vttFragQueues[r],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1,f=function(t){return i.indexOf(t.sn)>-1},l=function(t){return s.some(function(e){return e.sn===t.sn})};if(!n)break;var c;r<n.length&&(c=n[r].details);if(typeof c=="undefined")break;c.fragments.forEach(function(e){!f(e)&&e.sn!==o&&!l(e)&&(e.decryptdata&&e.decryptdata.uri!=null&&e.decryptdata.key==null?(a.b.log("Loading key for "+e.sn),t.state=ti.KEY_LOADING,t.hls.trigger(u.a.KEY_LOADING,{frag:e})):(e.trackId=r,s.push(e),t.nextFrag()))})}},t.prototype.onSubtitleTracksUpdated=function(t){var n=this;a.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){n.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id;if(this.currentTrackId===-1)return;var n=this.tracks[this.currentTrackId],r=n.details;r!==undefined&&this.tick()},t.prototype.onSubtitleTrackLoaded=function(){this.tick()},t.prototype.onKeyLoaded=function(){this.state===ti.KEY_LOADING&&(this.state=ti.IDLE,this.tick())},t.prototype.onFragLoaded=function(t){var n=this.fragCurrent,r=t.frag.decryptdata,i=t.frag,s=this.hls;if(this.state===ti.FRAG_LOADING&&n&&t.frag.type==="subtitle"&&n.sn===t.frag.sn&&t.payload.byteLength>0&&r!=null&&r.key!=null&&r.method==="AES-128"){var o=void 0;try{o=performance.now()}catch(a){o=Date.now()}this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(n){t=Date.now()}s.trigger(u.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:o,tdecrypt:t}})})}},t}(Bt),ri=ni,ii=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ai=3,fi={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},li=function(t,n,r){var i={videoCapabilities:[]};return n.forEach(function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[i]},ci=function(t,n,r){switch(t){case fi.WIDEVINE:return li(n,r);default:throw Error("Unknown key-system: "+t)}},hi=function(e){function t(n){si(this,t);var r=oi(this,e.call(this,n,u.a.MEDIA_ATTACHED,u.a.MANIFEST_PARSED));return r._widevineLicenseUrl=n.config.widevineLicenseUrl,r._licenseXhrSetup=n.config.licenseXhrSetup,r._emeEnabled=n.config.emeEnabled,r._requestMediaKeySystemAccess=n.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return ui(t,e),t.prototype.getLicenseServerUrl=function(t){var n=void 0;switch(t){case fi.WIDEVINE:n=this._widevineLicenseUrl;break;default:n=null}return n||(a.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),n},t.prototype._attemptKeySystemAccess=function(t,n,r){var i=this,s=ci(t,n,r);if(!s){a.b.warn("Can not create config for key-system (maybe because platform is not supported):",t);return}a.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,s).then(function(e){i._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){a.b.error('Failed to obtain key-system "'+t+'" access:',e)})},t.prototype._onMediaKeySystemAccessObtained=function(t,n){var r=this;a.b.log('Access for key-system "'+t+'" obtained');var i={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:n,mediaKeySystemDomain:t};this._mediaKeysList.push(i),n.createMediaKeys().then(function(e){i.mediaKeys=e,a.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated()}).catch(function(e){a.b.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(t){var n=this;a.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){n._onKeySessionMessage(t,e.message)},!1)},t.prototype._onKeySessionMessage=function(t,n){a.b.log("Got EME message event, creating license request"),this._requestLicense(n,function(e){a.b.log("Received license data, updating key-session"),t.update(e)})},t.prototype._onMediaEncrypted=function(t,n){a.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=n,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys){a.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});return}a.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var t=this,n=this._mediaKeysList[0];if(!n){a.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(n.mediaKeysSessionInitialized){a.b.warn("Key-Session already initialized but requested again");return}var r=n.mediaKeysSession;r||(a.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var i=this._mediaEncryptionInitDataType,s=this._mediaEncryptionInitData;a.b.log('Generating key-session request for "'+i+'" init data type'),n.mediaKeysSessionInitialized=!0,r.generateRequest(i,s).then(function(){a.b.debug("Key-session generation succeeded")}).catch(function(e){a.b.error("Error generating key-session request:",e),t.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})},t.prototype._createLicenseXhr=function(t,n,r){var i=new XMLHttpRequest,s=this._licenseXhrSetup;try{if(s)try{s(i,t)}catch(f){i.open("POST",t,!0),s(i,t)}i.readyState||i.open("POST",t,!0)}catch(f){a.b.error("Error setting up key-system license XHR",f),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,n,r),i},t.prototype._onLicenseRequestReadyStageChange=function(t,n,r,i){switch(t.readyState){case 4:if(t.status===200)this._requestLicenseFailureCount=0,a.b.log("License request succeeded"),i(t.response);else{a.b.error("License Request XHR failed ("+n+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++;if(this._requestLicenseFailureCount<=ai){var s=ai-this._requestLicenseFailureCount+1;a.b.warn("Retrying license request, "+s+" attempts left"),this._requestLicense(r,i);return}this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(t,n){var r=void 0;return t.mediaKeySystemDomain===fi.PLAYREADY?a.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===fi.WIDEVINE?r=n:a.b.error("Unsupported key-system:",t.mediaKeySystemDomain),r},t.prototype._requestLicense=function(t,n){a.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r){a.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(u.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),s=this._createLicenseXhr(i,t,n);a.b.log("Sending license request to URL: "+i),s.send(this._generateLicenseRequestChallenge(r,t))},t.prototype.onMediaAttached=function(t){var n=this;if(!this._emeEnabled)return;var r=t.media;this._media=r,r.addEventListener("encrypted",function(e){n._onMediaEncrypted(e.initDataType,e.initData)})},t.prototype.onManifestParsed=function(t){if(!this._emeEnabled)return;var n=t.levels.map(function(e){return e.audioCodec}),r=t.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(fi.WIDEVINE,n,r)},ii(t,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),t}(p),pi=hi,di=function(){return window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),vi={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:undefined,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:Infinity,liveSyncDuration:undefined,liveMaxLatencyDuration:undefined,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:undefined,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:jn,fLoader:undefined,pLoader:undefined,xhrSetup:undefined,licenseXhrSetup:undefined,abrController:gn,bufferController:xn,capLevelController:An,fpsController:Pn,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:undefined,requestMediaKeySystemAccessFunc:di};vi.subtitleStreamController=ri,vi.subtitleTrackController=Qr,vi.timelineController=zr,vi.cueHandler=r,vi.enableCEA708Captions=!0,vi.enableWebVTT=!0,vi.captionsTextTrack1Label="English",vi.captionsTextTrack1LanguageCode="en",vi.captionsTextTrack2Label="Spanish",vi.captionsTextTrack2LanguageCode="es",vi.audioStreamController=Qn,vi.audioTrackController=zn,vi.emeController=pi;var mi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(12);var yi=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};gi(this,e);var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in r){if(i in n)continue;n[i]=r[i]}if(n.liveMaxLatencyDurationCount!==undefined&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(n.liveMaxLatencyDuration!==undefined&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||n.liveSyncDuration===undefined))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(a.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var s=this.observer=new at.a;s.trigger=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];s.emit.apply(s,[t,t].concat(r))},s.off=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];s.removeListener.apply(s,[t].concat(r))},this.on=s.on.bind(s),this.off=s.off.bind(s),this.trigger=s.trigger.bind(s);var o=this.abrController=new n.abrController(this),u=new n.bufferController(this),f=new n.capLevelController(this),l=new n.fpsController(this),c=new X(this),h=new Q(this),p=new tt(this),d=new rn(this),v=this.levelController=new Kt(this),m=new wt(this),g=this.streamController=new zt(this,m),y=[v,g],b=n.audioStreamController;b&&y.push(new b(this,m)),this.networkControllers=y;var w=[c,h,p,o,u,f,l,d,m];b=n.audioTrackController;if(b){var E=new b(this);this.audioTrackController=E,w.push(E)}b=n.subtitleTrackController;if(b){var S=new b(this);this.subtitleTrackController=S,w.push(S)}b=n.emeController;if(b){var x=new b(this);this.emeController=x,w.push(x)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&w.push(new e(t))}),this.coreComponents=w}return e.isSupported=function(){return sn()},mi(e,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return u.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:vi},set:function(n){e.defaultConfig=n}}]),e.prototype.destroy=function(){a.b.log("destroy"),this.trigger(u.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(t){a.b.log("attachMedia"),this.media=t,this.trigger(u.a.MEDIA_ATTACHING,{media:t})},e.prototype.detachMedia=function(){a.b.log("detachMedia"),this.trigger(u.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(t){t=s.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),a.b.log("loadSource:"+t),this.url=t,this.trigger(u.a.MANIFEST_LOADING,{url:t})},e.prototype.startLoad=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;a.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},e.prototype.stopLoad=function(){a.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){a.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){a.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},mi(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){a.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){a.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){a.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){a.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){a.b.log("set startLevel:"+t);var n=this;t!==-1&&(t=Math.max(t,n.minAutoLevel)),n.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){a.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this,n=t.levels,r=t.config.minAutoBitrate,i=n?n.length:0;for(var s=0;s<i;s++){var o=n[s].realBitrate?Math.max(n[s].realBitrate,n[s].bitrate):n[s].bitrate;if(o>r)return s}return 0}},{key:"maxAutoLevel",get:function(){var t=this,n=t.levels,r=t.autoLevelCapping,i=void 0;return r===-1&&n&&n.length?i=n.length-1:i=r,i}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var n=this;n.abrController.nextAutoLevel=Math.max(n.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var n=this.audioTrackController;n&&(n.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var n=this.subtitleTrackController;n&&(n.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return t?t.subtitleDisplay:!1},set:function(t){var n=this.subtitleTrackController;n&&(n.subtitleDisplay=t)}}]),e}(),bi=t["default"]=yi},function(e,t,n){function r(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(e,t,r){var u={};u[r]=[];var a=t.toString(),f=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!f)return u;var l=f[1],c=new RegExp("(\\\\n|\\W)"+o(l)+s,"g"),h;while(h=c.exec(a)){if(h[3]==="dll-reference")continue;u[r].push(h[3])}c=new RegExp("\\("+o(l)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+s,"g");while(h=c.exec(a))e[h[2]]||(u[r].push(h[1]),e[h[2]]=n(h[1]).m),u[h[2]]=u[h[2]]||[],u[h[2]].push(h[4]);return u}function a(e){var t=Object.keys(e);return t.reduce(function(t,n){return t||e[n].length>0},!1)}function f(e,t){var n={main:[t]},r={main:[]},i={main:{}};while(a(n)){var s=Object.keys(n);for(var o=0;o<s.length;o++){var f=s[o],l=n[f],c=l.pop();i[f]=i[f]||{};if(i[f][c]||!e[f][c])continue;i[f][c]=!0,r[f]=r[f]||[],r[f].push(c);var h=u(e,e[f][c],f),p=Object.keys(h);for(var d=0;d<p.length;d++)n[p[d]]=n[p[d]]||[],n[p[d]]=n[p[d]].concat(h[p[d]])}}return r}var i="[\\.|\\-|\\+|\\w|/|@]+",s="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";e.exports=function(e,t){t=t||{};var i={main:n.m},s=t.all?{main:Object.keys(i)}:f(i,e),o="";Object.keys(s).filter(function(e){return e!=="main"}).forEach(function(e){var t=0;while(s[e][t])t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map(function(t){return""+JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),o=o+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map(function(e){return""+JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"})(self);";var u=new window.Blob([o],{type:"text/javascript"});if(t.bare)return u;var a=window.URL||window.webkitURL||window.mozURL||window.msURL,l=a.createObjectURL(u),c=new window.Worker(l);return c.objectURL=l,c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(1),s=n(0),o=n(6),u=n.n(o),a=function(t){var n=new u.a;n.trigger=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];n.emit.apply(n,[t,t].concat(i))},n.off=function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];n.removeListener.apply(n,[t].concat(i))};var o=function(n,r){t.postMessage({event:n,data:r})};t.addEventListener("message",function(e){var i=e.data;switch(i.cmd){case"init":var u=JSON.parse(i.config);t.demuxer=new r.a(n,i.typeSupported,u,i.vendor);try{Object(s.a)(u.debug===!0)}catch(a){console.warn("demuxerWorker: unable to enable logs")}o("init",null);break;case"demux":t.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS);break;default:}}),n.on(i.a.FRAG_DECRYPTED,o),n.on(i.a.FRAG_PARSING_INIT_SEGMENT,o),n.on(i.a.FRAG_PARSED,o),n.on(i.a.ERROR,o),n.on(i.a.FRAG_PARSING_METADATA,o),n.on(i.a.FRAG_PARSING_USERDATA,o),n.on(i.a.INIT_PTS_FOUND,o),n.on(i.a.FRAG_PARSING_DATA,function(e,n){var r=[],i={event:e,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),t.postMessage(i,r)})};t["default"]=a},function(e,t){String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(r){}return n}(),t={}.toString,n=function(e){if(this==null)throw TypeError();var n=String(this);if(e&&t.call(e)=="[object RegExp]")throw TypeError();var r=n.length,i=String(e),s=i.length,o=r;if(arguments.length>1){var u=arguments[1];u!==undefined&&(o=u?Number(u):0,o!=o&&(o=0))}var a=Math.min(Math.max(o,0),r),f=a-s;if(f<0)return!1;var l=-1;while(++l<s)if(n.charCodeAt(f+l)!=i.charCodeAt(l))return!1;return!0};e?e(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}()}])["default"]})},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=v(r),s=n(1),o=v(s),u=n(3),a=v(u),f=n(2),l=v(f),c=n(10),h=v(c),p=n(4),d=v(p);n(196);var m=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.el.src=n.src,r}return(0,l.default)(t,e),t.prototype.getPlaybackType=function(){return h.default.NO_OP},(0,a.default)(t,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),t.prototype.render=function(){return this.trigger(d.default.PLAYBACK_READY,this.name),this},t.prototype._onLoad=function(){this.trigger(d.default.PLAYBACK_ENDED,this.name)},t.prototype._onError=function(t){var n=t.type==="error"?"load error":"loading aborted";this.trigger(d.default.PLAYBACK_ERROR,{message:n},this.name)},t}(h.default);t.default=m,m.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)},e.exports=t["default"]},function(e,t,n){var r=n(197);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n",""])},function(e,t,n){"use strict";function w(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=w(r),s=n(1),o=w(s),u=n(3),a=w(u),f=n(2),l=w(f),c=n(5),h=n(10),p=w(h),d=n(8),v=w(d),m=n(4),g=w(m),y=n(199),b=w(y);n(200);var E=function(e){function t(){(0,i.default)(this,t);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var u=(0,o.default)(this,e.call.apply(e,[this].concat(r)));return u._noiseFrameNum=-1,u}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,v.default)(b.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),t.prototype.render=function(){var t=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:t})),this.trigger(g.default.PLAYBACK_READY,this.name);var n=!!this.options.poster&&!!this.options.poster.showForNoOp;return(this.options.autoPlay||!n)&&this._animate(),this},t.prototype._noise=function(){this._noiseFrameNum=(this._noiseFrameNum+1)%5;if(this._noiseFrameNum)return;var t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),n=void 0;try{n=new Uint32Array(t.data.buffer)}catch(r){n=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);var i=t.data;for(var s=0;s<i.length;s++)n[s]=i[s]}var o=n.length,u=Math.random()*6+4,a=0,f=0;for(var l=0;l<o;){if(a<0){a=u*Math.random();var c=Math.pow(Math.random(),.4);f=255*c<<24}a-=1,n[l++]=f}this.context.putImageData(t,0,0)},t.prototype._loop=function(){var t=this;if(this._stop)return;this._noise(),this._animationHandle=(0,c.requestAnimationFrame)(function(){return t._loop()})},t.prototype.destroy=function(){this._animationHandle&&((0,c.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},t.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},t}(p.default);t.default=E,E.canPlay=function(e){return!0},e.exports=t["default"]},function(e,t){e.exports="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n"},function(e,t,n){var r=n(201);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n",""])},function(e,t,n){"use strict";function b(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=b(r),s=n(1),o=b(s),u=n(3),a=b(u),f=n(2),l=b(f),c=n(42),h=b(c),p=n(4),d=b(p),v=n(8),m=b(v),g=n(203),y=b(g);n(204);var w=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.template=(0,m.default)(y.default),r.showTimeout=null,r.listenTo(r.container,d.default.CONTAINER_STATE_BUFFERING,r.onBuffering),r.listenTo(r.container,d.default.CONTAINER_STATE_BUFFERFULL,r.onBufferFull),r.listenTo(r.container,d.default.CONTAINER_STOP,r.onStop),r.listenTo(r.container,d.default.CONTAINER_ENDED,r.onStop),r.listenTo(r.container,d.default.CONTAINER_ERROR,r.onStop),r.render(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"","class":"spinner-three-bounce"}}}]),t.prototype.onBuffering=function(){this.show()},t.prototype.onBufferFull=function(){this.hide()},t.prototype.onStop=function(){this.hide()},t.prototype.show=function(){var t=this;this.showTimeout===null&&(this.showTimeout=setTimeout(function(){return t.$el.show()},300))},t.prototype.hide=function(){this.showTimeout!==null&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},t.prototype.render=function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},t}(h.default);t.default=w,e.exports=t["default"]},function(e,t){e.exports="<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"},function(e,t,n){var r=n(205);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\n            animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    -webkit-animation-delay: -0.32s;\n            animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    -webkit-animation-delay: -0.16s;\n            animation-delay: -0.16s; }\n\n@-webkit-keyframes bouncedelay {\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  40% {\n    -webkit-transform: scale(1);\n            transform: scale(1); } }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n            transform: scale(0); }\n  40% {\n    -webkit-transform: scale(1);\n            transform: scale(1); } }\n",""])},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function g(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=g(r),s=n(1),o=g(s),u=n(3),a=g(u),f=n(2),l=g(f),c=n(43),h=g(c),p=n(4),d=g(p),v=n(6),m=g(v),y=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.setInitialAttrs(),r.reportInterval=r.options.reportInterval||5e3,r.state="IDLE",r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"stats"}}]),t.prototype.bindEvents=function(){this.listenTo(this.container.playback,d.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,d.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,d.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,d.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,d.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},t.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},t.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},t.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=undefined,this.state="STOPPED"},t.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},t.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=undefined,this.state="PLAYING"},t.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},t.prototype.getWatchingTime=function(){var t=Date.now()-this.watchingTimeInit;return t-this.rebufferingTime},t.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},t.prototype.onStatsAdd=function(t){m.default.extend(this.externalMetrics,t)},t.prototype.getStats=function(){var t={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return m.default.extend(t,this.externalMetrics),t},t.prototype.report=function(){this.container.statsReport(this.getStats())},t}(h.default);t.default=y,e.exports=t["default"]},function(e,t,n){"use strict";function b(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=b(r),s=n(1),o=b(s),u=n(3),a=b(u),f=n(2),l=b(f),c=n(42),h=b(c),p=n(4),d=b(p),v=n(8),m=b(v),g=n(209),y=b(g);n(210);var w=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.configure(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,m.default)(y.default)}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,d.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_OPTIONS_CHANGE,this.configure)},t.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},t.prototype.onPlay=function(){this.hidden||this.$el.show()},t.prototype.onStop=function(){this.$el.hide()},t.prototype.render=function(){this.$el.hide();var t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(t)),this.container.$el.append(this.$el),this},t}(h.default);t.default=w,e.exports=t["default"]},function(e,t){e.exports="<div data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== 'undefined') { %>\n<a target=_blank href=\"<%= imageLink %>\">\n<% } %>\n<img src=\"<%= imageUrl %>\">\n<% if(typeof imageLink !== 'undefined') { %>\n</a>\n<% } %>\n</div>\n"},function(e,t,n){var r=n(211);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n[data-watermark] img {\n  max-width: 100%; }\n\n[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n",""])},function(e,t,n){"use strict";(function(r){function C(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=C(i),o=n(1),u=C(o),a=n(3),f=C(a),l=n(2),c=C(l),h=n(42),p=C(h),d=n(4),v=C(d),m=n(8),g=C(m),y=n(10),b=C(y),w=n(81),E=C(w),S=n(213),x=C(S),T=n(62),N=C(T);n(214);var k=function(e){function t(n){(0,s.default)(this,t);var i=(0,u.default)(this,e.call(this,n));return i.hasStartedPlaying=!1,i.playRequested=!1,i.render(),r.nextTick(function(){return i.update()}),i}return(0,c.default)(t,e),(0,f.default)(t,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,g.default)(x.default)}},{key:"shouldRender",get:function(){var t=!!this.options.poster&&!!this.options.poster.showForNoOp;return this.container.playback.name!=="html_img"&&(this.container.playback.getPlaybackType()!==b.default.NO_OP||t)}},{key:"attributes",get:function(){return{"class":"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||this.options.poster.showOnVideoEnd===undefined}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,v.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,v.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,v.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,v.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,v.default.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,v.default.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,v.default.CONTAINER_ENDED,this.onStop)},t.prototype.onError=function(t){t.level==E.default.Levels.FATAL&&(this.hasFatalError=!0,this.hidePlayButton())},t.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},t.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},t.prototype.updatePlayButton=function(t){t&&(!this.options.chromeless||this.options.allowUserInteraction)?this.showPlayButton():this.hidePlayButton()},t.prototype.showPlayButton=function(){if(this.hasFatalError)return;this.$playButton.show(),this.$el.addClass("clickable")},t.prototype.hidePlayButton=function(){this.$playButton.hide(),this.$el.removeClass("clickable")},t.prototype.clicked=function(){if(!this.options.chromeless||this.options.allowUserInteraction)this.playRequested=!0,this.update(),this.container.play();return!1},t.prototype.shouldHideOnPlay=function(){return!this.container.playback.isAudioOnly},t.prototype.update=function(){if(!this.shouldRender)return;var t=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(t),this.updatePoster()},t.prototype.updatePoster=function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()},t.prototype.showPoster=function(){this.container.disableMediaControl(),this.$el.show()},t.prototype.hidePoster=function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()},t.prototype.render=function(){if(!this.shouldRender)return;this.$el.html(this.template());var t=this.options.poster&&this.options.poster.custom===undefined;if(t){var n=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+n+")"})}else this.options.poster&&this.$el.css({background:this.options.poster.custom});this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(N.default),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var r=this.options.mediacontrol&&this.options.mediacontrol.buttons;return r&&this.$el.find("svg path").css("fill",r),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(r=this.options.mediacontrol.buttons,this.$playButton.css("color",r)),this.update(),this},t}(p.default);t.default=k,e.exports=t["default"]}).call(t,n(61))},function(e,t){e.exports='<div class="play-wrapper" data-poster></div>\n'},function(e,t,n){var r=n(215);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,".player-poster[data-poster] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: #000;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n",""])},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(217),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=v(r),s=n(1),o=v(s),u=n(3),a=v(u),f=n(2),l=v(f),c=n(43),h=v(c),p=n(4),d=v(p),m=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.container.options.gaAccount&&(r.account=r.container.options.gaAccount,r.trackerName=r.container.options.gaTrackerName?r.container.options.gaTrackerName+".":"Clappr.",r.domainName=r.container.options.gaDomainName,r.currentHDState=undefined,r.embedScript()),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"google_analytics"}}]),t.prototype.embedScript=function(){var t=this;if(!window._gat){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("async","async"),n.setAttribute("src","//www.google-analytics.com/ga.js"),n.onload=function(){return t.addEventListeners()},document.body.appendChild(n)}else this.addEventListeners()},t.prototype.addEventListeners=function(){var t=this;this.container&&(this.listenTo(this.container,d.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,d.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,d.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,d.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,d.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,d.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,d.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,d.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,d.default.CONTAINER_VOLUME,function(e){return t.onVolumeChanged(e)}),this.listenTo(this.container,d.default.CONTAINER_SEEK,function(e){return t.onSeek(e)}),this.listenTo(this.container,d.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,d.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,d.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},t.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},t.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},t.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},t.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},t.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},t.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},t.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},t.prototype.onHD=function(t){var n=t?"ON":"OFF";n!==this.currentHDState&&(this.currentHDState=n,this.push(["Video","HD - "+n,this.container.playback.src]))},t.prototype.onPlaybackChanged=function(t){t.type!==null&&this.push(["Video","Playback Type - "+t.type,this.container.playback.src])},t.prototype.onDVR=function(t){var n=t?"ON":"OFF";this.push(["Interaction","DVR - "+n,this.container.playback.src])},t.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},t.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},t.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},t.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},t.prototype.push=function(t){var n=[this.trackerName+"_trackEvent"].concat(t);_gaq.push(n)},t}(h.default);t.default=m,e.exports=t["default"]},function(e,t,n){"use strict";function g(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=g(r),s=n(1),o=g(s),u=n(3),a=g(u),f=n(2),l=g(f),c=n(43),h=g(c),p=n(4),d=g(p),v=n(10),m=g(v),y=function(e){function t(n){return(0,i.default)(this,t),(0,o.default)(this,e.call(this,n))}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"click_to_pause"}}]),t.prototype.bindEvents=function(){this.listenTo(this.container,d.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,d.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},t.prototype.click=function(){if(this.container.getPlaybackType()!==m.default.LIVE||this.container.isDvrEnabled())this.container.isPlaying()?this.container.pause():this.container.play()},t.prototype.settingsUpdate=function(){var t=this.container.getPlaybackType()!==m.default.LIVE||this.container.isDvrEnabled();if(t===this.pointerEnabled)return;var n=t?"addClass":"removeClass";this.container.$el[n]("pointer-enabled"),this.pointerEnabled=t},t}(h.default);t.default=y,e.exports=t["default"]},function(e,t,n){"use strict";function E(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=E(r),s=n(1),o=E(s),u=n(3),a=E(u),f=n(2),l=E(f),c=n(34),h=E(c),p=n(8),d=E(p),v=n(10),m=E(v),g=n(4),y=E(g),b=n(220),w=E(b);n(221);var S=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.settingsUpdate(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"template",get:function(){return(0,d.default)(w.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{"class":"dvr-controls","data-dvr-controls":""}}}]),t.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,y.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,y.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),y.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),y.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},t.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.dvrChanged=function(t){if(this.core.getPlaybackType()!==m.default.LIVE)return;this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),t?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr")},t.prototype.click=function(){var t=this.core.mediaControl,n=t.container;n.isPlaying()||n.play(),t.$el.hasClass("dvr")&&n.seek(n.getDuration())},t.prototype.settingsUpdate=function(){var t=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click(function(){return t.click()})),this.bindEvents()},t.prototype.shouldRender=function(){var t=this.core.options.useDvrControls===undefined||!!this.core.options.useDvrControls;return t&&this.core.getPlaybackType()===m.default.LIVE},t.prototype.render=function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},t}(h.default);t.default=S,e.exports=t["default"]},function(e,t){e.exports='<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n'},function(e,t,n){var r=n(222);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,'.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n',""])},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(224),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function E(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=E(r),s=n(1),o=E(s),u=n(3),a=E(u),f=n(2),l=E(f),c=n(34),h=E(c),p=n(8),d=E(p),v=n(4),m=E(v),g=n(225),y=E(g),b=n(226),w=E(b);n(227);var S=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n)),s=n.options.closedCaptionsConfig;return r._title=s&&s.title?s.title:null,r._ariaLabel=s&&s.ariaLabel?s.ariaLabel:"cc-button",r._labelCb=s&&s.labelCallback&&typeof s.labelCallback=="function"?s.labelCallback:function(e){return e.name},r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"closed_captions"}},{key:"template",get:function(){return(0,d.default)(w.default)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{"class":"cc-controls","data-cc-controls":""}}}]),t.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,m.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,m.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,m.default.MEDIACONTROL_HIDE,this.hideContextMenu),this.container=this.core.getCurrentContainer(),this.container&&(this.listenTo(this.container,m.default.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,m.default.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,m.default.CONTAINER_STOP,this.onContainerStop))},t.prototype.onContainerStop=function(){this.ccAvailable(!1)},t.prototype.containerChanged=function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()},t.prototype.onSubtitleAvailable=function(){this.renderCcButton(),this.ccAvailable(!0)},t.prototype.onSubtitleChanged=function(t){this.setCurrentContextMenuElement(t.id)},t.prototype.onTrackSelect=function(t){var n=parseInt(t.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=n,this.hideContextMenu(),t.stopPropagation(),!1},t.prototype.ccAvailable=function(t){var n=t?"addClass":"removeClass";this.$el[n]("available")},t.prototype.toggleContextMenu=function(){this.$el.find("ul").toggle()},t.prototype.hideContextMenu=function(){this.$el.find("ul").hide()},t.prototype.contextMenuElement=function(t){return this.$el.find("ul a"+(isNaN(t)?"":'[data-cc-select="'+t+'"]')).parent()},t.prototype.setCurrentContextMenuElement=function(t){if(this._trackId!==t){this.contextMenuElement().removeClass("current"),this.contextMenuElement(t).addClass("current");var n=t>-1?"addClass":"removeClass";this.$ccButton[n]("enabled"),this._trackId=t}},t.prototype.renderCcButton=function(){var t=this.container?this.container.closedCaptionsTracks:[];for(var n=0;n<t.length;n++)t[n].label=this._labelCb(t[n]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:t})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(y.default),this.$el.append(this.style)},t.prototype.render=function(){this.renderCcButton();var t=this.core.mediaControl.$el.find("button[data-fullscreen]");return t[0]?this.$el.insertAfter(t):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this},t}(h.default);t.default=S,e.exports=t["default"]},function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'},function(e,t){e.exports='<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n'},function(e,t,n){var r=n(228);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n",""])},function(e,t,n){"use strict";function E(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=E(r),s=n(1),o=E(s),u=n(3),a=E(u),f=n(2),l=E(f),c=n(35),h=E(c),p=n(4),d=E(p),v=n(6),m=E(v),g=n(62),y=E(g),b=n(84),w=E(b),S=(0,m.default)('link[rel="shortcut icon"]'),x=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r._container=null,r.configure(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return S}}]),t.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,d.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,d.default.CORE_OPTIONS_CHANGE,this.configure))},t.prototype.bindEvents=function(){this.listenTo(this.core,d.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core.mediaControl,d.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.core.mediaControl.container&&this.containerChanged()},t.prototype.containerChanged=function(){this._container&&this.stopListening(this._container),this._container=this.core.mediaControl.container,this.listenTo(this._container,d.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,d.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,d.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,d.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,d.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},t.prototype.disable=function(){e.prototype.disable.call(this),this.resetIcon()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.resetIcon()},t.prototype.createIcon=function(t){var n=(0,m.default)("<canvas/>");n[0].width=16,n[0].height=16;var r=n[0].getContext("2d");r.fillStyle="#000";var i=(0,m.default)(t).find("path").attr("d"),s=new Path2D(i);r.fill(s);var o=(0,m.default)('<link rel="shortcut icon" type="image/png"/>');return o.attr("href",n[0].toDataURL("image/png")),o},t.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(y.default)),this.changeIcon(this.playIcon)},t.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(w.default)),this.changeIcon(this.pauseIcon)},t.prototype.resetIcon=function(){(0,m.default)('link[rel="shortcut icon"]').remove(),(0,m.default)("head").append(this.oldIcon)},t.prototype.changeIcon=function(t){t&&((0,m.default)('link[rel="shortcut icon"]').remove(),(0,m.default)("head").append(t))},t}(h.default);t.default=x,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(231),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function S(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=S(r),s=n(1),o=S(s),u=n(3),a=S(u),f=n(2),l=S(f),c=n(5),h=n(34),p=S(h),d=n(8),v=S(d),m=n(4),g=S(m),y=n(10),b=S(y),w=n(232),E=S(w);n(233);var x=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r.hoveringOverSeekBar=!1,r.hoverPosition=null,r.duration=null,r.firstFragDateTime=null,r.actualLiveTime=!!r.mediaControl.options.actualLiveTime,r.actualLiveTime&&(r.mediaControl.options.actualLiveServerTime?r.actualLiveServerTimeDiff=(new Date).getTime()-(new Date(r.mediaControl.options.actualLiveServerTime)).getTime():r.actualLiveServerTimeDiff=0),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,v.default)(E.default)}},{key:"attributes",get:function(){return{"class":"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===b.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),t.prototype.bindEvents=function(){this.listenTo(this.mediaControl,g.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,g.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,g.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,g.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,g.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,g.default.CONTAINER_TIMEUPDATE,this.updateDuration))},t.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.updateDuration=function(t){this.duration=t.total,this.firstFragDateTime=t.firstFragDateTime,this.update()},t.prototype.showTime=function(t){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(t),this.update()},t.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},t.prototype.calculateHoverPosition=function(t){var n=t.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))},t.prototype.getSeekTime=function(){var t=void 0,n=void 0,r=void 0,i=void 0;return this.useActualLiveTime?(this.actualLiveServerTimeDiff?(r=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),i=new Date(r),n=(i-r.setHours(0,0,0,0))/1e3):this.firstFragDateTime&&(i=new Date(this.firstFragDateTime),r=new Date(this.firstFragDateTime),r.setHours(0,0,0,0),n=(i.getTime()-r.getTime())/1e3+this.duration),t=n-this.duration+this.hoverPosition*this.duration,t<0&&(t+=86400)):t=this.hoverPosition*this.duration,{seekTime:t,secondsSinceMidnight:n}},t.prototype.update=function(){if(!this.rendered)return;if(!this.shouldBeVisible())this.$el.hide(),this.$el.css("left","-100%");else{var t=this.getSeekTime(),n=(0,c.formatTime)(t.seekTime,this.useActualLiveTime);n!==this.displayedSeekTime&&(this.$seekTimeEl.text(n),this.displayedSeekTime=n);if(this.durationShown){this.$durationEl.show();var r=(0,c.formatTime)(this.actualLiveTime?t.secondsSinceMidnight:this.duration,this.actualLiveTime);r!==this.displayedDuration&&(this.$durationEl.text(r),this.displayedDuration=r)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),s=this.$el.width(),o=this.hoverPosition*i;o-=s/2,o=Math.max(0,Math.min(o,i-s)),this.$el.css("left",o)}},t.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&this.hoverPosition!==null&&this.duration!==null},t.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},t}(p.default);t.default=x,e.exports=t["default"]},function(e,t){e.exports="<span data-seek-time></span>\n<span data-duration></span>\n"},function(e,t,n){var r=n(234);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,'.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',""])},function(e,t,n){"use strict";function v(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=v(r),s=n(3),o=v(s),u=n(1),a=v(u),f=n(2),l=v(f),c=n(35),h=v(c),p=n(4),d=v(p),m=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core,d.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},t.prototype.onContainersCreated=function(){var t=this.core.containers.filter(function(e){return e.playback.name!=="no_op"})[0]||this.core.containers[0];t&&this.core.containers.forEach(function(e){e!==t&&e.destroy()})},(0,o.default)(t,[{key:"name",get:function(){return"sources"}}]),t}(h.default);t.default=m,e.exports=t["default"]},function(e,t,n){"use strict";function m(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=m(r),s=n(3),o=m(s),u=n(1),a=m(u),f=n(2),l=m(f),c=n(4),h=m(c),p=n(35),d=m(p),v=n(5),g=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,h.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged);var t=this.core.getCurrentContainer();t&&(this.listenTo(t,h.default.CONTAINER_ENDED,this.ended),this.listenTo(t,h.default.CONTAINER_STOP,this.ended))},t.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},t.prototype.ended=function(){var t=typeof this.core.options.exitFullscreenOnEnd=="undefined"||this.core.options.exitFullscreenOnEnd;t&&v.Fullscreen.isFullscreen()&&this.core.toggleFullscreen()},(0,o.default)(t,[{key:"name",get:function(){return"end_video"}}]),t}(d.default);t.default=g,e.exports=t["default"]},function(e,t,n){"use strict";function m(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=m(r),s=n(1),o=m(s),u=n(3),a=m(u),f=n(2),l=m(f),c=n(5),h=n(6),p=m(h),d=n(35),v=m(d),g=function(e){function t(n){(0,i.default)(this,t);var r=(0,o.default)(this,e.call(this,n));return r._initializeMessages(),r}return(0,l.default)(t,e),(0,a.default)(t,[{key:"name",get:function(){return"strings"}}]),t.prototype.t=function(t){var n=this._language(),r=n&&this._messages[n]||this._messages.en;return r[t]||t},t.prototype._language=function(){return this.core.options.language||(0,c.getBrowserLanguage)()},t.prototype._initializeMessages=function(){var t={en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not reproduce the video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"N&#227;o foi poss&#237;vel reproduzir o v&#237;deo.",default_error_message:"Ocorreu um problema ao tentar carregar o v&#237;deo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente.",default_error_title:"No se pudo reproducir el video.",default_error_message:"Hubo un problema al intentar cargar el video."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер.",default_error_title:"Не удалось воспроизвести видео.",default_error_message:"Возникла проблема с загрузкой видео."},fr:{live:"en direct",disabled:"Désactivé",back_to_live:"retour au direct",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de reproduire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin.",default_error_title:"Video yeniden oluşturulamadı.",default_error_message:"Videoyu yüklemeye çalışırken bir sorun oluştu."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit.",default_error_title:"Video ei saanud taasesitada.",default_error_message:"Video üles laadimisel proovisin proovida."}};this._messages=p.default.extend(!0,t,this.core.options.strings||{}),this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et},t}(v.default);t.default=g,e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(239),i=s(r);t.default=i.default,e.exports=t["default"]},function(e,t,n){"use strict";function x(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=x(r),s=n(3),o=x(s),u=n(1),a=x(u),f=n(2),l=x(f),c=n(4),h=x(c),p=n(34),d=x(p),v=n(8),m=x(v),g=n(23),y=x(g),b=n(240),w=x(b),E=n(241),S=x(E);n(242);var T=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.bindEvents=function(){this.listenTo(this.core,h.default.ERROR,this.onError),this.listenTo(this.core.mediaControl,h.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged)},t.prototype.bindReload=function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))},t.prototype.reload=function(){var t=this;this.listenToOnce(this.core,h.default.CORE_READY,function(){return t.container.play()}),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()},t.prototype.unbindReload=function(){this.reloadButton&&this.reloadButton.off("click")},t.prototype.onContainerChanged=function(){this.err=null,this.unbindReload(),this.hide()},t.prototype.onError=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};t.level===y.default.Levels.FATAL&&(this.err=t,this.container.disableMediaControl(),this.container.stop(),this.show())},t.prototype.show=function(){this.render(),this.$el.show()},t.prototype.hide=function(){this.$el.hide()},t.prototype.render=function(){if(!this.err)return;return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:w.default})),this.core.$el.append(this.el),this.bindReload(),this},(0,o.default)(t,[{key:"name",get:function(){return"error_screen"}},{key:"template",get:function(){return(0,m.default)(S.default)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{"class":"player-error-screen","data-error-screen":""}}}]),t}(d.default);t.default=T,e.exports=t["default"]},function(e,t){e.exports='<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},function(e,t){e.exports='<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n'},function(e,t,n){var r=n(243);typeof r=="string"&&(r=[[e.i,r,""]]);var i,s,o={singleton:!0,hmr:!0};o.transform=i,o.insertInto=undefined;var u=n(9)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1),t.push([e.i,"div.player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n  div.player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  div.player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  div.player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  div.player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  div.player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0; }\n",""])}])})